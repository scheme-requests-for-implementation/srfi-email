<!-- MHonArc v2.6.15 -->
<!--X-Subject: fwd: [William D Clinger] patch file for SRFI 69 reference implementation -->
<!--X-From-R13: Bnah Ynyyvbxbfxv <ngrujnNfnatr.sv> -->
<!--X-Date: Mon, 22 May 2006 08:56:05 +0200 (MST) -->
<!--X-Message-Id: 20060522065414.GB31211@juiblex.it.helsinki.fi -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>fwd: [William D Clinger] patch file for SRFI 69 reference implementation</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00006.html">Date Prev</a>][<a href="msg00008.html">Date Next</a>][<a href="msg00006.html">Thread Prev</a>][<a href="msg00008.html">Thread Next</a>][<a href="maillist.html#00007">Date Index</a>][<a href="threads.html#00007">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>fwd: [William D Clinger] patch file for SRFI 69 reference implementation</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: <a href="mailto:srfi-69@DOMAIN.HIDDEN">srfi-69@xxxxxxxxxxxxxxxxx</a></li>
<li><em>Subject</em>: fwd: [William D Clinger] patch file for SRFI 69 reference implementation</li>
<li><em>From</em>: Panu Kalliokoski &lt;<a href="mailto:atehwa@DOMAIN.HIDDEN">atehwa@xxxxxxxx</a>&gt;</li>
<li><em>Date</em>: Mon, 22 May 2006 09:54:14 +0300</li>
<li><em>Delivered-to</em>: <a href="mailto:srfi-69@DOMAIN.HIDDEN">srfi-69@xxxxxxxxxxxxxxxxx</a></li>
<li><em>User-agent</em>: Mutt/1.5.9i</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>Here is more correspondence about the issues I mentioned.  Comments
appreciated.

----- Forwarded message from Panu Kalliokoski &lt;panu.kalliokoski@xxxxxxxxxxx&gt; -----

On Wed, Apr 12, 2006 at 07:31:43PM +0200, Michael Sperber wrote:
&gt; ; Noted by William D Clinger, 4 March 2006:
&gt; ; The hash procedure returns an inexact number when asked to
&gt; ; hash an inexact number or a structure containing inexact
&gt; ; numbers.
&gt; ; The hash-by-identity procedure hashes on the values currently
&gt; ; stored within a mutable object.
&gt; ; The hash-by-identity procedure does not terminate on circular
&gt; ; structures.

On Wed, May 10, 2006 at 12:25:46PM -0400, David Van Horn wrote:
&gt; &gt; Well, understandably Will took the path easiest for him.  But his
&gt; &gt; point stands, namely that the current reference implementation isn't
&gt; &gt; correct.  Any path that leads to a correct one is acceptable by me.
&gt; &gt; How you do it (and if you do it) is entirely up to you.
&gt; Agreed.  However at the very least, the issues Clinger identified should
&gt; be mentioned on the SRFI discussion list regardless of whether the
&gt; reference implementation will be fixed or not.  If the reference
&gt; implementation will not be fixed, or will not be fixed immediately, I'd

Point #1 can be fixed relatively easily, although it can be questioned
whether inexact numbers should be hashed at all (do they even guarantee
that the inexact result of an arithmetic calculation remain the same upon
multiple instances of that calculation?)  Points #2 and #3 would need
both changes in the SRFI (to actually require those properties) as well
as an Scheme implementation specific implementation to be able to comply
with other restrictions in the SRFI.  I would have liked to receive
comments of them, but only got one reply to the question I posted on the
discussion list.  Another problem is that for some Scheme
implementations it might _really_ be problematic to implement
hash-by-identity if it was required to remain constant over time and
change.

&gt; like to see the alternative implementation posted to the discussion list
&gt; (after Clinger's approval of course).

Of course, that's okay with me.  And then I could also comment on it, so
that it ends in the archive, that it's not really conformant to the SRFI
(because it does not give an appropriate hashing function for most kinds
of data structures).

----- End forwarded message -----
----- Forwarded message from Panu Kalliokoski &lt;panu.kalliokoski@xxxxxxxxxxx&gt; -----

On Thu, May 18, 2006 at 04:44:36PM -0400, David Van Horn wrote:
&gt; &gt; True.  I only mentioned point #2 yet, as it seemed most problematic to
&gt; &gt; me; however, it did not end in the archive AFAICT, is the archive
&gt; &gt; somehow closed after finalisation?
&gt; It shouldn't be, but I forgot a step during finalization that makes it
&gt; accessible.  It's accessible now.  Sorry about that.

Okay.  Anyway, the situation remains thus: the inexactness problem is
repairable (although its usefulness is questionable) and I can do so
when I find the time.  For the other points, the spec and impl seem to
conform to each other; however, whether (and how) both should be changed
is open to discussion; changing only the implementation is not an
option, because it makes that impl nonconformant with the spec.

----- End forwarded message -----

The solution I would really like to see is that we could add guarantees
of change consistency and termination for hash-by-identity and provide
a reference implementation for at least some Scheme implementation
(because I can't think of a way to implement it portably while
conforming to other requirements in the SRFI).

Panu

-- 
personal contact:	panu.kalliokoski@xxxxxxxxxxx, +35841 5323835
technical contact:	atehwa@xxxxxx, <a  rel="nofollow" href="http://www.iki.fi/atehwa/">http://www.iki.fi/atehwa/</a>
PGP fingerprint:	0EA5 9D33 6590 FFD4 921C  5A5F BE85 08F1 3169 70EC
Please consider membership of <a  rel="nofollow" href="http://www.hospitalityclub.org/">http://www.hospitalityclub.org/</a>!

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00006.html">Re: hash-by-identity guarantees of change consistency?</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00008.html">bug in reference implementation of HASH-TABLE-UPDATE!</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00006.html">Re: hash-by-identity guarantees of change consistency?</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00008.html">bug in reference implementation of HASH-TABLE-UPDATE!</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00007"><strong>Date</strong></a></li>
<li><a href="threads.html#00007"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>

<!-- MHonArc v2.6.15 -->
<!--X-Subject: Re: file options -->
<!--X-From-R13: Eronfgvna Stare <fronfgvna.rtareNcuvyvcf.pbz> -->
<!--X-Date: Thu, 23 Jun 2005 16:02:05 +0200 (DFT) -->
<!--X-Message-Id: OF7006050F.26CC11E8&#45;ONC1257029.0047C485&#45;C1257029.004CAD20@philips.com -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: 6KsWtB.A.gME.z1quCB@rotkohl -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: file options</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00054.html">Date Prev</a>][<a href="msg00056.html">Date Next</a>][<a href="msg00054.html">Thread Prev</a>][<a href="msg00056.html">Thread Next</a>][<a href="maillist.html#00055">Date Index</a>][<a href="threads.html#00055">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: file options</h1>
<p style="max-width: 30em;">This page is part of the web mail archives of <a href="http://srfi.schemers.org/srfi-68">SRFI 68</a> from before July 7th, 2015.  The new archives for SRFI 68 are <a href="http://srfi-email.schemers.org/srfi-68/">here</a>.  The new archives contain all messages, not just those from before July 7th, 2015.</p>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: <a href="mailto:srfi-68@DOMAIN.HIDDEN">srfi-68@xxxxxxxxxxxxxxxxx</a></li>
<li><em>Subject</em>: Re: file options</li>
<li><em>From</em>: Sebastian Egner &lt;<a href="mailto:sebastian.egner@DOMAIN.HIDDEN">sebastian.egner@xxxxxxxxxxx</a>&gt;</li>
<li><em>Date</em>: Thu, 23 Jun 2005 15:57:07 +0200</li>
<li><em>Cc</em>: <a href="mailto:sperber@DOMAIN.HIDDEN">sperber@xxxxxxxxxxxxxxxxxxxxxxxxxxx</a></li>
<li><em>Delivered-to</em>: <a href="mailto:srfi-68@DOMAIN.HIDDEN">srfi-68@xxxxxxxxxxxxxxxxx</a></li>
<li><em>In-reply-to</em>: &lt;<a href="mailto:6KsWtB.A.gME.z1quCB@DOMAIN.HIDDEN">6KsWtB.A.gME.z1quCB@rotkohl</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->

<br><font size=2><tt>Mike Sperber wrote: <br>
&gt; Sebastian Egner &lt;sebastian.egner@xxxxxxxxxxx&gt; writes:<br>
&gt; &gt;&gt; - The procedures for opening files for output now accept
a<br>
&gt; &gt;&gt; &nbsp; file-options argument.<br>
&gt; &gt;<br>
&gt; &gt; Sorry to keep bothing you with that, but I noticed two potential
problems <br>
&gt; &gt; with the<br>
&gt; &gt; way this was solved in the SRFI:<br>
&gt; &gt;<br>
&gt; &gt; 1. File options do not have to have an external representation.
<br>
&gt; <br>
&gt; Right. &nbsp;Why do they need one?<br>
&gt;</tt></font>
<br><font size=2><tt>&gt; &gt; Can I retrieve the file-options used for
opening a particular<br>
&gt; &gt; reader/writer/... from the reader/writer/... object?<br>
&gt; <br>
&gt; No, the file options are specific to files. &nbsp;Can you argue why
this<br>
&gt; would be important? &nbsp;(For example, C API doesn't have this ability<br>
&gt; either, as far as I can tell.)<br>
</tt></font>
<br><font size=2 face="sans-serif">Both issues (external repr. and retrieving
the file-options from a file) are related to</font>
<br><font size=2 face="sans-serif">the same thing, so I discuss them together.</font>
<br>
<br><font size=2 face="sans-serif">In the Mathematica programming language
you can open a file for adding stuff</font>
<br><font size=2 face="sans-serif">using the OpenAppend operation. This
operation has a number of options,</font>
<br><font size=2 face="sans-serif">with defaults, each of which can be
overwritten using Mathematica rules. In</font>
<br><font size=2 face="sans-serif">Mathematica, that is the mechanism to
pass options---it works very well;</font>
<br><font size=2 face="sans-serif">a lot to type, but I never made a mistake
and the defaults work well.</font>
<br>
<br><font size=2 face="sans-serif">The options of OpenAppend are described
here:</font>
<br>
<br><font size=2 face="sans-serif">&nbsp; &nbsp; &nbsp; &nbsp; http://documents.wolfram.com/v4/RefGuide/OpenAppend.html</font>
<br>
<br><font size=2 face="sans-serif">As you see, the options convey information
that is being used to format</font>
<br><font size=2 face="sans-serif">the output sent to the file. Other options
would be more related to the operating</font>
<br><font size=2 face="sans-serif">system, i.e. file permissions, but these
are not part of Mathematica.</font>
<br>
<br><font size=2 face="sans-serif">Now I have the feeling (it's not much
more than that right now) that the day</font>
<br><font size=2 face="sans-serif">may come where the options should be
externalized and internalized again.</font>
<br><font size=2 face="sans-serif">As a hypothetical example, think of
a SRFI defining the following thing for</font>
<br><font size=2 face="sans-serif">distributed execution:</font>
<br>
<br><font size=2 face="sans-serif">&nbsp; &nbsp; &nbsp; &nbsp; (WITH-REMOTE-PROCEDURE-CALL
server thunk)</font>
<br>
<br><font size=2 face="sans-serif">which connects via some RPC-based middleware
thingy to /server/ and</font>
<br><font size=2 face="sans-serif">then executes /thunk/. The idea is that
all I/O commands, including opening</font>
<br><font size=2 face="sans-serif">files, are executed on the server. This
will be great if (and only if) the I/O API </font>
<br><font size=2 face="sans-serif">can be used without knowing what it
is, i.e. if the client and the server can </font>
<br><font size=2 face="sans-serif">run different operating systems, Schemes
systems etc. but still know enough</font>
<br><font size=2 face="sans-serif">about each other to do meaningful things.</font>
<br>
<br><font size=2 face="sans-serif">In practice this will only be possible
if a number of things fit together:</font>
<br><font size=2 face="sans-serif">1. The entire negotiation between language
and OS can be represented</font>
<br><font size=2 face="sans-serif">in a data structure.</font>
<br><font size=2 face="sans-serif">2. The data structure can be sent losslessly
through a WRITE/READ channel.</font>
<br><font size=2 face="sans-serif">3. The default behavior makes sense
in all cases that do not require special</font>
<br><font size=2 face="sans-serif">treatment anyhow (e.g. if you need a
pipe, you better have an OS that has them).</font>
<br><font size=2 face="sans-serif">4. There is a way to reconstruct the
negotiation later from the object itself,</font>
<br><font size=2 face="sans-serif">i.e. you can get the options back from
the file. </font>
<br>
<br><font size=2 face="sans-serif">The last point might not really be essential,
but I have seen great programs</font>
<br><font size=2 face="sans-serif">to find out if a file descriptor in
C is connected to file or a ptty because in one</font>
<br><font size=2 face="sans-serif">case you might to do this, while in
the other you might do that. Of course, this</font>
<br><font size=2 face="sans-serif">information could be passed from the
guy who made the file descriptor to</font>
<br><font size=2 face="sans-serif">the guy who uses it on a side-channel,
but in UNIX that is not what happens;</font>
<br><font size=2 face="sans-serif">you poke around with fcntl/ioctls until
you can guess it.</font>
<br>
<br><font size=2 face="sans-serif">What I have sketched here is an extremely
strong form of portability,</font>
<br><font size=2 face="sans-serif">and I am not sure the world is ready
for that. I am also not sure the plan</font>
<br><font size=2 face="sans-serif">can really be executed. Also, I admit
that it has no precedent in the civilized</font>
<br><font size=2 face="sans-serif">world---you should be happy if the language
gives you a reasonable way</font>
<br><font size=2 face="sans-serif">of opening a file /locally/, like Ruby,
Python, ... (missing something?)</font>
<br><font size=2><tt><br>
&gt; &gt; Apart from that I noticed that the /file-options/ argument is<br>
&gt; &gt; mandatory. Is that really the intention? Shouldn't it be optional,<br>
&gt; &gt; with the obligation for the implementation to provide a reasonable<br>
&gt; &gt; default behavior?<br>
&gt; <br>
&gt; The problem is that there's no obvious reasonable default, evidenced<br>
&gt; by the fact that different Scheme implementations use different<br>
&gt; defaults for OPEN-OUTPUT-FILE.<br>
</tt></font>
<br><font size=2 face="sans-serif">So that's what DEFAULT-FILE-OPTIONS
could be for.</font>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00056" href="msg00056.html">Re: file options</a></strong>
<ul><li><em>From:</em> Michael Sperber</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00054.html">Re: file options</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00056.html">Re: file options</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00054.html">Re: file options</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00056.html">Re: file options</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00055"><strong>Date</strong></a></li>
<li><a href="threads.html#00055"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>

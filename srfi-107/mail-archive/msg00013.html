<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: Simplifying SRFI 109, part 1: entities -->
<!--X-From-R13: Bre Pbguare <creNobguare.pbz> -->
<!--X-Date: Sun, 31 Mar 2013 09:12:34 +0200 (MST) -->
<!--X-Message-Id: 5157E1D8.8010802@bothner.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 20130210080446.GD19521@mercury.ccil.org -->
<!--X-Reference: 512C5A2F.7010800@bothner.com -->
<!--X-Reference: 20130330232727.GO29250@mercury.ccil.org -->
<!--X-Reference: 51579CFF.3020101@bothner.com -->
<!--X-Reference: 20130331055747.GB7409@mercury.ccil.org -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: Simplifying SRFI 109, part 1: entities</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00012.html">Date Prev</a>][<a href="msg00014.html">Date Next</a>][<a href="msg00012.html">Thread Prev</a>][<a href="msg00014.html">Thread Next</a>][<a href="maillist.html#00013">Date Index</a>][<a href="threads.html#00013">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: Simplifying SRFI 109, part 1: entities</h1>
<p style="max-width: 30em;">This page is part of the web mail archives of <a href="http://srfi.schemers.org/srfi-107">SRFI 107</a> from before July 7th, 2015.  The <a href="http://srfi-email.schemers.org/srfi-107">new archives</a> for SRFI 107 contain all messages, not just those from before July 7th, 2015.</p>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: John Cowan &lt;<a href="mailto:cowan@DOMAIN.HIDDEN">cowan@xxxxxxxxxxxxxxxx</a>&gt;</li>
<li><em>Subject</em>: Re: Simplifying SRFI 109, part 1: entities</li>
<li><em>From</em>: Per Bothner &lt;<a href="mailto:per@DOMAIN.HIDDEN">per@xxxxxxxxxxx</a>&gt;</li>
<li><em>Date</em>: Sun, 31 Mar 2013 00:12:24 -0700</li>
<li><em>Cc</em>: <a href="mailto:srfi-109@DOMAIN.HIDDEN">srfi-109@xxxxxxxxxxxxxxxxx</a>, <a href="mailto:srfi-107@DOMAIN.HIDDEN">srfi-107@xxxxxxxxxxxxxxxxx</a></li>
<li><em>Delivered-to</em>: <a href="mailto:srfi-107@DOMAIN.HIDDEN">srfi-107@xxxxxxxxxxxxxxxxx</a></li>
<li><em>In-reply-to</em>: &lt;<a href="mailto:20130331055747.GB7409@DOMAIN.HIDDEN">20130331055747.GB7409@xxxxxxxxxxxxxxxx</a>&gt;</li>
<li><em>References</em>: &lt;<a href="mailto:20130210080446.GD19521@DOMAIN.HIDDEN">20130210080446.GD19521@xxxxxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:512C5A2F.7010800@DOMAIN.HIDDEN">512C5A2F.7010800@xxxxxxxxxxx</a>&gt; &lt;<a href="mailto:20130330232727.GO29250@DOMAIN.HIDDEN">20130330232727.GO29250@xxxxxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:51579CFF.3020101@DOMAIN.HIDDEN">51579CFF.3020101@xxxxxxxxxxx</a>&gt; &lt;<a href="mailto:20130331055747.GB7409@DOMAIN.HIDDEN">20130331055747.GB7409@xxxxxxxxxxxxxxxx</a>&gt;</li>
<li><em>User-agent</em>: Mozilla/5.0 (X11; Linux x86_64; rv:17.0) Gecko/20130311 Thunderbird/17.0.4</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">
On 03/30/2013 10:57 PM, John Cowan wrote:
</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
Per Bothner scripsit:

</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
It is more important to preserve the XML conceptual &quot;information
model&quot;,
</pre></blockquote><pre style="margin: 0em;">

Absolutely, but SRFI 107 models only a part of the XML Infoset
&lt;<a  rel="nofollow" href="http://www.w3.org/TR/xml-infoset">http://www.w3.org/TR/xml-infoset</a>&gt;, of which (ahem) I was the principal
editor.
</pre></blockquote><pre style="margin: 0em;">

Yes, I actually consulted that today and noticed the &quot;coincidence&quot;
of the name.  Glad to confirm my assumption they're one and the same.
(I also know a John Cowan socially, but he doesn't appear to be you ...)

</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
SRFI 107 as currently written does not support the concept of an
XML document - whether we mean:  (1) XML document as a file format.
(2) DOM Document as a data type for representing the &quot;significant&quot;
information
</pre></blockquote><pre style="margin: 0em;">

It's the second concept I mean.

</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
SRFI-107 doesn't directly support either.  I think APIs supporting
both are desirable - and SRFI-107 should hopefully work well with such
APIs.  However, this process has dragged on long enough, and working
with documents seems like new functionality that I think should be
saved for future work.
</pre></blockquote><pre style="margin: 0em;">

In that case, perhaps this SRFI should be renamed &quot;XML element reader
syntax&quot;.
</pre></blockquote><pre style="margin: 0em;">

First, this SRFI also has a reader syntax for PI nodes, comment nodes,
and CDATA nodes.

There is no support for (top-level) attribute nodes, though you can
write them with a $xml-attribute$ constructor.

My assumption is a Scheme API for XML would have standard
function calls for creating DOM Nodes, and the SRFI-107
syntax would be basically syntactic sugar.

Some other languages also provide similar XML &quot;literals&quot;.
My goal is not to embed XML documents inside a program,
but to provide a more familiar syntax equivalent to node
constructor expressions.  XQuery has equivalent functionality
as this proposal: XML-style syntax for elements, PI, and
comments.  For attributes and documents you need to use
&quot;computed constructors&quot;.  &quot;EcmaScript for XML&quot; is similar.
Visual Basic does support &quot;XML Document literals&quot;, and
I guess we can add support for them.  Perhaps we can allow:

  #&lt;?xml optional-stuff?&gt;&lt;root&gt;...&lt;/root&gt;

and/or:

  #&lt;!DOCTYPE root optional-stuff&gt;&lt;root&gt;...&lt;/root&gt;

And of course we can use SRFI1-108 in some way.

However, doing this &quot;right&quot; adds a fair bit of extra
work and complexity.  It also pushes the limits of my
expertise.  The obvious reader translation is to an
$xml-document$ constructor.  Beyond that things are less
obvious.  Because the infoset for an XML document is rather
complex, it seems cleaner to use keywords - but alas keywords
are far from standard: We get into the question of
whether to use SRFI-88-style keywords or plain symbols.
I like SRFI-88-style keywords of course (Kawa has them),
but obviously this limits portability.  (Though if we
add them to R7RS-large I'd have less reluctance ...)

If you think the name &quot;XML reader syntax&quot; is misleading,
we could change the name to &quot;Basic XML reader syntax&quot; by
analogy with SRFI-28.

</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
Indeed, that is rather vague - and raises these questions:  (1) What are
&quot;standard Scheme character names&quot;? I suggest going with the R7RS names.
</pre></blockquote><pre style="margin: 0em;">

I'm happy with that, of course.

</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
(2) When it comes to an implementation supporting &quot;standard Scheme
character names&quot;, is this a &quot;must&quot; or a &quot;should&quot;?  I could go either
way.  (3) Do we want a different answer for SRFI-17 and SRFI-108/-109?
I'd prefer not.
</pre></blockquote><pre style="margin: 0em;">

I'd prefer a SHOULD for all three SRFIs.
</pre></blockquote><pre style="margin: 0em;">

Updated in: <a  rel="nofollow" href="http://per.bothner.com/tmp/srfi-109/srfi-109.html">http://per.bothner.com/tmp/srfi-109/srfi-109.html</a>
--
	--Per Bothner
per@xxxxxxxxxxx   <a  rel="nofollow" href="http://per.bothner.com/">http://per.bothner.com/</a>

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00010" href="msg00010.html">Re: Simplifying SRFI 109, part 1: entities</a></strong>
<ul><li><em>From:</em> John Cowan</li></ul></li>
<li><strong><a name="00011" href="msg00011.html">Re: Simplifying SRFI 109, part 1: entities</a></strong>
<ul><li><em>From:</em> Per Bothner</li></ul></li>
<li><strong><a name="00012" href="msg00012.html">Re: Simplifying SRFI 109, part 1: entities</a></strong>
<ul><li><em>From:</em> John Cowan</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00012.html">Re: Simplifying SRFI 109, part 1: entities</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00014.html">finishing SRFI-107 - representation of namespace declarations</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00012.html">Re: Simplifying SRFI 109, part 1: entities</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00014.html">finishing SRFI-107 - representation of namespace declarations</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00013"><strong>Date</strong></a></li>
<li><a href="threads.html#00013"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>

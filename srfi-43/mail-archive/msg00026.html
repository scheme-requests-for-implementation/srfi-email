<!-- MHonArc v2.6.15 -->
<!--X-Subject: Re: Storage Efficiency of Vectors -->
<!--X-From-R13: Bre Pbguare <creNobguare.pbz> -->
<!--X-Date: Wed, 16 Apr 2003 20:40:59 +0200 (DFT) -->
<!--X-Message-Id: 3E9DA3D0.7080502@bothner.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 200304161555.h3GFttcu003879@sapi.astrosmo.unam.mx -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: Storage Efficiency of Vectors</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00025.html">Date Prev</a>][<a href="msg00027.html">Date Next</a>][<a href="msg00025.html">Thread Prev</a>][<a href="msg00027.html">Thread Next</a>][<a href="maillist.html#00026">Date Index</a>][<a href="threads.html#00026">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: Storage Efficiency of Vectors</h1>
<p style="max-width: 30em;">This page is part of the web mail archives of <a href="http://srfi.schemers.org/srfi-43">SRFI 43</a> from before July 7th, 2015.  The new archives for SRFI 43 are <a href="http://srfi-email.schemers.org/srfi-43/">here</a>.  The new archives contain all messages, not just those from before July 7th, 2015.</p>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: Alan Watson &lt;<a href="mailto:a.watson@DOMAIN.HIDDEN">a.watson@xxxxxxxxxxxxxxxx</a>&gt;</li>
<li><em>Subject</em>: Re: Storage Efficiency of Vectors</li>
<li><em>From</em>: Per Bothner &lt;<a href="mailto:per@DOMAIN.HIDDEN">per@xxxxxxxxxxx</a>&gt;</li>
<li><em>Date</em>: Wed, 16 Apr 2003 11:41:20 -0700</li>
<li><em>Cc</em>: <a href="mailto:srfi-43@DOMAIN.HIDDEN">srfi-43@xxxxxxxxxxxxxxxxx</a></li>
<li><em>Delivered-to</em>: <a href="mailto:srfi-43@DOMAIN.HIDDEN">srfi-43@xxxxxxxxxxxxxxxxx</a></li>
<li><em>In-reply-to</em>: &lt;<a href="mailto:200304161555.h3GFttcu003879@DOMAIN.HIDDEN">200304161555.h3GFttcu003879@xxxxxxxxxxxxxxxxxxxxx</a>&gt;</li>
<li><em>References</em>: &lt;<a href="mailto:200304161555.h3GFttcu003879@DOMAIN.HIDDEN">200304161555.h3GFttcu003879@xxxxxxxxxxxxxxxxxxxxx</a>&gt;</li>
<li><em>User-agent</em>: Mozilla/5.0 (Macintosh; U; PPC Mac OS X Mach-O; en-US; rv:1.3) Gecko/20030312</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">
Alan Watson wrote:
</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
I'm also not sure that &quot;stretchy&quot; vectors will help much in the common
case that a vector of an initially unknown size is constructed and then
its size is not changed.  ... So, to some degree which is better
comes down to the distribution of vector lengths. However, we're talking
about factors of less than two.
</pre></blockquote><pre style="margin: 0em;">

The tradeoff here depends a lot on your memory allocation and gc
overheads.  If you have a memory allocator that is tuned for handling
allocating and reclaiming cons cells really fast, then I suspect the
best strategy is to use a temporary list.  On the other hand if
object allocation or collection are relatively slow or don't
special-case cons cells, then re-allocating will probably be faster.

It is of course more elegant (and more portable) to have the final
result be a vector whose allocated size matches the active size.
For best general-purpose efficiency it might be best to allocate
temporary medium-sized chunks of say 32-64 elements and chain them
together, and then make a final pass copying them to the result vector.
--
	--Per Bothner
per@xxxxxxxxxxx   <a  rel="nofollow" href="http://per.bothner.com/">http://per.bothner.com/</a>


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00027" href="msg00027.html">Re: Storage Efficiency of Vectors</a></strong>
<ul><li><em>From:</em> bear</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00025" href="msg00025.html">Storage Efficiency of Vectors</a></strong>
<ul><li><em>From:</em> Alan Watson</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00025.html">Storage Efficiency of Vectors</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00027.html">Re: Storage Efficiency of Vectors</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00025.html">Storage Efficiency of Vectors</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00027.html">Re: Storage Efficiency of Vectors</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00026"><strong>Date</strong></a></li>
<li><a href="threads.html#00026"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>

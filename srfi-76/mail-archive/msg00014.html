<!-- MHonArc v2.6.15 -->
<!--X-Subject: Re: Problems with field initialization: Proposal -->
<!--X-From-R13: [vpunry Ecreore <fcreoreNvasbezngvx.hav&#45;ghrovatra.qr> -->
<!--X-Date: Thu, 15 Sep 2005 20:15:03 +0200 (MST) -->
<!--X-Message-Id: y9lr7bq8ag1.fsf@sams.informatik.uni&#45;tuebingen.de -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 200509151634.j8FGYlec024397@later.het.brown.edu -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: Problems with field initialization: Proposal</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00013.html">Date Prev</a>][<a href="msg00015.html">Date Next</a>][<a href="msg00013.html">Thread Prev</a>][<a href="msg00017.html">Thread Next</a>][<a href="maillist.html#00014">Date Index</a>][<a href="threads.html#00014">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: Problems with field initialization: Proposal</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: <a href="mailto:andre@DOMAIN.HIDDEN">andre@xxxxxxxxxxxxxxxxx</a>, <a href="mailto:srfi-76@DOMAIN.HIDDEN">srfi-76@xxxxxxxxxxxxxxxxx</a></li>
<li><em>Subject</em>: Re: Problems with field initialization: Proposal</li>
<li><em>From</em>: Michael Sperber &lt;<a href="mailto:sperber@DOMAIN.HIDDEN">sperber@xxxxxxxxxxxxxxxxxxxxxxxxxxx</a>&gt;</li>
<li><em>Date</em>: Thu, 15 Sep 2005 20:14:54 +0200</li>
<li><em>Delivered-to</em>: <a href="mailto:srfi-76@DOMAIN.HIDDEN">srfi-76@xxxxxxxxxxxxxxxxx</a></li>
<li><em>In-reply-to</em>: &lt;<a href="mailto:200509151634.j8FGYlec024397@DOMAIN.HIDDEN">200509151634.j8FGYlec024397@xxxxxxxxxxxxxxxxxxx</a>&gt; (Andre van	Tonder's message of &quot;Thu, 15 Sep 2005 12:34:47 -0400 (EDT)&quot;)</li>
<li><em>References</em>: &lt;<a href="mailto:200509151634.j8FGYlec024397@DOMAIN.HIDDEN">200509151634.j8FGYlec024397@xxxxxxxxxxxxxxxxxxx</a>&gt;</li>
<li><em>User-agent</em>: Gnus/5.110003 (No Gnus v0.3) XEmacs/21.5-b21 (berkeley-unix)</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>
Andre van Tonder &lt;andre@xxxxxxxxxxxxxxxxxxx&gt; writes:

&gt;  As an example, the hash-table example could be expressed:
&gt;
&gt;   (define-type hash-table
&gt;     (constructor (k) (lambda (pred hasher size)
&gt;                        (k pred
&gt;                           hasher
&gt;                           (make-vector (nearest-prime size))
&gt;                           0)))         
&gt;     (fields (pred   immutable)
&gt;             (hasher immutable)
&gt;             (data   mutable)
&gt;             (count  mutable))))
&gt;
&gt;   (define-type eq-hash-table
&gt;     (parent hash-table)
&gt;     (constructor (k) (lambda (pred hasher size)
&gt;                        (k pred
&gt;                           hasher
&gt;                           size
&gt;                           0)))
&gt;     (fields (gc-count mutable)))

Thanks for writing this up---this helps imagining what it'd look like.

I'm confused about the K argument in the EQ-HASH-TABLE example.  Does
it call the primitive constructor of the underlying record type, or
the construction procedure of the supertype?  If the former, there's
one argument missing.  (And I'd ask how I could reuse the construction
procedure of the supertype.)  If the latter, what's it's return value,
and how do I transform it into an instance of the subtype?

-- 
Cheers =8-} Mike
Friede, V&#xF6;lkerverst&#xE4;ndigung und &#xFC;berhaupt blabla

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00017" href="msg00017.html">Re: Problems with field initialization: Proposal</a></strong>
<ul><li><em>From:</em> Andre van Tonder</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00013" href="msg00013.html">Re: Problems with field initialization: Proposal</a></strong>
<ul><li><em>From:</em> Andre van Tonder</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00013.html">Re: Problems with field initialization: Proposal</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00015.html">Re: Problem with type inference</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00013.html">Re: Problems with field initialization: Proposal</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00017.html">Re: Problems with field initialization: Proposal</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00014"><strong>Date</strong></a></li>
<li><a href="threads.html#00014"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>

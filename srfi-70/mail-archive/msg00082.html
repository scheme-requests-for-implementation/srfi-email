<!-- MHonArc v2.6.15 -->
<!--X-Subject: Re: infinities reformulated -->
<!--X-From-R13: orne <orneNfbavp.arg> -->
<!--X-Date: Mon, 20 Jun 2005 07:46:45 +0200 (DFT) -->
<!--X-Message-Id: Pine.LNX.4.58.0506192206200.14556@bolt.sonic.net -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 20050531071658.EC10C1167@mx4.informatik.uni&#45;tuebingen.de -->
<!--X-Reference: 20050531234805.0EC7F1B77B4@voluntocracy.org -->
<!--X-Reference: 874qcgg4uf.fsf@becket.becket.net -->
<!--X-Reference: 20050602161228.B3E3D1B77B4@voluntocracy.org -->
<!--X-Reference: Pine.LNX.4.58.0506040915430.19280@bolt.sonic.net -->
<!--X-Reference: 20050617022326.B80B91B77B4@voluntocracy.org -->
<!--X-Reference: Pine.LNX.4.58.0506190953020.27880@bolt.sonic.net -->
<!--X-Reference: 20050620031056.EA6DF1B77B4@voluntocracy.org -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: infinities reformulated</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00081.html">Date Prev</a>][<a href="msg00083.html">Date Next</a>][<a href="msg00081.html">Thread Prev</a>][<a href="msg00088.html">Thread Next</a>][<a href="maillist.html#00082">Date Index</a>][<a href="threads.html#00082">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: infinities reformulated</h1>
<p style="max-width: 30em;">This page is part of the web mail archives of <a href="http://srfi.schemers.org/srfi-70">SRFI 70</a> from before July 7th, 2015.  The new archives for SRFI 70 are <a href="http://srfi-email.schemers.org/srfi-70/">here</a>.  The new archives contain all messages, not just those from before July 7th, 2015.</p>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: Aubrey Jaffer &lt;<a href="mailto:agj@DOMAIN.HIDDEN">agj@xxxxxxxxxxxx</a>&gt;</li>
<li><em>Subject</em>: Re: infinities reformulated</li>
<li><em>From</em>: bear &lt;<a href="mailto:bear@DOMAIN.HIDDEN">bear@xxxxxxxxx</a>&gt;</li>
<li><em>Date</em>: Sun, 19 Jun 2005 22:46:33 -0700 (PDT)</li>
<li><em>Cc</em>: <a href="mailto:srfi-70@DOMAIN.HIDDEN">srfi-70@xxxxxxxxxxxxxxxxx</a></li>
<li><em>Delivered-to</em>: <a href="mailto:srfi-70@DOMAIN.HIDDEN">srfi-70@xxxxxxxxxxxxxxxxx</a></li>
<li><em>In-reply-to</em>: &lt;<a href="mailto:20050620031056.EA6DF1B77B4@DOMAIN.HIDDEN">20050620031056.EA6DF1B77B4@xxxxxxxxxxxxxxxx</a>&gt;</li>
<li><em>References</em>: &lt;<a href="mailto:20050531071658.EC10C1167@DOMAIN.HIDDEN">20050531071658.EC10C1167@xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:20050531234805.0EC7F1B77B4@DOMAIN.HIDDEN">20050531234805.0EC7F1B77B4@xxxxxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:874qcgg4uf.fsf@DOMAIN.HIDDEN">874qcgg4uf.fsf@xxxxxxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:20050602161228.B3E3D1B77B4@DOMAIN.HIDDEN">20050602161228.B3E3D1B77B4@xxxxxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:Pine.LNX.4.58.0506040915430.19280@DOMAIN.HIDDEN">Pine.LNX.4.58.0506040915430.19280@xxxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:20050617022326.B80B91B77B4@DOMAIN.HIDDEN">20050617022326.B80B91B77B4@xxxxxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:Pine.LNX.4.58.0506190953020.27880@DOMAIN.HIDDEN">Pine.LNX.4.58.0506190953020.27880@xxxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:20050620031056.EA6DF1B77B4@DOMAIN.HIDDEN">20050620031056.EA6DF1B77B4@xxxxxxxxxxxxxxxx</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>

On Sun, 19 Jun 2005, Aubrey Jaffer wrote:

&gt; | It often happens in neural networks (read: my day job) that
&gt; | being able to store a bunch of floats compactly (level-2
&gt; | cache size) results in dramatic speedups, and in such cases
&gt; | (in C) I use arrays of 32-bit floats rather than 64-bit
&gt; | doubles.

&gt; | But a couple of years ago, I had a (toy) project where I was
&gt; | &lt;clip&gt;. And in that project, having 512-bit precise reals &lt;clip&gt;
&gt; | was *NECESSARY*, since even with scaling, using &quot;doubles&quot; would
&gt; | have lost crucial information in the underflow.

&gt; Would weakening the &quot;most precise&quot; requirement to a recommendation
&gt; improve Scheme as a platform for such arithmetics?

It's hard to know what to do.  No portable code relying on
particular float sizes can be written on the basis of R5RS.
The suggested change of weakening the requirement to a
recommendation would not enable such code, so the situation
for specialized calculations would not be improved.  But
I think maybe code like that *ought* to be the domain of
implementation-specific extensions rather than scheme
itself.

Because I don't think that scheme ought to concern
itself overmuch with the underlying hardware representations,
I wouldn't like the specification of an exact floating
point representation to become part of the language
standard.  But I would like to be able to tell the
system what minimum precision I need and let it decide
what underlying representation it can use to most
economically and effectively meet that requirement.

It is, and ought to remain, an error for code to
*rely* on a particular roundoff or wraparound error
resulting from a hardware operation on a limited-precision
number, and therefore specifying an exact size rather
than a minimum size for inexact numbers is not &quot;the
right thing.&quot;

What I would *like* is to have a way to specify what
precision to use for inexact-number calculations in a
given (ideally dynamic, but given scheme's design more
properly lexical) scope.  I would like to be able to
say

(with-precision 512 220 expr)

in order to let the compiler know that if at least 512 bits
of mantissa and 220 bits of exponent are retained for inexact
calculations, expr (whether a single number, or a function
call) will not result in an intolerably erroneous result.
The system, if capable, may allocate and use inexact numbers
of that precision or higher, or evaluate the expr using only
exact numbers, or otherwise, must report a violation of an
implementation restriction.  And likewise, if I say

(with-precision 10 6 expr)

it would be a promise that 10 bits of mantissa and 6 of
exponent are enough to get results tolerable for my purposes
and the compiler could use 32-bit floats, or even 16-bit
floats of the suggested format, if the hardware and compiler
happen to support exactly that.  But if it happens to be
a martian architecture that uses words of 27 ternary trits
instead of 32 binary bits, that would be okay too as long
as it were capable of *at least* that precision.

In this system we wouldn't have to worry about comparisons
between inexact numbers of different precision, because
being in the same scope, all inexact numbers would have
the same precision.  But you could still use the precision
you actually need for your calculations and not have the
system wasting resources with too much precision where it's
not needed.  And it insulates code enough from the hardware
for future systems no matter how strange or unexpected, to
not be required to simulate the roundoff errors of older
systems nor use restricted representations where doing so
would slow them down.

That's what I'd like.  But is it reasonable to require it?
I dunno.  Maybe it's proper SRFI material, as long as
everything else under the sun in terms of numeric fixes is
being proposed.

				Bear




</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00088" href="msg00088.html">precise-numbers</a></strong>
<ul><li><em>From:</em> Aubrey Jaffer</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00046" href="msg00046.html">Re: infinities reformulated</a></strong>
<ul><li><em>From:</em> Chongkai Zhu</li></ul></li>
<li><strong><a name="00049" href="msg00049.html">Re: infinities reformulated</a></strong>
<ul><li><em>From:</em> Aubrey Jaffer</li></ul></li>
<li><strong><a name="00051" href="msg00051.html">Re: infinities reformulated</a></strong>
<ul><li><em>From:</em> Thomas Bushnell BSG</li></ul></li>
<li><strong><a name="00052" href="msg00052.html">Re: infinities reformulated</a></strong>
<ul><li><em>From:</em> Aubrey Jaffer</li></ul></li>
<li><strong><a name="00064" href="msg00064.html">Re: infinities reformulated</a></strong>
<ul><li><em>From:</em> bear</li></ul></li>
<li><strong><a name="00074" href="msg00074.html">Re: infinities reformulated</a></strong>
<ul><li><em>From:</em> Aubrey Jaffer</li></ul></li>
<li><strong><a name="00078" href="msg00078.html">Re: infinities reformulated</a></strong>
<ul><li><em>From:</em> bear</li></ul></li>
<li><strong><a name="00081" href="msg00081.html">Re: infinities reformulated</a></strong>
<ul><li><em>From:</em> Aubrey Jaffer</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00081.html">Re: infinities reformulated</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00083.html">Re: external representations</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00081.html">Re: infinities reformulated</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00088.html">precise-numbers</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00082"><strong>Date</strong></a></li>
<li><a href="threads.html#00082"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>

<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: More comments, and the ANTLR code is too complex -->
<!--X-From-R13: Oyna [nahry Uybevn <nyzxtybeNtznvy.pbz> -->
<!--X-Date: Thu, 13 Jun 2013 06:20:52 +0200 (MST) -->
<!--X-Message-Id: CAF+kUQUJy+x7zkJ=xuhKONY16S+W5QNKRqD2fyVHEGcAhKky7w@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: E1Ulprk&#45;0007Qy&#45;AB@rmm6prod02.runbox.com -->
<!--X-Reference: 87ehc7t7e9.fsf@tines.lan -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: More comments, and the ANTLR code is too complex</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00186.html">Date Prev</a>][<a href="msg00188.html">Date Next</a>][<a href="msg00186.html">Thread Prev</a>][<a href="msg00188.html">Thread Next</a>][<a href="maillist.html#00187">Date Index</a>][<a href="threads.html#00187">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: More comments, and the ANTLR code is too complex</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: Mark H Weaver &lt;<a href="mailto:mhw@DOMAIN.HIDDEN">mhw@xxxxxxxxxx</a>&gt;</li>
<li><em>Subject</em>: Re: More comments, and the ANTLR code is too complex</li>
<li><em>From</em>: Alan Manuel Gloria &lt;<a href="mailto:almkglor@DOMAIN.HIDDEN">almkglor@xxxxxxxxx</a>&gt;</li>
<li><em>Date</em>: Thu, 13 Jun 2013 12:14:44 +0800</li>
<li><em>Cc</em>: <a href="mailto:dwheeler@DOMAIN.HIDDEN">dwheeler@xxxxxxxxxxxx</a>, srfi-110 &lt;<a href="mailto:srfi-110@DOMAIN.HIDDEN">srfi-110@xxxxxxxxxxxxxxxxx</a>&gt;</li>
<li><em>Delivered-to</em>: <a href="mailto:srfi-110@DOMAIN.HIDDEN">srfi-110@xxxxxxxxxxxxxxxxx</a></li>
<li><em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed;        d=gmail.com; s=20120113;        h=mime-version:in-reply-to:references:date:message-id:subject:from:to         :cc:content-type;        bh=m7aT3PInHSXyMUD91irqDSKPyTbt4bX5r7GDMG6yH7Q=;        b=oCiCVF9SulRT7ZqbFplzlcM4ZrR5R353CGir1kSOdHC3x26V5yBYye4nMNQvPDSsbI         itcnzcS8AvIkSJf2PGPlZJBbODzmlZscQARsIacjRVgICO1OaAFOpKhDd6t5fnmKJthp         Yd5dTqbg0mQ+JFaApEFuLOWpwVho4DEpLNQ0ojmmJd3sHZ8vSn4pwx8wPz6RGjWsyus/         pQRWm6dj3ohWn2F+NPujrug19oMVCXy/qBGx/RNdNUk2vudcx4NSWkL0Uws8G2lXa8Kx         YVHPpjDI8wYpaH7Ts0bCAIeEovBcJZ2WeVp+YpSz+FG+dobgERd0MnMXWdsuWg/3kfjJ         mAhA==</li>
<li><em>In-reply-to</em>: &lt;<a href="mailto:87ehc7t7e9.fsf@DOMAIN.HIDDEN">87ehc7t7e9.fsf@xxxxxxxxx</a>&gt;</li>
<li><em>References</em>: &lt;<a href="mailto:E1Ulprk-0007Qy-AB@DOMAIN.HIDDEN">E1Ulprk-0007Qy-AB@xxxxxxxxxxxxxxxxxxxxx</a>&gt;	&lt;<a href="mailto:87ehc7t7e9.fsf@DOMAIN.HIDDEN">87ehc7t7e9.fsf@xxxxxxxxx</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>Thanks for the reply Mark!  We'll consider your suggestions.
Improving adoption for this syntax is an important goal for us; we
want others to at least try using it before judging the (de)merits of
the syntax, and having it implemented in a major Scheme implementation
(guile) would help tremendously.

Please wait a while, we'll think about how best to go about showing a
&quot;simple and easy way to add SRFI-110 on top of SRFI-105/random Scheme
implementation&quot;.

On 6/13/13, Mark H Weaver &lt;mhw@xxxxxxxxxx&gt; wrote:
&gt; Hi David,
&gt;
&gt; &quot;David A. Wheeler&quot; &lt;dwheeler@xxxxxxxxxxxx&gt; writes:
&gt;&gt; Below is a first shot at breaking up it_expr, currently 1 long rule, into
&gt;&gt; 2 rules.
&gt;&gt; This could obviously be repeated to make more rules, each one simpler.
&gt;&gt; Not saying it's done, but would it help to break the current longer rules
&gt;&gt; into more but smaller rules?
&gt;
&gt; No.  This doesn't help at all, because it doesn't reduce the total
&gt; complexity of the specification.  My concern is the amount of mental
&gt; effort required to understand the precise specification.
&gt;
&gt; Part of the problem is that your specification is actually an
&gt; _implementation_, which is made more complex by efficiency concerns.
&gt; For example, constraining yourself to an LL(1) grammar probably rules
&gt; out a more elegant presentation.
&gt;
&gt; Another big problem is the amount of redundancy in this grammar.  For
&gt; example, the pattern &quot;scomment hspace*&quot; is repeated in many places.
&gt; Sometimes it's a prefix wrapped in (...)*, and other times it's iterated
&gt; over by tail recursion.  The pattern &quot;COLLECTING hspace* collecting_tail
&gt; hspace*&quot; is also repeated in several places.  These redundancies make
&gt; more work for the reader, and make me wonder &quot;are all these actually the
&gt; same, or are there slight differences?&quot;
&gt;
&gt; I suspect that the key to simplifying this grammar (apart from moving
&gt; away from ANTLR for purposes of the specification) is to choose a
&gt; different set of non-terminals.
&gt;
&gt; Please take a look at section 7.1 of the R5RS (or the R7RS draft).
&gt; Understanding that grammar is almost effortless, and there's almost no
&gt; redundancy.  Now take a look at the specifications of SRFI-10, SRFI-30,
&gt; and SRFI-38.  All of them are expressed as a list of modifications to
&gt; the R5RS grammar.  That's the kind of thing I'd like to see in the
&gt; SRFI-110 specification.
&gt;
&gt; One more nit while I'm on this subject: In the BNF conventions section,
&gt; you write &quot;a sweet-expression reader MUST act as if it preprocessed its
&gt; input as follows&quot;, but as far as I can tell it's not actually possible
&gt; to implement this as a preprocessor.  This &quot;preprocessing&quot; must be
&gt; interleaved with parser, because several syntactic elements affect the
&gt; preprocessing.  For example, the &lt;* and *&gt; markers manipulate the
&gt; preprocessor's stack, and yet you need a full parser to recognize those
&gt; markers.  Also, if I understand correctly, indentation is only processed
&gt; outside of n-expressions.
&gt;
&gt; I also think that there needs to be a much simpler sample
&gt; implementation: one which does not attempt to be fully featured
&gt; (e.g. omit support for source location tracking), and which is not a
&gt; fully self-contained reader, but is instead expressed in terms of
&gt; existing procedures which are likely already present in an SRFI-105
&gt; reader (or which could be easily created from existing code).
&gt;
&gt; In other words, you should help implementors understand how to add
&gt; SRFI-110 to their existing readers with a minimal amount of code
&gt; changes.  The resulting code needs to be as simple as reasonably
&gt; possible.
&gt;
&gt; Here's one possible strategy: Assume the existence of an n-expression
&gt; reader.  Now write a t-expression reader in terms of it, in the most
&gt; elegant Scheme code possible.  It turns out this is not quite possible,
&gt; but hopefully the problems can be patched up by assuming the existence
&gt; of some other helpers, and/or by adding some functionality to the
&gt; n-expression reader.
&gt;
&gt; After our last email exchange, I spent some time thinking about this,
&gt; and identified a few additional things you might need:
&gt;
&gt; * In order to recognize the special markers, you'll need either (1) a
&gt;   way to &quot;unread&quot; characters, or (2) a way for the n-expression reader
&gt;   to tell you that e.g. the symbol '&lt;*' was &quot;by itself&quot; for purposes of
&gt;   SRFI-110.
&gt;
&gt; * You might need a helper to read special comments without consuming the
&gt;   following datum.
&gt;
&gt; I'm sorry that I cannot be more complete in my analysis of what needs to
&gt; be done, but my time (and motivation) is limited.  Reformulating this
&gt; code will be a lot of work, but I suspect that adoption will be very low
&gt; unless you can show implementors how to add SRFI-110 easily and with a
&gt; small amount of code.
&gt;
&gt;      Regards,
&gt;        Mark
&gt;
&gt;

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00183" href="msg00183.html">Re: More comments, and the ANTLR code is too complex</a></strong>
<ul><li><em>From:</em> David A. Wheeler</li></ul></li>
<li><strong><a name="00186" href="msg00186.html">Re: More comments, and the ANTLR code is too complex</a></strong>
<ul><li><em>From:</em> Mark H Weaver</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00186.html">Re: More comments, and the ANTLR code is too complex</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00188.html">Re: More comments, and the ANTLR code is too complex</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00186.html">Re: More comments, and the ANTLR code is too complex</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00188.html">Re: More comments, and the ANTLR code is too complex</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00187"><strong>Date</strong></a></li>
<li><a href="threads.html#00187"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>

<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: sweet&#45;expressions are not homoiconic -->
<!--X-From-R13: "Rnivq O. Iurryre" <qjurryreNqjurryre.pbz> -->
<!--X-Date: Fri, 24 May 2013 22:09:31 +0200 (MST) -->
<!--X-Message-Id: E1UfyIr&#45;0004yV&#45;UU@rmm6prod02.runbox.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 20895.34970.705488.399882@mooers.cs.grinnell.edu -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: sweet-expressions are not homoiconic</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00148.html">Date Prev</a>][<a href="msg00150.html">Date Next</a>][<a href="msg00148.html">Thread Prev</a>][<a href="msg00150.html">Thread Next</a>][<a href="maillist.html#00149">Date Index</a>][<a href="threads.html#00149">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: sweet-expressions are not homoiconic</h1>
<p style="max-width: 30em;">This page is part of the web mail archives of <a href="http://srfi.schemers.org/srfi-110">SRFI 110</a> from before July 7th, 2015.  The new archives for SRFI 110 are <a href="http://srfi-email.schemers.org/srfi-110/">here</a>.  Eventually, the entire history will be moved there, including any new messages.</p>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: &quot;stone&quot; &lt;<a href="mailto:stone@DOMAIN.HIDDEN">stone@xxxxxxxxxxxxxxx</a>&gt;</li>
<li><em>Subject</em>: Re: sweet-expressions are not homoiconic</li>
<li><em>From</em>: &quot;David A. Wheeler&quot; &lt;<a href="mailto:dwheeler@DOMAIN.HIDDEN">dwheeler@xxxxxxxxxxxx</a>&gt;</li>
<li><em>Date</em>: Fri, 24 May 2013 16:09:29 -0400 (EDT)</li>
<li><em>Cc</em>: &quot;srfi-110&quot; &lt;<a href="mailto:srfi-110@DOMAIN.HIDDEN">srfi-110@xxxxxxxxxxxxxxxxx</a>&gt;</li>
<li><em>Delivered-to</em>: <a href="mailto:srfi-110@DOMAIN.HIDDEN">srfi-110@xxxxxxxxxxxxxxxxx</a></li>
<li><em>In-reply-to</em>: &lt;<a href="mailto:20895.34970.705488.399882@DOMAIN.HIDDEN">20895.34970.705488.399882@xxxxxxxxxxxxxxxxxxxxxx</a>&gt;</li>
<li><em>Reply-to</em>: <a href="mailto:dwheeler@DOMAIN.HIDDEN">dwheeler@xxxxxxxxxxxx</a></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>John David Stone:
&gt;  @         From the beginning, there was an obvious impediment to the use of
&gt;  @ sweet-expressions: ...  Whitespace characters
&gt;  @ don't look like grouping symbols, as parentheses, brackets, braces, or
&gt;  @ oriented quotation marks do, because they don't have appropriate shapes and
&gt;  @ don't come in pairs.  Moreover, they don't visibly nest, so it is unnatural
&gt;  @ to use them to represent recursively defined syntactic structures.

I replied:
&gt;  &gt; This is demonstrably false.  Whitespace characters, in the form of indentation,
&gt;  &gt; are CURRENTLY used to group structures in pretty much all non-trivial
&gt;  &gt; Lisp programs.  People routinely use pretty-printers *specifically* to
&gt;  &gt; group and nest structures.  In fact, indentation is used
&gt;  &gt; to indicate nesting in practically every programming language.

John David Stone:
&gt;         No, it's not.  It's used to manage layout, which is one of its
&gt; principal purposes in traditional manuscripts and typography.

But that's the point.  Programmers ALREADY use layout to reveal programming
structure, even in languages where there's no syntactic need to do so.
Since people ALREADY do this, let's take advantage of it.

This may require changes in a few cases, because layout was ignored before.
But it also means that there's no longer a risk of layout misleading the developer.
And in practice, it doesn't seem to require much in the way of change at all.

&gt;  Very few
&gt; programming languages try to use it for grouping -- the ones that I recall
&gt; offhand are Python and ABC, but I imagine that there are others.

Python doesn't just &quot;try&quot;, it DOES use indentation for grouping.
Python all by itself is WAY more popular than Scheme or Common Lisp, too,
so clearly using indentation does not impede widespread use.

Other languages that consider indentation in some way include
Haskell, Occam, and Icon.  Adding ABC means that there are
quite a number, and in particular, it's a *substantial* portion of the
more recently-developed languages that don't try to closely imitate C syntax.

&gt; Those languages get into slightly less trouble with the idea because programs in
&gt; those languages don't use nesting quite as extensively -- the program
&gt; structures tend to have shallower hierarchies and more flat constructions
&gt; analogous to sequences in Scheme.

I don't think they get in trouble at all, whether they are nested or not.


&gt;  But it is also true that Python programs
&gt; are more difficult to read and to edit than they would have been if the
&gt; designer had chosen to use explicit grouping symbols.

You're free to believe that, but I think you're quite wrong.


&gt; This confusion between layout and grouping is really the crux of
&gt; the issue.

It's not a confusion.  It's an intentional use of layout for grouping.


&gt;  The reason that the parenthesis notation is better is that it
&gt; separates these two functions, which both affect readability, but in
&gt; different ways.  Using whitespace for _layout_ is, of course, a good idea,
&gt; and almost all programmers and programming languages support it.  Using
&gt; whitespace for _grouping_ is not such a good idea and doesn't work well
&gt; when the groups are deeply nested, as they are in most Scheme code.

We already have 2 programs written using sweet-expressions in Lisp,
which is strong evidence *against* the claim that using
whitespace for grouping doesn't work for Scheme.

It's true that Scheme and Common Lisp tend to be more nested.
But that's trivially solved - just make the default indentation width smaller.
For example, both Alan and I use a default indentation of 2 chars
(instead of 4 or 8).  Even if you indent sometimes longer
(e.g., indent by 3 chars after &quot;if&quot; so the condition and branches align),
that gives you *plenty* of horizontal spacing for deep nesting.
If you have a long sequence in a deep nesting, just
use &quot;!&quot; to visually show the alignment.  Problem solved.

I *do* completely agree with you that using indentation as the SOLE
mechanism for grouping is a bad idea. But we retain parens.
In practice, indentation works well for the big picture, and parens work
well for the leaves.

&gt;         Layout and grouping clearly diverge in the conventions that most
&gt; Scheme programmers follow.  For instance, in let-expressions, the binding
&gt; specification list and the body are indented differently, even though they
&gt; are at the same level as far as syntactic grouping is concerned; this
&gt; difference reflects the semantic difference between the syntactic
&gt; constituents.

The binding spec list and body would typically be shown differently
in sweet-expressions, too.  

In sweet-expressions, short binding specs can be surrounded by &lt;*...*&gt;, e.g.:
let &lt;* binding-spec... *&gt;
! body

Long binding specs can use group, e.g.:
let
! \\
! ! binding-specs....
! body...

In both cases, the binding specs and body are distinct.
And even in cases where the &quot;obvious&quot;
indentation would be different, that is no tragedy.
The goal was to create a notation that people can read,
not to prevent change.

&gt;         Another example:  In procedure calls that extend over several
&gt; lines, the first operand may be indented differently from the others if it
&gt; is semantically related to the operator in a way that differs significantly
&gt; from the other operands (e.g., if the procedure is vector-set!, the vector
&gt; operand is often indented differently from the index and new-value
&gt; operands).

You can have differing indentation by either just continuing it on the line
or by using &quot;\\&quot;.

Example of the first approach (which is what I'd do if it's long):
vector-set! vec
! 1
!  '(&quot;Sue&quot; &quot;Sue&quot;)

Example of the second approach (which I would normally only use with
keywords, but maybe you'll prefer it):
vector-set!
! vec
! \\ 1
! \\ '(&quot;Sue&quot; &quot;Sue&quot;)


&gt;         John Cowan has pointed out that _uniformly_ using whitespace for
&gt; grouping would produce programs that make excessive use of vertical space.
&gt; This is obviously the case, and it demonstrates that the need to use
&gt; whitespace for layout effectively contrains and complicates the use of
&gt; whitespace for grouping, leading almost inevitably to the use of marker
&gt; characters as syntactic guideposts.

Said another way: &quot;Naively having only whitespace for grouping would
make excessive use of vertical space&quot;.  True, but we weren't naive.
We added a few additional markers to make the use of the notation
*pleasant* and *convenient*, and added them after trying out the
notation in real programs to see where the notation most needed help.

You seeming to complain about the use of a few markers as abbreviations,
but Lisp *ALREADY* includes some conventional abbreviations.
Do you ever write 'x instead of (quote x)?
Do you write (a b c) instead of (a . (b . (c. '())))?
I bet you do.  That's because _uniformly_ using dotted notation without
abbreviations would make excessive use of space (to paraphrase).
It should be unsurprising that indentation processing would create pressure
to add more markers, such as to counter excessive use of vertical space.
There aren't many, and each one is general and powerful.

--- David A. Wheeler

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00150" href="msg00150.html">Re: sweet-expressions are not homoiconic</a></strong>
<ul><li><em>From:</em> John David Stone</li></ul></li>
<li><strong><a name="00160" href="msg00160.html">Re: sweet-expressions are not homoiconic</a></strong>
<ul><li><em>From:</em> Beni Cherniavsky-Paskin</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00147" href="msg00147.html">Re: sweet-expressions are not homoiconic</a></strong>
<ul><li><em>From:</em> John David Stone</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00148.html">Re: sweet-expressions are not homoiconic</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00150.html">Re: sweet-expressions are not homoiconic</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00148.html">Re: sweet-expressions are not homoiconic</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00150.html">Re: sweet-expressions are not homoiconic</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00149"><strong>Date</strong></a></li>
<li><a href="threads.html#00149"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>

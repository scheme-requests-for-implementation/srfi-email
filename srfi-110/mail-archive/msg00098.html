<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: Another code sample &#45; symbolic derivatives -->
<!--X-From-R13: Oyna [nahry Uybevn <nyzxtybeNtznvy.pbz> -->
<!--X-Date: Tue,  9 Apr 2013 15:17:03 +0200 (MST) -->
<!--X-Message-Id: CAF+kUQVwTKkAQdQ&#45;2tzwx34QRW1=ExzZ0TjhQsSdMQkAr=nxHA@mail.gmail.com -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: E1UPOkb&#45;0002Mc&#45;Iv@rmm6prod02.runbox.com -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: Another code sample - symbolic derivatives</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00097.html">Date Prev</a>][<a href="msg00099.html">Date Next</a>][<a href="msg00097.html">Thread Prev</a>][<a href="msg00099.html">Thread Next</a>][<a href="maillist.html#00098">Date Index</a>][<a href="threads.html#00098">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: Another code sample - symbolic derivatives</h1>
<p style="max-width: 30em;">This page is part of the web mail archives of <a href="http://srfi.schemers.org/srfi-110">SRFI 110</a> from before July 7th, 2015.  The <a href="http://srfi-email.schemers.org/srfi-110">new archives</a> for SRFI 110 contain all messages, not just those from before July 7th, 2015.</p>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: &quot;David A. Wheeler&quot; &lt;<a href="mailto:dwheeler@DOMAIN.HIDDEN">dwheeler@xxxxxxxxxxxx</a>&gt;</li>
<li><em>Subject</em>: Re: Another code sample - symbolic derivatives</li>
<li><em>From</em>: Alan Manuel Gloria &lt;<a href="mailto:almkglor@DOMAIN.HIDDEN">almkglor@xxxxxxxxx</a>&gt;</li>
<li><em>Date</em>: Tue, 9 Apr 2013 21:16:59 +0800</li>
<li><em>Cc</em>: srfi-110 &lt;<a href="mailto:srfi-110@DOMAIN.HIDDEN">srfi-110@xxxxxxxxxxxxxxxxx</a>&gt;</li>
<li><em>Delivered-to</em>: <a href="mailto:srfi-110@DOMAIN.HIDDEN">srfi-110@xxxxxxxxxxxxxxxxx</a></li>
<li><em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed;        d=gmail.com; s=20120113;        h=mime-version:x-received:in-reply-to:references:date:message-id         :subject:from:to:cc:content-type;        bh=UCtoMPxloBkeI+Pu+KwNe0Rg7bI2wmougUjbZBDwNLs=;        b=xE+tt9BsIuIZG4DnCjSUJ3/DDwjqeJsUPOY+CzIjI4UAHFglcy/Jhua4mEXmqGd0hl         qdZbJ60jdfGRpTPlqQ6NA1cxLuN/VtLaxfbb7z4gwBTZvCx+C9+z9OR+2WNbeTE+Jthq         NuuvrCx5RN8hZUOyJrBV7+W7h7mDpuQzzA/o2RPaojqBTnm7aqpZSrie5MhqiMgpWTlT         7E+6Dm8n0uzeYzWdzI6jJjNiVvTEH8IcW/n9mAMJTesdc9fZw4zfVh+5s4Lyez9ba+Fw         lNdE2KJYZ6iKad1K1kol/v/XQpj52k+VZku/vN2q4yf77D4Y4mEfP0/R4sr4c1Mh0OVD         5RGQ==</li>
<li><em>In-reply-to</em>: &lt;<a href="mailto:E1UPOkb-0002Mc-Iv@DOMAIN.HIDDEN">E1UPOkb-0002Mc-Iv@xxxxxxxxxxxxxxxxxxxxx</a>&gt;</li>
<li><em>References</em>: &lt;<a href="mailto:E1UPOkb-0002Mc-Iv@DOMAIN.HIDDEN">E1UPOkb-0002Mc-Iv@xxxxxxxxxxxxxxxxxxxxx</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<div dir="ltr"><br><div class="gmail_extra"><br><br><div class="gmail_quote">On Tue, Apr 9, 2013 at 10:57 AM, David A. Wheeler <span dir="ltr">&lt;<a rel="nofollow" href="mailto:dwheeler@xxxxxxxxxxxx" target="_blank">dwheeler@xxxxxxxxxxxx</a>&gt;</span> wrote:<br>
<blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex">Here&#39;s a version of the &quot;Wizard book&quot; symbolic derivative calculation, using sweet-expressions.<br>
I&#39;ve placed it below and put it in an attachment.<br>
<br>
Unsurprisingly, sweet-_expression_&#39;s ability to accept infix makes infix expressions nicer. E.G.:<br>
deriv &#39;{{x * y} * {x + 3}} &#39;x<br>
<br>
My goal of working out examples like this is to see if there are any serious problems with the sweet-_expression_ notation. &#xA0;I don&#39;t see any problems with the notation in this case. &#xA0;Granted, this has a bunch of especially short and simple definitions, but I don&#39;t see any sign of trouble.<br>

<br>
Comments?<br>
<br>
<br>
&#xA0;--- David A. Wheeler<br>
<br>
<br>
#!/usr/bin/env sweet-run<br>
;#!guile -s<br>
;!#<br>
<br>
<br>
; Code to generate derivatives from the &quot;Wizard Book&quot; -<br>
; Hal Abelson&#39;s, Jerry Sussman&#39;s and Julie Sussman&#39;s<br>
; &quot;Structure and Interpretation of Computer Programs&quot;<br>
; (MIT Press, 1984; ISBN 0-262-01077-1),<br>
; <a rel="nofollow" href="http://mitpress.mit.edu/sicp/full-text/sicp/book/node39.html" target="_blank">http://mitpress.mit.edu/sicp/full-text/sicp/book/node39.html</a><br>
; <a rel="nofollow" href="http://mitpress.mit.edu/sicp/code/index.html" target="_blank">http://mitpress.mit.edu/sicp/code/index.html</a><br>
;;; SECTION 2.3.2<br>
<br>
<br>
<br>
define deriv(exp var)<br>
&#xA0; cond<br>
&#xA0; &#xA0; number?(exp) 0<br>
&#xA0; &#xA0; variable?(exp)<br>
&#xA0; &#xA0; &#xA0; if same-variable?(exp var) 1 0<br>
&#xA0; &#xA0; sum?(exp)<br>
&#xA0; &#xA0; &#xA0; make-sum deriv(addend(exp) var) deriv(augend(exp) var)<br>
&#xA0; &#xA0; product?(exp)<br>
&#xA0; &#xA0; &#xA0; make-sum<br>
&#xA0; &#xA0; &#xA0; &#xA0; make-product multiplier(exp) deriv(multiplicand(exp) var)<br>
&#xA0; &#xA0; &#xA0; &#xA0; make-product deriv(multiplier(exp) var) multiplicand(exp)<br>
&#xA0; &#xA0; else error(&quot;unknown _expression_ type -- DERIV&quot; exp)<br>
<br>
;; representing algebraic expressions<br>
<br>
define variable?(x) symbol?(x)<br>
<br>
define same-variable?(v1 v2)<br>
&#xA0; {variable?(v1) and variable?(v2) and eq?(v1 v2)}<br></blockquote><div><br></div><div>I&#39;d rather:<br><br></div><div>define {v1 same-variable? v2}<br></div><div>&#xA0; {variable?(v1) and variable?(v2) and {v1 eq? v2}}<br>
</div><div>&#xA0;</div><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex">
<br>
define sum?(x)<br>
&#xA0; {pair?(x) and eq?(car(x) &#39;+)}<br>
<br>
define addend(s) cadr(s)<br>
<br>
define augend(s) caddr(s)<br>
<br>
define product?(x)<br>
&#xA0; {pair?(x) and eq?(car(x) &#39;*)}<br>
<br>
define multiplier(p) cadr(p)<br>
<br>
define multiplicand(p) caddr(p)<br>
<br>
<br>
;; Simplification<br>
<br>
define make-sum(a1 a2)<br>
&#xA0; cond<br>
&#xA0; &#xA0; =number?(a1 0) a2<br>
&#xA0; &#xA0; =number?(a2 0) a1<br>
&#xA0; &#xA0; {number?(a1) and number?(a2)} {a1 + a2}<br>
&#xA0; &#xA0; else list(&#39;+ a1 a2)<br></blockquote><div><br></div><div>Every binary predicate is a good place to use { } on:<br><br></div><div>define make-sum(a1 a2) $ cond<br></div><div>&#xA0; {a1 =number? 0} $ a2<br></div><div>&#xA0; {a2 =number? 0} $ a1<br>
</div><div>&#xA0; {number?(a1) and number?(a2)} $ {a1 + a2}<br></div><div>&#xA0; else $ `{,a1 + ,a2}<br></div><div><br></div><div>... and so on...<br><br></div></div><br></div></div>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00095" href="msg00095.html">Another code sample - symbolic derivatives</a></strong>
<ul><li><em>From:</em> David A. Wheeler</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00097.html">Re: Another code sample - symbolic derivatives</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00099.html">Should we MAY a &quot;curly-write&quot; and &quot;neoteric-write&quot;?  Or even &quot;sweet-write&quot;?</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00097.html">Re: Another code sample - symbolic derivatives</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00099.html">Should we MAY a &quot;curly-write&quot; and &quot;neoteric-write&quot;?  Or even &quot;sweet-write&quot;?</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00098"><strong>Date</strong></a></li>
<li><a href="threads.html#00098"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>

<!-- MHonArc v2.6.15 -->
<!--X-Subject: Re: put library <body> at top&#45;level -->
<!--X-From-R13: "Penqq I. Embalr" <oenqq+fesvNfmbalr.pbz> -->
<!--X-Date: Sat,  3 Dec 2005 17:16:06 +0100 (CET) -->
<!--X-Message-Id: y9lwtimgnru.fsf@informatik.uni&#45;tuebingen.de -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 438E0CA1.5020406@bothner.com -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: put library &lt;body&gt; at top-level</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00036.html">Date Prev</a>][<a href="msg00038.html">Date Next</a>][<a href="msg00040.html">Thread Prev</a>][<a href="msg00012.html">Thread Next</a>][<a href="maillist.html#00037">Date Index</a>][<a href="threads.html#00037">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: put library &lt;body&gt; at top-level</h1>
<p style="max-width: 30em;">This page is part of the web mail archives of <a href="http://srfi.schemers.org/srfi-83">SRFI 83</a> from before July 7th, 2015.  The new archives for SRFI 83 are <a href="http://srfi-email.schemers.org/srfi-83/">here</a>.  Eventually, the entire history will be moved there, including any new messages.</p>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: <a href="mailto:srfi-83@DOMAIN.HIDDEN">srfi-83@xxxxxxxxxxxxxxxxx</a></li>
<li><em>Subject</em>: Re: put library &lt;body&gt; at top-level</li>
<li><em>From</em>: &quot;Bradd W. Szonye&quot; &lt;<a href="mailto:bradd%2Bsrfi@DOMAIN.HIDDEN">bradd+srfi@xxxxxxxxxx</a>&gt;</li>
<li><em>Date</em>: Thu, 1 Dec 2005 10:15:54 -0800</li>
<li><em>Delivered-to</em>: <a href="mailto:srfi-83@DOMAIN.HIDDEN">srfi-83@xxxxxxxxxxxxxxxxx</a></li>
<li><em>In-reply-to</em>: &lt;<a href="mailto:438E0CA1.5020406@DOMAIN.HIDDEN">438E0CA1.5020406@xxxxxxxxxxx</a>&gt;</li>
<li><em>Mail-followup-to</em>: <a href="mailto:srfi-83@DOMAIN.HIDDEN">srfi-83@xxxxxxxxxxxxxxxxx</a></li>
<li><em>References</em>: &lt;<a href="mailto:438E0CA1.5020406@DOMAIN.HIDDEN">438E0CA1.5020406@xxxxxxxxxxx</a>&gt;</li>
<li><em>User-agent</em>: Gnus/5.110003 (No Gnus v0.3) XEmacs/21.5-b21 (darwin)</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>Per Bothner wrote:
&gt; I don't see any rationale for:
&gt; 
&gt; (library &lt;lib-path&gt; &lt;language&gt;
&gt;      &lt;body&gt;)
&gt; 
&gt; rather than identitying a library with a file, as in:
&gt; 
&gt; (library &lt;lib-path&gt; &lt;language&gt;)
&gt; &lt;body&gt;
&gt; 
&gt; The former is syntactically awkward ....

I've used the first (&quot;scoped&quot;) syntax, for MzScheme's module system. I
did find it useful for experimenting with library code -- learning how
the system works, prototyping libraries, that sort of thing -- because
it allowed me to test overall system structure in a single small file.
However, it quickly became annoying when I expanded the code, largely
because Vim's syntax highlighting and auto-indenting don't handle
massive indented scopes well.

For performance reasons, Vim's syntax tools depend on &quot;synchronization
points,&quot; places in the code where you can /lexically/ determine scope.
That works well for most languages in the LISP and Algol families,
because major functions and comments are usually both (1) unindented and
(2) in the outermost scope. Placing entire libraries inside a syntactic
scope defeats this feature, which means that Vim must analyze the whole
library (awful performance) or get out of sync with the code (awful
highlighting and indenting). It's especially bad if you need to insert
code in the middle of an existing scope.

In the past, I've dealt with this by leaving the library code
unindented, as if it were the top level, but then the indenter gets
confused near the start of the library (because it wants to indent the
library &quot;properly&quot;).

So while I see some advantages to an explicit scope/grouping syntax for
library code, it causes major annoyances when using my everyday tools on
realistically-sized projects.
-- 
Bradd W. Szonye
<a  rel="nofollow" href="http://www.szonye.com/bradd">http://www.szonye.com/bradd</a>

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00002" href="msg00002.html">put library &lt;body&gt; at top-level</a></strong>
<ul><li><em>From:</em> Per Bothner</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00036.html">Re: Questions, loose ends, misprints, etc.</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00038.html">Re: put library &lt;body&gt; at top-level</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00040.html">Re: import suggestion</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00012.html">Overuse of strings</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00037"><strong>Date</strong></a></li>
<li><a href="threads.html#00037"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>

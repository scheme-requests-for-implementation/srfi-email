<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: LAST CALL for SRFI&#45;113, Sets and bags -->
<!--X-From-R13: Xbua Qbjna <pbjnaNzrephel.ppvy.bet> -->
<!--X-Date: Thu, 21 Aug 2014 13:46:15 +0000 (UTC) -->
<!--X-Message-Id: 20140821134606.GB25457@mercury.ccil.org -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 20140819002557.GB19499@mercury.ccil.org -->
<!--X-Reference: CAD2CXeutqvsuxNv+PYqgN7&#45;HUi8cbHdGFSmU=EkHJ3iXDJYOXA@mail.gmail.com -->
<!--X-Reference: 20140819181852.GF15730@mercury.ccil.org -->
<!--X-Reference: CAD2CXevTPC+Cv10cebEOEh0wx8ZxZQ0kV49UxWaHtbAi2VH8FQ@mail.gmail.com -->
<!--X-Reference: 20140819222010.GP15730@mercury.ccil.org -->
<!--X-Reference: CAD2CXes=CHQyeo=cSos+_7L9AX20m2t5GbUcKgD4qF41TtonEA@mail.gmail.com -->
<!--X-Reference: 20140820132835.GA25385@mercury.ccil.org -->
<!--X-Reference: CAD2CXesu0h+RGJdg3SD1veiwQ99QBCi3xe4Vz8uSXc0wqCJeew@mail.gmail.com -->
<!--X-Reference: 20140820213117.GJ8778@mercury.ccil.org -->
<!--X-Reference: CAD2CXesKzk=JH7qULg1H_b2wFT3qTUwQKsB3o7BjwG2JxqSHWg@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: LAST CALL for SRFI-113, Sets and bags</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00088.html">Date Prev</a>][<a href="msg00090.html">Date Next</a>][<a href="msg00088.html">Thread Prev</a>][<a href="msg00090.html">Thread Next</a>][<a href="maillist.html#00089">Date Index</a>][<a href="threads.html#00089">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: LAST CALL for SRFI-113, Sets and bags</h1>
<p style="max-width: 30em;">This page is part of the web mail archives of <a href="http://srfi.schemers.org/srfi-113">SRFI 113</a> from before July 7th, 2015.  The <a href="http://srfi-email.schemers.org/srfi-113">new archives</a> for SRFI 113 contain all messages, not just those from before July 7th, 2015.</p>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: Kevin Wortman &lt;<a href="mailto:kwortman@DOMAIN.HIDDEN">kwortman@xxxxxxxxx</a>&gt;</li>
<li><em>Subject</em>: Re: LAST CALL for SRFI-113, Sets and bags</li>
<li><em>From</em>: John Cowan &lt;<a href="mailto:cowan@DOMAIN.HIDDEN">cowan@xxxxxxxxxxxxxxxx</a>&gt;</li>
<li><em>Date</em>: Thu, 21 Aug 2014 09:46:06 -0400</li>
<li><em>Cc</em>: Per Bothner &lt;<a href="mailto:per@DOMAIN.HIDDEN">per@xxxxxxxxxxx</a>&gt;, <a href="mailto:srfi-113@DOMAIN.HIDDEN">srfi-113@xxxxxxxxxxxxxxxxx</a></li>
<li><em>Delivered-to</em>: <a href="mailto:srfi-113@DOMAIN.HIDDEN">srfi-113@xxxxxxxxxxxxxxxxx</a></li>
<li><em>In-reply-to</em>: &lt;CAD2CXesKzk=JH7qULg1H_b2wFT3qTUwQKsB3o7BjwG2JxqSHWg@mail.gmail.com&gt;</li>
<li><em>References</em>: &lt;<a href="msg00078.html">20140819002557.GB19499@mercury.ccil.org</a>&gt; &lt;CAD2CXeutqvsuxNv+PYqgN7-HUi8cbHdGFSmU=EkHJ3iXDJYOXA@mail.gmail.com&gt; &lt;<a href="msg00081.html">20140819181852.GF15730@mercury.ccil.org</a>&gt; &lt;<a href="msg00082.html">CAD2CXevTPC+Cv10cebEOEh0wx8ZxZQ0kV49UxWaHtbAi2VH8FQ@mail.gmail.com</a>&gt; &lt;<a href="msg00083.html">20140819222010.GP15730@mercury.ccil.org</a>&gt; &lt;CAD2CXes=CHQyeo=cSos+_7L9AX20m2t5GbUcKgD4qF41TtonEA@mail.gmail.com&gt; &lt;<a href="msg00085.html">20140820132835.GA25385@mercury.ccil.org</a>&gt; &lt;<a href="msg00086.html">CAD2CXesu0h+RGJdg3SD1veiwQ99QBCi3xe4Vz8uSXc0wqCJeew@mail.gmail.com</a>&gt; &lt;<a href="msg00087.html">20140820213117.GJ8778@mercury.ccil.org</a>&gt; &lt;CAD2CXesKzk=JH7qULg1H_b2wFT3qTUwQKsB3o7BjwG2JxqSHWg@mail.gmail.com&gt;</li>
<li><em>Sender</em>: John Cowan &lt;<a href="mailto:cowan@DOMAIN.HIDDEN">cowan@xxxxxxxx</a>&gt;</li>
<li><em>User-agent</em>: Mutt/1.5.20 (2009-06-14)</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>Kevin Wortman scripsit:

&gt; (define (cartesian left right)
&gt;   (set-fold (lambda (a tuples)
&gt;                 (set-fold (lambda (b tuples)
&gt;                               (cons (list a b) tuples))
&gt;                             tuples
&gt;                             right))
&gt;                '()
&gt;                left))

Yes, nested folds will work up to the number of folds you nest, but not
for arbitrarily many sets.  It's like arrays: if there is a limit of N
dimensions, then N nested loops will suffice to process the elements,
but without a limit you need to use an external iterator.

Unfortunately, there is no natural external iterator for sets.  Call/cc
will let you create them, but lists can be externally iterated naturally.
I don't quite see the algo yet, but I feel that it's out there (like
the truth).

Of course, you can also create the products two at a time, merging as you
go, but you end up needing O(log k * n) space or worse, where k is the
number of sets provided.  This can thrash GC if the sets are large.

&gt;   (define (powerset list)
&gt;     (fold (lambda (x subsets)
&gt;         (append subsets
&gt;             (map (cute cons x &lt;&gt;) subsets)))
&gt;       '(())
&gt;       list))

Nice!  Thanks.

&gt; One question here, is whether the returned value should be a list of sets,
&gt; or a set of sets. Mathematically a power set is a set of sets, but
&gt; constructing a list of sets is cheaper.

Good question.  I'll think about that one further.

-- 
John Cowan          <a  rel="nofollow" href="http://www.ccil.org/~cowan">http://www.ccil.org/~cowan</a>        cowan@xxxxxxxx
One of the oil men in heaven started a rumor of a gusher down in hell.  All
the other oil men left in a hurry for hell.  As he gets to thinking about
the rumor he had started he says to himself there might be something in
it after all.  So he leaves for hell in a hurry.    --Carl Sandburg

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00090" href="msg00090.html">Re: LAST CALL for SRFI-113, Sets and bags</a></strong>
<ul><li><em>From:</em> Kevin Wortman</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00078" href="msg00078.html">Re: LAST CALL for SRFI-113, Sets and bags</a></strong>
<ul><li><em>From:</em> John Cowan</li></ul></li>
<li><strong><a name="00080" href="msg00080.html">Re: LAST CALL for SRFI-113, Sets and bags</a></strong>
<ul><li><em>From:</em> Kevin Wortman</li></ul></li>
<li><strong><a name="00081" href="msg00081.html">Re: LAST CALL for SRFI-113, Sets and bags</a></strong>
<ul><li><em>From:</em> John Cowan</li></ul></li>
<li><strong><a name="00082" href="msg00082.html">Re: LAST CALL for SRFI-113, Sets and bags</a></strong>
<ul><li><em>From:</em> Kevin Wortman</li></ul></li>
<li><strong><a name="00083" href="msg00083.html">Re: LAST CALL for SRFI-113, Sets and bags</a></strong>
<ul><li><em>From:</em> John Cowan</li></ul></li>
<li><strong><a name="00084" href="msg00084.html">Re: LAST CALL for SRFI-113, Sets and bags</a></strong>
<ul><li><em>From:</em> Kevin Wortman</li></ul></li>
<li><strong><a name="00085" href="msg00085.html">Re: LAST CALL for SRFI-113, Sets and bags</a></strong>
<ul><li><em>From:</em> John Cowan</li></ul></li>
<li><strong><a name="00086" href="msg00086.html">Re: LAST CALL for SRFI-113, Sets and bags</a></strong>
<ul><li><em>From:</em> Kevin Wortman</li></ul></li>
<li><strong><a name="00087" href="msg00087.html">Re: LAST CALL for SRFI-113, Sets and bags</a></strong>
<ul><li><em>From:</em> John Cowan</li></ul></li>
<li><strong><a name="00088" href="msg00088.html">Re: LAST CALL for SRFI-113, Sets and bags</a></strong>
<ul><li><em>From:</em> Kevin Wortman</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00088.html">Re: LAST CALL for SRFI-113, Sets and bags</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00090.html">Re: LAST CALL for SRFI-113, Sets and bags</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00088.html">Re: LAST CALL for SRFI-113, Sets and bags</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00090.html">Re: LAST CALL for SRFI-113, Sets and bags</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00089"><strong>Date</strong></a></li>
<li><a href="threads.html#00089"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>

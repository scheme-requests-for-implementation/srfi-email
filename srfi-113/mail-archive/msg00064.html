<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: handling duplicate elements -->
<!--X-From-R13: Yriva Ibegzna <xjbegznaNtznvy.pbz> -->
<!--X-Date: Thu, 10 Jul 2014 21:30:19 +0000 (UTC) -->
<!--X-Message-Id: CAD2CXevj9uuXhNaxg11G_kZWqvOt379avS19Jd6=KnHhM&#45;YVzA@mail.gmail.com -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: CAD2CXevyaBF2kj&#45;KhTMn=_3VY=kL1OkUXSiCjn_=QDZ&#45;_12XgA@mail.gmail.com -->
<!--X-Reference: 20140702175522.GE21298@mercury.ccil.org -->
<!--X-Reference: CAD2CXettxqQpNMR6Pdhja0XxSGCDFijjt7ASW&#45;U7++Redg7WVQ@mail.gmail.com -->
<!--X-Reference: 20140707040059.GB19735@mercury.ccil.org -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: handling duplicate elements</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00063.html">Date Prev</a>][<a href="msg00065.html">Date Next</a>][<a href="msg00063.html">Thread Prev</a>][<a href="msg00065.html">Thread Next</a>][<a href="maillist.html#00064">Date Index</a>][<a href="threads.html#00064">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: handling duplicate elements</h1>
<p style="max-width: 30em;">This page is part of the web mail archives of <a href="http://srfi.schemers.org/srfi-113">SRFI 113</a> from before July 7th, 2015.  The <a href="http://srfi-email.schemers.org/srfi-113">new archives</a> for SRFI 113 contain all messages, not just those from before July 7th, 2015.</p>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: John Cowan &lt;<a href="mailto:cowan@DOMAIN.HIDDEN">cowan@xxxxxxxxxxxxxxxx</a>&gt;</li>
<li><em>Subject</em>: Re: handling duplicate elements</li>
<li><em>From</em>: Kevin Wortman &lt;<a href="mailto:kwortman@DOMAIN.HIDDEN">kwortman@xxxxxxxxx</a>&gt;</li>
<li><em>Date</em>: Thu, 10 Jul 2014 14:29:58 -0700</li>
<li><em>Cc</em>: <a href="mailto:srfi-113@DOMAIN.HIDDEN">srfi-113@xxxxxxxxxxxxxxxxx</a></li>
<li><em>Delivered-to</em>: <a href="mailto:srfi-113@DOMAIN.HIDDEN">srfi-113@xxxxxxxxxxxxxxxxx</a></li>
<li><em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed;        d=gmail.com; s=20120113;        h=mime-version:in-reply-to:references:from:date:message-id:subject:to         :cc:content-type;        bh=IWZW+3gr1AAWVhS87Po19K7MQCTpB8QTJNvd4gAMN9Y=;        b=pt2U1aNLeN5EVIB9MGxRAfCTkPcBDInXSIKdPIEhi2BIIU6sOzWw9H6uZOwowTPUgJ         UXTMoZWOU6TkweNzU9K1WtbqGhIj0SVn7Subl3PJTzYAp9AvZlEmb0DJKqF1tifztGMf         oTh8PW9QoVXggqu+ZXXLB8BAsFWmAl456hg8pNmbM7zji6e9kA8FQjw/YWJiFhpximOK         NMMNk6znsSQwJ3cfEiZqUVWPydQS61s2lnNsd5BSf2eFuqtGC0uCshPXmN9quSPN3rwD         nva8l7Q9IxlvvxoniuH8YqaK/wZ9ewivaIcL51F2XFR609D5z74KgELeDDwKErdKfJoa         wkuw==</li>
<li><em>In-reply-to</em>: &lt;<a href="msg00063.html">20140707040059.GB19735@mercury.ccil.org</a>&gt;</li>
<li><em>References</em>: &lt;CAD2CXevyaBF2kj-KhTMn=_3VY=kL1OkUXSiCjn_=QDZ-_12XgA@mail.gmail.com&gt; &lt;<a href="msg00061.html">20140702175522.GE21298@mercury.ccil.org</a>&gt; &lt;<a href="msg00062.html">CAD2CXettxqQpNMR6Pdhja0XxSGCDFijjt7ASW-U7++Redg7WVQ@mail.gmail.com</a>&gt; &lt;<a href="msg00063.html">20140707040059.GB19735@mercury.ccil.org</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<div dir="ltr"><br><div class="gmail_extra"><div class="gmail_quote"><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"><div>

</div>Excellent. &#xA0;Since SRFI 113 is now defined to provide linear update in<br>
the sense of SRFI 1, it&#39;s sufficient to have the same interface with<br>
the exception of the linear-update procedures, all of which end in !.<br>
In addition, however, there should be order-specific procedures like<br>
getting the next and previous elements in a set, and something to<br>
convert a persistent set to a transient one. &#xA0;IIRC your proposal has<br>
these already. &#xA0;You should check the Haskell libraries to see if anything<br>
else is missing.<br></blockquote><div><br></div><div>Yes, the plan is to start with SRFI 113, drop all procedures ending in !, and add predecessor, successor, min, max, and range queries since those are fast operations in binary search trees. Also, construction from a list in strict increasing order, since that can be O(n), versus construction from an arbitrary list which is O(n log n) with a lot of GC churn.<br>


<br></div><div>We&#39;ve also discussed a universal update procedure, although now that I&#39;ve implemented some of this, I&#39;m having second thoughts about whether that really adds anything.<br><br></div><div>Looking at Haskell&#39;s Data.Set, the only other things I see are a partition procedure, which is easy to implement and potentially useful; and a Show instance declaration, which doesn&#39;t seem relevant.<br>


</div><div><br></div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex">
<div><br>
</div>`eqv?` is the identity predicate of Scheme...</blockquote><div><br></div><div>Thanks, that explanation was helpful.<br></div><div>&#xA0;<br>
</div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"><div>
&gt; This is one of the reasons I had an imap/monotone procedure in my draft<br>
&gt; immutable library; monotone procedures are a common special case of<br>
&gt; injective function. In hindsight, though, I think it should be<br>
&gt; imap/nondecreasing instead of imap/monotone.<br>
<br>
</div>What distinction are you making between monotone and non-decreasing?<br>
&lt;<a rel="nofollow" href="https://en.wikipedia.org/wiki/Monotonic_function" target="_blank">https://en.wikipedia.org/wiki/Monotonic_function</a>&gt; says they are synonyms.<br>
Perhaps the latter name is clearer, though.<br></blockquote><div><br></div><div>The definitions I&#39;m familiar with are that &quot;monotonic increasing&quot; means non-decreasing, &quot;monotonic decreasing&quot; means non-increasing, and unqualified &quot;monotonic&quot; means either monotonic increasing or monotonic decreasing. In the context of set map operations, we need the procedure to be specifically monotonic increasing to be able to reuse tree structure.<br>


<br></div><div>The wiki page goes on to say...<br><br>&quot;The term monotonic transformation can also possibly cause some confusion because it refers to a transformation by a strictly increasing function.&quot;<br><br></div>


<div>...and I think we are experiencing some of that confusion. We could use the term &quot;monotonic transform&quot; instead of just &quot;monotonic.&quot; Haskell uses &quot;monotonic&quot; along with notation that clarifies that they mean &quot;monotonic increasing.&quot;<br>

<br><a rel="nofollow" href="http://www.haskell.org/ghc/docs/6.12.3/html/libraries/containers-0.3.0.0/Data-Set.html#v%3AmapMonotonic">http://www.haskell.org/ghc/docs/6.12.3/html/libraries/containers-0.3.0.0/Data-Set.html#v%3AmapMonotonic</a><br>

<br></div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex">
<div>
</div>No, only set-replace is special. &#xA0;All others use &quot;first argument beats<br>
second&quot;, where an element already in the set is understood to be first.<br></blockquote><div><br></div><div>I guess that&#39;s sufficient for my association set application; I can change a mapping by removing any pre-existing association then adjoining a new one. It&#39;s not ideal, though, since that is two data structure operations instead of just one.<br>

<br></div><div>I agree that &quot;first argument beats second&quot; should be the default behavior, since it is less expensive.<br>
</div><div><br></div><div>Looking at the Haskell library reminded me that referential transparency bypasses this whole issue; there is no such thing as a distinction between eqv? and =? in Haskell. C++ uses &quot;first argument beats second&quot;:<br>

<a rel="nofollow" href="http://www.cplusplus.com/reference/set/set/insert/">http://www.cplusplus.com/reference/set/set/insert/</a><br></div><div>Python has a set and frozenset, but the &quot;beats&quot; behavior seems to be unspecified:<br>

<a rel="nofollow" href="https://docs.python.org/3/library/stdtypes.html#set">https://docs.python.org/3/library/stdtypes.html#set</a><br></div><div><br></div><div>Kevin Wortman<br><br></div></div></div></div>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00065" href="msg00065.html">Re: handling duplicate elements</a></strong>
<ul><li><em>From:</em> John Cowan</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00060" href="msg00060.html">handling duplicate elements</a></strong>
<ul><li><em>From:</em> Kevin Wortman</li></ul></li>
<li><strong><a name="00061" href="msg00061.html">Re: handling duplicate elements</a></strong>
<ul><li><em>From:</em> John Cowan</li></ul></li>
<li><strong><a name="00062" href="msg00062.html">Re: handling duplicate elements</a></strong>
<ul><li><em>From:</em> Kevin Wortman</li></ul></li>
<li><strong><a name="00063" href="msg00063.html">Re: handling duplicate elements</a></strong>
<ul><li><em>From:</em> John Cowan</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00063.html">Re: handling duplicate elements</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00065.html">Re: handling duplicate elements</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00063.html">Re: handling duplicate elements</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00065.html">Re: handling duplicate elements</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00064"><strong>Date</strong></a></li>
<li><a href="threads.html#00064"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>

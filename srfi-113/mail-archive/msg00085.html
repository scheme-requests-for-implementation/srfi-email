<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: LAST CALL for SRFI&#45;113, Sets and bags -->
<!--X-From-R13: Xbua Qbjna <pbjnaNzrephel.ppvy.bet> -->
<!--X-Date: Wed, 20 Aug 2014 13:28:39 +0000 (UTC) -->
<!--X-Message-Id: 20140820132835.GA25385@mercury.ccil.org -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 53EFBB25.9040404@bothner.com -->
<!--X-Reference: CAD2CXev6pH1YwkEBscWPV7ZXqa8xokoFtQx+41Rj1_mL6eKCpA@mail.gmail.com -->
<!--X-Reference: 20140818223819.GC4570@mercury.ccil.org -->
<!--X-Reference: 53F28160.3000901@bothner.com -->
<!--X-Reference: 20140819002557.GB19499@mercury.ccil.org -->
<!--X-Reference: CAD2CXeutqvsuxNv+PYqgN7&#45;HUi8cbHdGFSmU=EkHJ3iXDJYOXA@mail.gmail.com -->
<!--X-Reference: 20140819181852.GF15730@mercury.ccil.org -->
<!--X-Reference: CAD2CXevTPC+Cv10cebEOEh0wx8ZxZQ0kV49UxWaHtbAi2VH8FQ@mail.gmail.com -->
<!--X-Reference: 20140819222010.GP15730@mercury.ccil.org -->
<!--X-Reference: CAD2CXes=CHQyeo=cSos+_7L9AX20m2t5GbUcKgD4qF41TtonEA@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: LAST CALL for SRFI-113, Sets and bags</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00084.html">Date Prev</a>][<a href="msg00086.html">Date Next</a>][<a href="msg00084.html">Thread Prev</a>][<a href="msg00086.html">Thread Next</a>][<a href="maillist.html#00085">Date Index</a>][<a href="threads.html#00085">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: LAST CALL for SRFI-113, Sets and bags</h1>
<p style="max-width: 30em;">This page is part of the web mail archives of <a href="http://srfi.schemers.org/srfi-113">SRFI 113</a> from before July 7th, 2015.  The new archives for SRFI 113 are <a href="http://srfi-email.schemers.org/srfi-113/">here</a>.  Eventually, the entire history will be moved there, including any new messages.</p>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: Kevin Wortman &lt;<a href="mailto:kwortman@DOMAIN.HIDDEN">kwortman@xxxxxxxxx</a>&gt;</li>
<li><em>Subject</em>: Re: LAST CALL for SRFI-113, Sets and bags</li>
<li><em>From</em>: John Cowan &lt;<a href="mailto:cowan@DOMAIN.HIDDEN">cowan@xxxxxxxxxxxxxxxx</a>&gt;</li>
<li><em>Date</em>: Wed, 20 Aug 2014 09:28:35 -0400</li>
<li><em>Cc</em>: Per Bothner &lt;<a href="mailto:per@DOMAIN.HIDDEN">per@xxxxxxxxxxx</a>&gt;, <a href="mailto:srfi-113@DOMAIN.HIDDEN">srfi-113@xxxxxxxxxxxxxxxxx</a></li>
<li><em>Delivered-to</em>: <a href="mailto:srfi-113@DOMAIN.HIDDEN">srfi-113@xxxxxxxxxxxxxxxxx</a></li>
<li><em>In-reply-to</em>: &lt;CAD2CXes=CHQyeo=cSos+_7L9AX20m2t5GbUcKgD4qF41TtonEA@mail.gmail.com&gt;</li>
<li><em>References</em>: &lt;<a href="msg00071.html">53EFBB25.9040404@bothner.com</a>&gt; &lt;<a href="msg00074.html">CAD2CXev6pH1YwkEBscWPV7ZXqa8xokoFtQx+41Rj1_mL6eKCpA@mail.gmail.com</a>&gt; &lt;<a href="msg00075.html">20140818223819.GC4570@mercury.ccil.org</a>&gt; &lt;<a href="msg00076.html">53F28160.3000901@bothner.com</a>&gt; &lt;<a href="msg00078.html">20140819002557.GB19499@mercury.ccil.org</a>&gt; &lt;CAD2CXeutqvsuxNv+PYqgN7-HUi8cbHdGFSmU=EkHJ3iXDJYOXA@mail.gmail.com&gt; &lt;<a href="msg00081.html">20140819181852.GF15730@mercury.ccil.org</a>&gt; &lt;<a href="msg00082.html">CAD2CXevTPC+Cv10cebEOEh0wx8ZxZQ0kV49UxWaHtbAi2VH8FQ@mail.gmail.com</a>&gt; &lt;<a href="msg00083.html">20140819222010.GP15730@mercury.ccil.org</a>&gt; &lt;CAD2CXes=CHQyeo=cSos+_7L9AX20m2t5GbUcKgD4qF41TtonEA@mail.gmail.com&gt;</li>
<li><em>Sender</em>: John Cowan &lt;<a href="mailto:cowan@DOMAIN.HIDDEN">cowan@xxxxxxxx</a>&gt;</li>
<li><em>User-agent</em>: Mutt/1.5.20 (2009-06-14)</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>Kevin Wortman scripsit:

&gt; I think the alist conversion procedures are important since they allow bags
&gt; to be defined in program text and serialized with read and write.

I agree, and there is no question of flushing bag-&gt;alist or alist-&gt;bag.
It's only alist-&gt;bag! whose consistency and utility I'm beginning to
question.

&gt; I guess the pertinent question is: does ((a . 1) (1 . 2)) mean (1) &quot;1 copy
&gt; of a, and then *an additional* 2 copies of a&quot;; or (2) &quot;currently the count
&gt; of a's is 1; in the past the count for a was 2.&quot; The semantics of assoc
&gt; make it seem that conventionally, (2) is how alists with duplicate entries
&gt; are interpreted. Which I think is consistent with your first definition for
&gt; how alist-&gt;bag and alist-&gt;bag! should work.

I agree that assoc semantics should dominate, and all entries after the
first should be ignored.  The question then is:  given an implicit bag
defined by an alist with duplicate entries ignored, what is the semantics
of merging this into an existing bag?  Is it union or sum or replacement?
It's not obvious to me that either semantics is a clear winner.

So perhaps we should only standardize alist-&gt;bag, and leave bag merger to
the user.  This also suggests that we need a procedure bag-sum(!), with
semantics {a, a, a} + {a, a} = {a, a, a, a, a}.  The current definition
of bag-union gives {a, a, a} on the assumption that the elements are
indistinguishable, whereas bag-sum would treat them as distinguishable.
Checking Wikipedia s.v. Multiset, I find that sum is defined precisely
this way, as well as scalar product: {a, a, a} x 2 = {a, a, a, a, a, a}.

Lastly, I think we should have cartesian product of both sets and bags.
I don't know how I came to overlook it before, probably because none of
the other libraries I have looked at (Scheme, Lisp, Python, Haskell,
etc.) have given it.  It is a fundamental set operation, however.
I'll assume that the tuples (a,b) in the product should be represented
in Scheme as (a b), unless someone has strong contrary feelings.

-- 
John Cowan          <a  rel="nofollow" href="http://www.ccil.org/~cowan">http://www.ccil.org/~cowan</a>        cowan@xxxxxxxx
&quot;The exception proves the rule.&quot;  Dimbulbs think: &quot;Your counterexample proves
my theory.&quot;  Latin students think &quot;'Probat' means 'tests': the exception puts
the rule to the proof.&quot;  But legal historians know it means &quot;Evidence for an
exception is evidence of the existence of a rule in cases not excepted from.&quot;

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00086" href="msg00086.html">Re: LAST CALL for SRFI-113, Sets and bags</a></strong>
<ul><li><em>From:</em> Kevin Wortman</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00071" href="msg00071.html">Re: LAST CALL for SRFI-113, Sets and bags</a></strong>
<ul><li><em>From:</em> Per Bothner</li></ul></li>
<li><strong><a name="00074" href="msg00074.html">Re: LAST CALL for SRFI-113, Sets and bags</a></strong>
<ul><li><em>From:</em> Kevin Wortman</li></ul></li>
<li><strong><a name="00075" href="msg00075.html">Re: LAST CALL for SRFI-113, Sets and bags</a></strong>
<ul><li><em>From:</em> John Cowan</li></ul></li>
<li><strong><a name="00076" href="msg00076.html">Re: LAST CALL for SRFI-113, Sets and bags</a></strong>
<ul><li><em>From:</em> Per Bothner</li></ul></li>
<li><strong><a name="00078" href="msg00078.html">Re: LAST CALL for SRFI-113, Sets and bags</a></strong>
<ul><li><em>From:</em> John Cowan</li></ul></li>
<li><strong><a name="00080" href="msg00080.html">Re: LAST CALL for SRFI-113, Sets and bags</a></strong>
<ul><li><em>From:</em> Kevin Wortman</li></ul></li>
<li><strong><a name="00081" href="msg00081.html">Re: LAST CALL for SRFI-113, Sets and bags</a></strong>
<ul><li><em>From:</em> John Cowan</li></ul></li>
<li><strong><a name="00082" href="msg00082.html">Re: LAST CALL for SRFI-113, Sets and bags</a></strong>
<ul><li><em>From:</em> Kevin Wortman</li></ul></li>
<li><strong><a name="00083" href="msg00083.html">Re: LAST CALL for SRFI-113, Sets and bags</a></strong>
<ul><li><em>From:</em> John Cowan</li></ul></li>
<li><strong><a name="00084" href="msg00084.html">Re: LAST CALL for SRFI-113, Sets and bags</a></strong>
<ul><li><em>From:</em> Kevin Wortman</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00084.html">Re: LAST CALL for SRFI-113, Sets and bags</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00086.html">Re: LAST CALL for SRFI-113, Sets and bags</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00084.html">Re: LAST CALL for SRFI-113, Sets and bags</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00086.html">Re: LAST CALL for SRFI-113, Sets and bags</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00085"><strong>Date</strong></a></li>
<li><a href="threads.html#00085"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>

<!-- MHonArc v2.6.15 -->
<!--X-Subject: Re: Issues with Unicode -->
<!--X-From-R13: [nep Trryrl <srryrlNveb.hzbagerny.pn> -->
<!--X-Date: Sun, 23 Apr 2006 15:26:17 +0200 (MST) -->
<!--X-Message-Id: 803467D9&#45;D753&#45;4E8A&#45;AAEA&#45;2F03E97EDB42@iro.umontreal.ca -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: y9lbqushdsw.fsf@informatik.uni&#45;tuebingen.de -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: Issues with Unicode</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00298.html">Date Prev</a>][<a href="msg00300.html">Date Next</a>][<a href="msg00298.html">Thread Prev</a>][<a href="msg00300.html">Thread Next</a>][<a href="maillist.html#00299">Date Index</a>][<a href="threads.html#00299">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: Issues with Unicode</h1>
<p style="max-width: 30em;">This page is part of the web mail archives of <a href="http://srfi.schemers.org/srfi-75">SRFI 75</a> from before July 7th, 2015.  The new archives for SRFI 75 are <a href="http://srfi-email.schemers.org/srfi-75/">here</a>.  Eventually, the entire history will be moved there, including any new messages.</p>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: &quot;Jonathan S. Shapiro&quot; &lt;<a href="mailto:shap@DOMAIN.HIDDEN">shap@xxxxxxxxxxx</a>&gt;</li>
<li><em>Subject</em>: Re: Issues with Unicode</li>
<li><em>From</em>: Marc Feeley &lt;<a href="mailto:feeley@DOMAIN.HIDDEN">feeley@xxxxxxxxxxxxxxxx</a>&gt;</li>
<li><em>Date</em>: Sun, 23 Apr 2006 09:25:56 -0400</li>
<li><em>Cc</em>: <a href="mailto:srfi-75@DOMAIN.HIDDEN">srfi-75@xxxxxxxxxxxxxxxxx</a></li>
<li><em>Delivered-to</em>: <a href="mailto:srfi-75@DOMAIN.HIDDEN">srfi-75@xxxxxxxxxxxxxxxxx</a></li>
<li><em>In-reply-to</em>: &lt;<a href="mailto:y9lbqushdsw.fsf@DOMAIN.HIDDEN">y9lbqushdsw.fsf@xxxxxxxxxxxxxxxxxxxxxxxxxxx</a>&gt;</li>
<li><em>References</em>: &lt;<a href="mailto:y9lbqushdsw.fsf@DOMAIN.HIDDEN">y9lbqushdsw.fsf@xxxxxxxxxxxxxxxxxxxxxxxxxxx</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">
On 23-Apr-06, at 4:54 AM, Jonathan S. Shapiro wrote:

</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
...

</pre><tt>3. There is an issue with newline processing in input and output  
</tt><tt>(which
</tt><pre style="margin: 0em;">
probably is the subject of a different SRFI). Platforms do not agree
about newline conventions in text files. A regrettable consequence is
</pre><tt>that character streams require specification at open time as to  
</tt><tt>whether
</tt><pre style="margin: 0em;">
they are being opened for binary or text processing.

One regrettable consequence of this is that the R5RS specification for
open-output-file and open-input-file is inadequate. A second argument
needs to be added to specify newline processing conventions. Note that
</pre><tt>this also became an issue for UNIX STDIO, and that acceptance of  
</tt><tt>&quot;t&quot; and
</tt><pre style="margin: 0em;">
&quot;b&quot; in the file mode argument to fopen() is now mandated by the C
standard.

This is also an issue for string ports.

In general, any operation that opens a port must specify the desired
processing for newlines.

...

</pre><tt>9. Once you have a variable-length character representation, it  
</tt><tt>becomes
</tt><pre style="margin: 0em;">
necessary to incorporate separate means for reading bytes from input
streams. For example this is needed if the programmer wishes to
</pre><tt>construct code to process files in (e.g.) UTF-32. This raises a  
</tt><tt>question
</tt><pre style="margin: 0em;">
about newline canonicalization. My suggestion is that the port's
handling of newlines should be independent of the caller. That is,
</pre><tt>read-byte on a text-mode port that would normally convert the input  
</tt><tt>\r\n
</tt><tt>to \n should return the byte corresponding to \n. If you want  
</tt><tt>unmangled
</tt><pre style="margin: 0em;">
bytes, use binary mode input.

The same argument does *not* apply for read-char, because it is the
</pre><tt>nature of read-char to process the bytes in order to determine  
</tt><tt>character
</tt><pre style="margin: 0em;">
length.
</pre></blockquote><pre style="margin: 0em;">

</pre><tt>For a solution to these problems see SRFI 91.  I would appreciate  
</tt><tt>feedback on the SRFI 91 mailing list if you think it does not satisfy  
</tt><tt>your needs.
</tt><pre style="margin: 0em;">

Marc

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00298" href="msg00298.html">Issues with Unicode</a></strong>
<ul><li><em>From:</em> Jonathan S. Shapiro</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00298.html">Issues with Unicode</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00300.html">Re: Issues with Unicode</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00298.html">Issues with Unicode</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00300.html">Re: Issues with Unicode</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00299"><strong>Date</strong></a></li>
<li><a href="threads.html#00299"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>

<!-- MHonArc v2.6.15 -->
<!--X-Subject: Re: Surrogates and character representation -->
<!--X-From-R13: Ivyyvnz R Qyvatre <prfhenNirevmba.arg> -->
<!--X-Date: Thu, 28 Jul 2005 07:35:04 +0200 (DFT) -->
<!--X-Message-Id: y9lk6jb4ho8.fsf@sams.informatik.uni&#45;tuebingen.de -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: Surrogates and character representation</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00252.html">Date Prev</a>][<a href="msg00254.html">Date Next</a>][<a href="msg00244.html">Thread Prev</a>][<a href="msg00255.html">Thread Next</a>][<a href="maillist.html#00253">Date Index</a>][<a href="threads.html#00253">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: Surrogates and character representation</h1>
<p style="max-width: 30em;">This page is part of the web mail archives of <a href="http://srfi.schemers.org/srfi-75">SRFI 75</a> from before July 7th, 2015.  The new archives for SRFI 75 are <a href="http://srfi-email.schemers.org/srfi-75/">here</a>.  The new archives contain all messages, not just those from before July 7th, 2015.</p>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: <a href="mailto:srfi-75@DOMAIN.HIDDEN">srfi-75@xxxxxxxxxxxxxxxxx</a></li>
<li><em>Subject</em>: Re: Surrogates and character representation</li>
<li><em>From</em>: William D Clinger &lt;<a href="mailto:cesura@DOMAIN.HIDDEN">cesura@xxxxxxxxxxx</a>&gt;</li>
<li><em>Date</em>: Thu, 28 Jul 2005 07:35:03 +0200</li>
<li><em>Delivered-to</em>: <a href="mailto:srfi-75@DOMAIN.HIDDEN">srfi-75@xxxxxxxxxxxxxxxxx</a></li>
<li><em>User-agent</em>: Gnus/5.110003 (No Gnus v0.3) XEmacs/21.5-b20 (berkeley-unix)</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>Referring to the Boyer-Moore fast string searching algorithm,
Alan Watson wrote:
 &gt; Yes, but I think you can implement this for UTF-8 or UTF-16
 &gt; strings using offsets to the underlying bytes or shorts.  I
 &gt; don't think that you need character offsets.

You certainly don't need character offsets to do a string
search, but the naive algorithm without random access to
characters is O(mn).  The Boyer-Moore algorithm improves
this to O(n/m) in many cases.  I believe one can construct
artificial examples to show that some O(n/m) cases would
degrade to an intermediate complexity, or even back to O(mn),
in UTF-8 or UTF-16 without character offsets.  I don't know
how often examples of those cases would arise in practice.

Others have named other applications of random access to
characters within a string.

I am not trying to argue that the asymptotic efficiency of
these or any other particular algorithms should be decisive,
nor am I trying to argue that a constant factor of 4 in space
efficiency should be or should not be decisive.  I just think
it's a good idea to understand the efficiency issues before
we dismiss them.

As you might divine from my comments in the SRFI-70 list,
I prefer to let implementors figure out how to represent
strings.  It isn't all that hard for an implementation to
change the representation, transparently, if it turns out
that a string is being used for random access to characters,
or that non-Latin-1 characters are being stored into a string
whose constituent characters originally lay within the Latin-1
subset.  SRFI-75 doesn't dictate any particular representation,
and that's good.  SRFI-75 does penalize certain poor choices of
representation, and I think that's good too.

I appreciate the fact that some implementations will want to
use the same representation as some other language or system,
even if that is not a particularly good representation.  From
that point of view, I think the main problem with SRFI-75 is
that it requires mutable strings, which (in the presence of
concurrency or an obsession with object identity) make it hard
to change the representation transparently---code written in
some other language or in a concurrent thread might notice the
change, even if the Scheme code in this thread doesn't.  On
the other hand, no single representation has emerged in other
languages as the obvious standard representation that we should
adopt for Scheme.  The best we can do is to design our semantics
as best we can, allow implementors to design their representations
as best they can, and let users decide which systems work best
for their purposes.

Will

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00255" href="msg00255.html">Re: Surrogates and character representation</a></strong>
<ul><li><em>From:</em> Alex Shinn</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00252.html">Re: Surrogates and character representation</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00254.html">Re: Surrogates and character representation</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00244.html">Re: Surrogates and character representation</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00255.html">Re: Surrogates and character representation</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00253"><strong>Date</strong></a></li>
<li><a href="threads.html#00253"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>

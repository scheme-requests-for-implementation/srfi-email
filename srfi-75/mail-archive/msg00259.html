<!-- MHonArc v2.6.15 -->
<!--X-Subject: Re: Surrogates and character representation -->
<!--X-From-R13: Bre Pbguare <creNobguare.pbz> -->
<!--X-Date: Thu, 28 Jul 2005 17:34:31 +0200 (DFT) -->
<!--X-Message-Id: 42E8FAE4.1070603@bothner.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 42E8546F.9000407@bothner.com -->
<!--X-Reference: 17128.22540.135687.288180@tiphares.basistech.net -->
<!--X-Reference: Pine.LNX.4.58.0507280119280.28883@bolt.sonic.net -->
<!--X-Reference: 20050728.000652.1016278026.shiro@lava.net -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: Surrogates and character representation</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00258.html">Date Prev</a>][<a href="msg00260.html">Date Next</a>][<a href="msg00257.html">Thread Prev</a>][<a href="msg00260.html">Thread Next</a>][<a href="maillist.html#00259">Date Index</a>][<a href="threads.html#00259">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: Surrogates and character representation</h1>
<p style="max-width: 30em;">This page is part of the web mail archives of <a href="http://srfi.schemers.org/srfi-75">SRFI 75</a> from before July 7th, 2015.  The new archives for SRFI 75 are <a href="http://srfi-email.schemers.org/srfi-75/">here</a>.  The new archives contain all messages, not just those from before July 7th, 2015.</p>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: <a href="mailto:srfi-75@DOMAIN.HIDDEN">srfi-75@xxxxxxxxxxxxxxxxx</a></li>
<li><em>Subject</em>: Re: Surrogates and character representation</li>
<li><em>From</em>: Per Bothner &lt;<a href="mailto:per@DOMAIN.HIDDEN">per@xxxxxxxxxxx</a>&gt;</li>
<li><em>Date</em>: Thu, 28 Jul 2005 08:33:56 -0700</li>
<li><em>Delivered-to</em>: <a href="mailto:srfi-75@DOMAIN.HIDDEN">srfi-75@xxxxxxxxxxxxxxxxx</a></li>
<li><em>In-reply-to</em>: &lt;<a href="mailto:20050728.000652.1016278026.shiro@DOMAIN.HIDDEN">20050728.000652.1016278026.shiro@xxxxxxxx</a>&gt;</li>
<li><em>References</em>: &lt;<a href="mailto:42E8546F.9000407@DOMAIN.HIDDEN">42E8546F.9000407@xxxxxxxxxxx</a>&gt;	&lt;<a href="mailto:17128.22540.135687.288180@DOMAIN.HIDDEN">17128.22540.135687.288180@xxxxxxxxxxxxxxxxxxxxxx</a>&gt;	&lt;<a href="mailto:Pine.LNX.4.58.0507280119280.28883@DOMAIN.HIDDEN">Pine.LNX.4.58.0507280119280.28883@xxxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:20050728.000652.1016278026.shiro@DOMAIN.HIDDEN">20050728.000652.1016278026.shiro@xxxxxxxx</a>&gt;</li>
<li><em>User-agent</em>: Mozilla Thunderbird 1.0.6-1.1.fc4 (X11/20050720)</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">
If you have large UTF-8 text files, clearly the most efficient solution
is to use byte indexes.  That allows you to:
(1) use random-access on the actual text files, without first reading
them in in memory and expanding them to UTF-32.
(2) map the file as-is into memory and index into the resulting buffer
without any conversion of the data or the indexes.
It follows that the most efficient internal representation is also
UTF-8, since it matches the files, and allows you to use the same
byte indexes without conversion.

This argument assumes you're willing to standardize on UTF-8 for
your text files, which is a reasonable thing to do, but may be
difficult to agree on.  If you don't agree that the canonical
representation is UTF-8, then using character indexes may be better.

Another argument for using codepoint offsets rather than byte offsets
is if they're going to be used by humans, perhaps in email or journal
articles, since people unfamiliar with UTF-8 may be confused by UTF-8
offsets.  However, this is a fairly weak argument, since you have the
same issue with composite characters: in that case codepoint offsets
will also not match the characters that people see.
--
	--Per Bothner
per@xxxxxxxxxxx   <a  rel="nofollow" href="http://per.bothner.com/">http://per.bothner.com/</a>

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00260" href="msg00260.html">Re: Surrogates and character representation</a></strong>
<ul><li><em>From:</em> Tom Emerson</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00251" href="msg00251.html">Re: Surrogates and character representation</a></strong>
<ul><li><em>From:</em> Per Bothner</li></ul></li>
<li><strong><a name="00252" href="msg00252.html">Re: Surrogates and character representation</a></strong>
<ul><li><em>From:</em> Tom Emerson</li></ul></li>
<li><strong><a name="00256" href="msg00256.html">Re: Surrogates and character representation</a></strong>
<ul><li><em>From:</em> bear</li></ul></li>
<li><strong><a name="00257" href="msg00257.html">Re: Surrogates and character representation</a></strong>
<ul><li><em>From:</em> Shiro Kawai</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00258.html">Re: Surrogates and character representation</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00260.html">Re: Surrogates and character representation</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00257.html">Re: Surrogates and character representation</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00260.html">Re: Surrogates and character representation</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00259"><strong>Date</strong></a></li>
<li><a href="threads.html#00259"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>

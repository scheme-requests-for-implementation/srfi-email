<!-- MHonArc v2.6.15 -->
<!--X-Subject: Re: getenv vs. locale -->
<!--X-From-R13: uvtrcba <uvtrcbaNtznvy.pbz> -->
<!--X-Date: Mon, 21 Jul 2008 08:01:01 +0200 (MST) -->
<!--X-Message-Id: f07386410807202300p3f4ad0e5n296fab9ef77f6056@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: m2d4lbaxv3.fsf@cherry.siamics.int -->
<!--X-Reference: 20080719.212021.1010996329.shiro@lava.net -->
<!--X-Reference: f07386410807200533w4117379aiacd79e422c259079@mail.gmail.com -->
<!--X-Reference: 20080720.091203.622524227.shiro@lava.net -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: getenv vs. locale</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00031.html">Date Prev</a>][<a href="msg00033.html">Date Next</a>][<a href="msg00029.html">Thread Prev</a>][<a href="msg00033.html">Thread Next</a>][<a href="maillist.html#00032">Date Index</a>][<a href="threads.html#00032">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: getenv vs. locale</h1>
<p style="max-width: 30em;">This page is part of the web mail archives of <a href="http://srfi.schemers.org/srfi-98">SRFI 98</a> from before July 7th, 2015.  The new archives for SRFI 98 are <a href="http://srfi-email.schemers.org/srfi-98/">here</a>.  Eventually, the entire history will be moved there, including any new messages.</p>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: &quot;Shiro Kawai&quot; &lt;<a href="mailto:shiro@DOMAIN.HIDDEN">shiro@xxxxxxxx</a>&gt;</li>
<li><em>Subject</em>: Re: getenv vs. locale</li>
<li><em>From</em>: higepon &lt;<a href="mailto:higepon@DOMAIN.HIDDEN">higepon@xxxxxxxxx</a>&gt;</li>
<li><em>Date</em>: Mon, 21 Jul 2008 15:00:59 +0900</li>
<li><em>Cc</em>: <a href="mailto:oneingray@DOMAIN.HIDDEN">oneingray@xxxxxxxxx</a>, <a href="mailto:ivan@DOMAIN.HIDDEN">ivan@xxxxxxxxxxxxx</a>, <a href="mailto:srfi-98@DOMAIN.HIDDEN">srfi-98@xxxxxxxxxxxxxxxxx</a></li>
<li><em>Delivered-to</em>: <a href="mailto:srfi-98@DOMAIN.HIDDEN">srfi-98@xxxxxxxxxxxxxxxxx</a></li>
<li><em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed;        d=gmail.com; s=gamma;        h=domainkey-signature:received:received:message-id:date:from:to         :subject:cc:in-reply-to:mime-version:content-type         :content-transfer-encoding:content-disposition:references;        bh=pQRBOKZCm/tok/tCDADm98oBDMpCxltWd8Id1DYmW1Q=;        b=qhMnwLMlYneQZt66if9rDyvPPWaP99fUcVPt75mRcMb0Bbkbw5MSG1q6j8I9iKXhnR         TiPuseYpXhfG7w03GFV1caSo/B/qj0i9H/FImiJJaT/WSpo3s9TTgvll/I0Z7dsIQT36         x8ndJxLkzv3vI+43h4EBTGHy+Nk03ga/CrsFw=</li>
<li><em>Domainkey-signature</em>: a=rsa-sha1; c=nofws;        d=gmail.com; s=gamma;        h=message-id:date:from:to:subject:cc:in-reply-to:mime-version         :content-type:content-transfer-encoding:content-disposition         :references;        b=iby3PCdtMNI636NG1qU+x+ouqpdVabvAsb8k34ioXqIJuSqxa6gtq6kypmnr9LEv9a         A3DgJpe8EhSgwcHzbINpD2arnJTkt/9qiXcE0be/xoT7OlE3Cq3OnGZSa96/afO+lx0N         iHtvunsmUwLwqin5OdWa8F/eY5NXSVprC+6Qg=</li>
<li><em>In-reply-to</em>: &lt;<a href="mailto:20080720.091203.622524227.shiro@DOMAIN.HIDDEN">20080720.091203.622524227.shiro@xxxxxxxx</a>&gt;</li>
<li><em>References</em>: &lt;<a href="mailto:m2d4lbaxv3.fsf@DOMAIN.HIDDEN">m2d4lbaxv3.fsf@xxxxxxxxxxxxxxxxxx</a>&gt;	 &lt;<a href="mailto:20080719.212021.1010996329.shiro@DOMAIN.HIDDEN">20080719.212021.1010996329.shiro@xxxxxxxx</a>&gt;	 &lt;<a href="mailto:f07386410807200533w4117379aiacd79e422c259079@DOMAIN.HIDDEN">f07386410807200533w4117379aiacd79e422c259079@xxxxxxxxxxxxxx</a>&gt;	 &lt;<a href="mailto:20080720.091203.622524227.shiro@DOMAIN.HIDDEN">20080720.091203.622524227.shiro@xxxxxxxx</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>Hi,
Thank you for your active discussion.

Abdulaziz Ghuloum wrote:

&gt;One other inconvenience is that you have to wrap every call to
&gt;get-environment-variable with some sort of a guard.

I see.

shiro wrote:
&gt; Ultimately, the choice depends on the purpose of this srfi.
&gt; If this one just wants to summarize &quot;current practices&quot;, leave
&gt; the behavior undefined and cross your fingers that it works
&gt; &quot;most of the time&quot;.  If this one wants to provide a portable
&gt; and robust basis, specify the behavior and encourage existing
&gt; implementations to follow.  I tend to vote the latter.

Thank you for your kind explanation.
It was clear enough for me to understand what you meant.

I want to summarize &quot;current practices&quot;.
So I suggest for keeping it simple we summarize &quot;current practices&quot; in
this srfi.

Fortunately, your suggestion (c) is not inconsistent with simple one,
we can leave some rare cases to another srfi.

---
Taro Minowa(Higepon)

<a  rel="nofollow" href="http://www.monaos.org/">http://www.monaos.org/</a>
<a  rel="nofollow" href="http://code.google.com/p/mosh-scheme/">http://code.google.com/p/mosh-scheme/</a>


On Mon, Jul 21, 2008 at 4:12 AM, Shiro Kawai &lt;shiro@xxxxxxxx&gt; wrote:
&gt; From: higepon &lt;higepon@xxxxxxxxx&gt;
&gt; Subject: Re: getenv vs. locale
&gt; Date: Sun, 20 Jul 2008 21:33:54 +0900
&gt;
&gt;&gt; Thank you for your suggestions.
&gt;&gt;
&gt;&gt; &gt; (a) Raises an exception (natural, but may be inconvenient in some cases)
&gt;&gt; &gt; (b) Returns some value indicating such condition has happened
&gt;&gt; &gt; (c) Allow an optional 'filter' argument.
&gt;&gt;
&gt;&gt; I think (a) is good.
&gt;&gt; It is enough for my usage (CGI applications).
&gt;&gt;
&gt;&gt; What cases are inconvenient?
&gt;&gt; Procedures return raw value(s) are necessary?
&gt;
&gt; Initially I thought it would be cumbersome to wrap every
&gt; occurrence of getenv if I wanted to make sure getenv won't
&gt; stop an application.  But maybe it's not so bad, since giving a
&gt; proper filter argument is probably equally cumbersome.  And
&gt; in either way, you can't change the behavior of getenvs used
&gt; within third-party libraries.  So, the advantage of (c) is
&gt; greater flexibility, including the integration of raw value
&gt; handling into getenv function.
&gt; (Alternatively, the condition thrown by getenv may include
&gt; the offending value in it.)
&gt;
&gt; Do we need raw value handling?  Well, maybe.  I tend to say
&gt; yes because of my tendency to try to cover all possible cases,
&gt; but am not sure its practical implication.  Besides the
&gt; obvious use cases such as logging and fancy error reporting,
&gt; what I can think of is contrived examples such as
&gt; the value of PWD includes a multibyte directory name whose
&gt; encoding is different from the process's locale and you
&gt; might want to convert it implicitly.
&gt;
&gt; The option (c) is difficult to implement on top of the
&gt; existing implementations, in most of which getenv is a primitive
&gt; procedure returning a string (but there's the same difficulty
&gt; in the option (a) if you want to define a specific condition
&gt; getenv should throw).
&gt;
&gt; Ultimately, the choice depends on the purpose of this srfi.
&gt; If this one just wants to summarize &quot;current practices&quot;, leave
&gt; the behavior undefined and cross your fingers that it works
&gt; &quot;most of the time&quot;.  If this one wants to provide a portable
&gt; and robust basis, specify the behavior and encourage existing
&gt; implementations to follow.  I tend to vote the latter.
&gt; (It would be very annoying if my application calling
&gt; get-environment-variables keeps failing on the user's machine
&gt; but not on my machine, and finding out it's because a single
&gt; value in some obscure environment variable.)
&gt;
&gt; --shiro
&gt;

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00033" href="msg00033.html">Re: getenv vs. locale</a></strong>
<ul><li><em>From:</em> Ivan Shmakov</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00025" href="msg00025.html">getenv vs. locale</a></strong>
<ul><li><em>From:</em> Ivan Shmakov</li></ul></li>
<li><strong><a name="00026" href="msg00026.html">Re: getenv vs. locale</a></strong>
<ul><li><em>From:</em> Shiro Kawai</li></ul></li>
<li><strong><a name="00027" href="msg00027.html">Re: getenv vs. locale</a></strong>
<ul><li><em>From:</em> higepon</li></ul></li>
<li><strong><a name="00029" href="msg00029.html">Re: getenv vs. locale</a></strong>
<ul><li><em>From:</em> Shiro Kawai</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00031.html">Re: getenv vs. locale</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00033.html">Re: getenv vs. locale</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00029.html">Re: getenv vs. locale</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00033.html">Re: getenv vs. locale</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00032"><strong>Date</strong></a></li>
<li><a href="threads.html#00032"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>

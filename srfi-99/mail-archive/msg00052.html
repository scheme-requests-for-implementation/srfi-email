<!-- MHonArc v2.6.15 -->
<!--X-Subject: Re: why generative? -->
<!--X-From-R13: Ivyyvnz R Qyvatre <jvyyNppf.arh.rqh> -->
<!--X-Date: Mon, 31 Aug 2009 14:25:16 +0000 (UTC) -->
<!--X-Message-Id: 3386312.436981251728708336.JavaMail.root@zimbra -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 4A9AE030.90309@bothner.com -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: why generative?</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00051.html">Date Prev</a>][<a href="msg00053.html">Date Next</a>][<a href="msg00050.html">Thread Prev</a>][<a href="msg00054.html">Thread Next</a>][<a href="maillist.html#00052">Date Index</a>][<a href="threads.html#00052">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: why generative?</h1>
<p style="max-width: 30em;">This page is part of the web mail archives of <a href="http://srfi.schemers.org/srfi-99">SRFI 99</a> from before July 7th, 2015.  The <a href="http://srfi-email.schemers.org/srfi-99">new archives</a> for SRFI 99 contain all messages, not just those from before July 7th, 2015.</p>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: Per Bothner &lt;<a href="mailto:per@DOMAIN.HIDDEN">per@xxxxxxxxxxx</a>&gt;</li>
<li><em>Subject</em>: Re: why generative?</li>
<li><em>From</em>: William D Clinger &lt;<a href="mailto:will@DOMAIN.HIDDEN">will@xxxxxxxxxxx</a>&gt;</li>
<li><em>Date</em>: Mon, 31 Aug 2009 10:25:08 -0400 (EDT)</li>
<li><em>Cc</em>: <a href="mailto:srfi-99@DOMAIN.HIDDEN">srfi-99@xxxxxxxxxxxxxxxxx</a></li>
<li><em>Delivered-to</em>: <a href="mailto:srfi-99@DOMAIN.HIDDEN">srfi-99@xxxxxxxxxxxxxxxxx</a></li>
<li><em>In-reply-to</em>: &lt;<a href="mailto:4A9AE030.90309@DOMAIN.HIDDEN">4A9AE030.90309@xxxxxxxxxxx</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>Per Bothner wrote:
&gt; For Kawa it is desirable to compile a record type to a
&gt; class, and to do so at compile-time.  This is easier for
&gt; non-generative record types.

Maybe.  With R6RS records, you stil have to record the
values of the arguments to make-record-type-descriptor,
and perform a run-time check to see whether they're the
same as for any previous call with the same uid.  You
also have to deal with the case where the uid is not
the same.  I don't think the SRFI 99 semantics adds
any complexity to that.

With either R6RS or SRFI 99 records, I'd assume that
you would want to represent record types by instances
of classes, with run-time checks in the accessors and
mutators.  Those are the checks that the R6RS editors
mistakenly believed would be easier to optimize away
when the syntactic interface is used.

With the structural equality of record types proposed
by Shiro, those run-time checks would be far more
expensive if the structural equality were tested at
accessor/mutator time, and more complicated if done
when record types are created.

Either way, I don't see how structural equality would
make it easier to represent *all* record types by
classes instead of instances.  I agree that you could
use classes to represent record types defined at a
library's top level, but that's already true even with
the generative semantics of the current draft of SRFI
99.

&gt; (I'm not 100% clear on R6RS module semantics.  I'm assuming
&gt; the actions or definitions of a module are only evaluated
&gt; once, even if it is imported multiple times.

That's implementation-dependent.  You have the right
to make that true in your implementation, in which
case you can represent top-level record definitions
(whether generative or non-generative) by classes.

&gt; Inheritance adds a caveat: A record type may need to be generative
&gt; if it extends a generative type.  At least you have to be
&gt; careful you get the correct parent when inspecting.

If the parent was generative, but defined by an obvious
top-level form, then you can treat the parent as though
it were non-generative.

I think I'm mostly just repeating what you said.

Will

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00054" href="msg00054.html">Re: why generative?</a></strong>
<ul><li><em>From:</em> Per Bothner</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00050" href="msg00050.html">Re: why generative?</a></strong>
<ul><li><em>From:</em> Per Bothner</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00051.html">Re: why generative?</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00053.html">Re: why generative?</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00050.html">Re: why generative?</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00054.html">Re: why generative?</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00052"><strong>Date</strong></a></li>
<li><a href="threads.html#00052"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>

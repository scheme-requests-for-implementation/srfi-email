<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: SRFI&#45;108 and SRFI&#45;109 final candidates available -->
<!--X-From-R13: Bre Pbguare <creNobguare.pbz> -->
<!--X-Date: Thu, 18 Apr 2013 01:56:14 +0200 (MST) -->
<!--X-Message-Id: 516F3691.90403@bothner.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 516EE4A4.40601@bothner.com -->
<!--X-Reference: 20130417203216.GA6180@mercury.ccil.org -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: SRFI-108 and SRFI-109 final candidates available</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00032.html">Date Prev</a>][<a href="msg00034.html">Date Next</a>][<a href="msg00032.html">Thread Prev</a>][<a href="msg00034.html">Thread Next</a>][<a href="maillist.html#00033">Date Index</a>][<a href="threads.html#00033">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: SRFI-108 and SRFI-109 final candidates available</h1>
<p style="max-width: 30em;">This page is part of the web mail archives of <a href="http://srfi.schemers.org/srfi-109">SRFI 109</a> from before July 7th, 2015.  The <a href="http://srfi-email.schemers.org/srfi-109">new archives</a> for SRFI 109 contain all messages, not just those from before July 7th, 2015.</p>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: John Cowan &lt;<a href="mailto:cowan@DOMAIN.HIDDEN">cowan@xxxxxxxxxxxxxxxx</a>&gt;</li>
<li><em>Subject</em>: Re: SRFI-108 and SRFI-109 final candidates available</li>
<li><em>From</em>: Per Bothner &lt;<a href="mailto:per@DOMAIN.HIDDEN">per@xxxxxxxxxxx</a>&gt;</li>
<li><em>Date</em>: Wed, 17 Apr 2013 16:56:01 -0700</li>
<li><em>Cc</em>: <a href="mailto:srfi-108@DOMAIN.HIDDEN">srfi-108@xxxxxxxxxxxxxxxxx</a>, <a href="mailto:srfi-109@DOMAIN.HIDDEN">srfi-109@xxxxxxxxxxxxxxxxx</a></li>
<li><em>Delivered-to</em>: <a href="mailto:srfi-109@DOMAIN.HIDDEN">srfi-109@xxxxxxxxxxxxxxxxx</a></li>
<li><em>In-reply-to</em>: &lt;<a href="mailto:20130417203216.GA6180@DOMAIN.HIDDEN">20130417203216.GA6180@xxxxxxxxxxxxxxxx</a>&gt;</li>
<li><em>References</em>: &lt;<a href="mailto:516EE4A4.40601@DOMAIN.HIDDEN">516EE4A4.40601@xxxxxxxxxxx</a>&gt; &lt;<a href="mailto:20130417203216.GA6180@DOMAIN.HIDDEN">20130417203216.GA6180@xxxxxxxxxxxxxxxx</a>&gt;</li>
<li><em>User-agent</em>: Mozilla/5.0 (X11; Linux x86_64; rv:17.0) Gecko/20130402 Thunderbird/17.0.5</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">
Oops - I'm sorry.  I uploaded the files to the wrong directory.
They should be ok now.  My apologies for wasting your time.

On 04/17/2013 01:32 PM, John Cowan wrote:
</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
Per Bothner scripsit:

</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
<a  rel="nofollow" href="http://per.bothner.com/tmp/srfi-108/srfi-108.html">http://per.bothner.com/tmp/srfi-108/srfi-108.html</a>
</pre></blockquote><pre style="margin: 0em;">

s/using same/using the same/
</pre></blockquote><pre style="margin: 0em;">

Thanks - fixed.

</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
s/specifiction/specification/ (twice)
</pre></blockquote><pre style="margin: 0em;">

Fixed (already in local and new-uploaed version).

</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
<a  rel="nofollow" href="http://per.bothner.com/tmp/srfi-109/srfi-109.html">http://per.bothner.com/tmp/srfi-109/srfi-109.html</a>
</pre></blockquote><pre style="margin: 0em;">

s/identation/indentation/
</pre></blockquote><pre style="margin: 0em;">

Likewise was already fixed.

</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
Period did not get added to tag-subsequent.
</pre></blockquote><pre style="margin: 0em;">

Sorry - that was fixed in my local copy/

</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
Rather than referring to R7RS productions, duplicate them in order to help
maintain SRFI 109 as a self-contained document.
</pre></blockquote><pre style="margin: 0em;">

As a matter of style, I think this questionable - duplicating
definitions from existing standards is a mistake.  (Where would
you stop?  Duplicate the entire definition of &lt;expression&gt;?)
However, in this case R7RS is not yet ratified.  It might be better
to refer to R6RS.

</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
Both documents:

Is there a need for &amp;lbrack; and &amp;rbrack; in SRFI 109 in order to escape
unbalanced brackets in SRFI-108 constructors?
</pre></blockquote><pre style="margin: 0em;">

&amp;lbrack; and &amp;rbrack; are not required in my copy.

</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
Defining the variables $&lt;&lt;$ and $&gt;&gt;$ as empty strings sounds clever,
but unfortunately none of R[4-7]RS require either `eq?` or `eqv?` to be
able to distinguish between two instances of the empty string.
Scheme
implementations are allowed to coalesce them all into a single instance.
</pre></blockquote><pre style="margin: 0em;">

(Note you may have read an earlier draft where $&lt;&lt;$ and $&gt;&gt;$
were initialized to &quot;&quot;.  They are now initialized to (make-string 0).)

Not by my reading: make-string returns a &quot;newly
allocated string&quot;, so while eq? is allowed to #t for the result
of the different calls to make-string, it violates most people's
expectations of how eq? works.  Is there any Scheme implementation
where (eq? (make-string 0) (make-string 0)) return #t?

I tweaked the draft to discuss this (theoretical) possibility:

  Note that R6RS and R7RS allows eq? to return #t for distinct
  calls to (make-string 0). A hypothetical implementation that
  does so needs to initialize $&lt;&lt;$ and $&gt;&gt;$ some other way.

SRFI-109 can't be implemented by a portable library anyway,
so it seems fine to make such a requirement.   Given that
it would be a really weird Scheme implementation where it
is an issue.

</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
So if they are to be defined as strings, they need to be non-empty if
`$string$` and `$construct:*` are to be definable as functions rather
than as macros.  I suggest:

     ;; Calling string-copy guarantees that these are unique objects.
     (define $&lt;&lt;$ (string-copy &quot;$&lt;&lt;$&quot;))
     (define $&gt;&gt;$ (string-copy &quot;$&gt;&gt;$&quot;))

This means that the sample definition of $string$ has to work a little
harder, skipping arguments that are `eqv?` to either of these variables.
Literal appearances of &quot;$&lt;&lt;$&quot; or &quot;$&gt;&gt;$&quot; in text, or appearances as the
result of evaluating expressions, are guaranteed never to be `eqv?`.
</pre></blockquote><pre style="margin: 0em;">

I don't care about making $string$ more complex, but I do care about
making $construct$:foo harder to write.  True, in many case we can
hide the complexity in define-simple-constructor (that might have
been missing in the version you reviewed).  In many other cases
$construct$:foo will be a macro where it doesn't matter what
$&lt;&lt;$ and $&gt;&gt;$ evaluate to.  In other cases, we can ignore them,
and it's ok if they evaluate to &quot;&quot; without it mattering if they're
unique.

However, I don't think this is an actual problem, and initializing
there to (make-string 0) seems fine.
--
	--Per Bothner
per@xxxxxxxxxxx   <a  rel="nofollow" href="http://per.bothner.com/">http://per.bothner.com/</a>

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00034" href="msg00034.html">Re: SRFI-108 and SRFI-109 final candidates available</a></strong>
<ul><li><em>From:</em> John Cowan</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00030" href="msg00030.html">SRFI-108 and SRFI-109 final candidates available</a></strong>
<ul><li><em>From:</em> Per Bothner</li></ul></li>
<li><strong><a name="00032" href="msg00032.html">Re: SRFI-108 and SRFI-109 final candidates available</a></strong>
<ul><li><em>From:</em> John Cowan</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00032.html">Re: SRFI-108 and SRFI-109 final candidates available</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00034.html">Re: SRFI-108 and SRFI-109 final candidates available</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00032.html">Re: SRFI-108 and SRFI-109 final candidates available</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00034.html">Re: SRFI-108 and SRFI-109 final candidates available</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00033"><strong>Date</strong></a></li>
<li><a href="threads.html#00033"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>

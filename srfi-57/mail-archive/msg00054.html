<!-- MHonArc v2.6.15 -->
<!--X-Subject: Re: the number of fields -->
<!--X-From-R13: pnzcoryyNnhgbqevc.oybbqnaqpbssrr.arg -->
<!--X-Date: Sun,  7 Nov 2004 20:35:56 +0100 (NFT) -->
<!--X-Message-Id: Pine.LNX.4.44.0411071007490.1365&#45;100000@autodrip.bloodandcoffee.net -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: Pine.GSO.4.60.0411071148140.10596@now.het.brown.edu -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: the number of fields</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00053.html">Date Prev</a>][<a href="msg00055.html">Date Next</a>][<a href="msg00053.html">Thread Prev</a>][<a href="msg00059.html">Thread Next</a>][<a href="maillist.html#00054">Date Index</a>][<a href="threads.html#00054">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: the number of fields</h1>
<p style="max-width: 30em;">This page is part of the web mail archives of <a href="http://srfi.schemers.org/srfi-57">SRFI 57</a> from before July 7th, 2015.  The <a href="http://srfi-email.schemers.org/srfi-57">new archives</a> for SRFI 57 contain all messages, not just those from before July 7th, 2015.</p>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: Andre van Tonder &lt;<a href="mailto:andre@DOMAIN.HIDDEN">andre@xxxxxxxxxxxxxxxxx</a>&gt;</li>
<li><em>Subject</em>: Re: the number of fields</li>
<li><em>From</em>: <a href="mailto:campbell@DOMAIN.HIDDEN">campbell@xxxxxxxxxxxxxxxxxxxxxxxxxxx</a></li>
<li><em>Date</em>: Sun, 7 Nov 2004 12:03:55 -0800 (PST)</li>
<li><em>Cc</em>: soo &lt;<a href="mailto:tilde@DOMAIN.HIDDEN">tilde@xxxxxxxxxxx</a>&gt;, &lt;<a href="mailto:srfi-57@DOMAIN.HIDDEN">srfi-57@xxxxxxxxxxxxxxxxx</a>&gt;</li>
<li><em>Delivered-to</em>: <a href="mailto:srfi-57@DOMAIN.HIDDEN">srfi-57@xxxxxxxxxxxxxxxxx</a></li>
<li><em>In-reply-to</em>: &lt;<a href="mailto:Pine.GSO.4.60.0411071148140.10596@DOMAIN.HIDDEN">Pine.GSO.4.60.0411071148140.10596@xxxxxxxxxxxxxxxxx</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>On Sun, 7 Nov 2004, Andre van Tonder wrote:

&gt; On Sun, 7 Nov 2004 campbell@xxxxxxxxxxxxxxxxxxxxxxxxxxx wrote:
&gt; 
&gt; &gt; It is because the implementation performs such heavy syntax-rules-based
&gt; &gt; computation that Scheme48's heap overflows.  You can 'fix' the problem
&gt; &gt; by increasing the heap, but that will solve it only temporarily.  The
&gt; &gt; real problem is that this SRFI's reference implementation just does too
&gt; &gt; much with syntax-rules;
&gt; 
&gt; I agree that it is a little silly to try to do so much with syntax-rules. 
&gt; Actually, early versions without inheritance were much simpler and very 
&gt; suitable for syntax-rules, and when it grew it took less energy each time 
&gt; to add a feature than to convert to a low-level macro system for which I 
&gt; would have to maintain a separate version for each Scheme I want to test 
&gt; it on (although I do have a partially converted but horrid-looking and 
&gt; verbose syntax-case version).
&gt; 
&gt; Also, if one version was to be posted as proof of concept, choosing 
&gt; syntax-rules was probably not entirely a bad decision.  If I had done it 
&gt; in a low-level system, I would have probably chosen define-macro 
&gt; or syntax-case, in which case it would not have run on Scheme48 at all 
&gt; without some porting.

That would not be the case had you chosen syntactic closures, which
fairly easily translate to explicit renaming and which allow much more
straightforward representation of the interaction of hygiene than
syntax-case; thus a syntax-case implementation could easily be based on
syntactic closures.

&gt; &gt; even if it doesn't overflow the heap or so
&gt; &gt; something equally horrid in other Scheme systems, it is _miserably_
&gt; &gt; sluggish.  I haven't used it much, but I've heard from some people that
&gt; &gt; it takes up to an hour to expand a single DEFINE-RECORD-TYPE form.
&gt; 
&gt; One could argue that those systems are not /usefully/ R5RS compliant. 
&gt; There is really no excuse for that kind of performance.  On Petite Chez, 
&gt; which is interpreted, expansion is instantaneous.  Even on MzScheme, 
&gt; which I regard as relatively slow, it takes of the order of only a second 
&gt; per record type definition on my modest machine.

I don't think MzScheme &amp; Petite Chez are good examples: if I'm not
mistaken, MzScheme's macro expander is written in C and Petite Chez's
is compiled with Chez, which is generally reputed to be one of the best
Scheme compilers out there.  In any case, I don't remember the details
of the expansion time -- the Scheme system used, the number of fields,
et cetera --, and my memory probably exaggerated the time somewhat; 
however, it was certainly longer than a few minutes, an unreasonable
quantity of time.

&gt; &gt; It
&gt; &gt; would be a *gargantuan* improvement to provide at least two or three
&gt; &gt; reference implementations: the original one in plain syntax-rules, one
&gt; &gt; in syntactic closures (as the most simply expressive, I argue, hygienic
&gt; &gt; macro system -- the best basis for a _reference_ implementation), and
&gt; &gt; perhaps one or two in any number of the incompatible variants of
&gt; &gt; syntax-case.
&gt; 
&gt; I completely agree.  Any volunteers?  The soon-to-appear updated version 
&gt; is a little simpler and may be easier to convert.  In the meantime I 
&gt; can send it privately to anyone upon request.  It should also not be hard 
&gt; to write a low-level implementation from scratch.

I volunteer to write a syntactic closures-based implementation, as long
as you don't mind me pestering you about details of the hygiene.

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00053" href="msg00053.html">Re: the number of fields</a></strong>
<ul><li><em>From:</em> Andre van Tonder</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00053.html">Re: the number of fields</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00055.html">Re: propositions, oppositions, and some minor details</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00053.html">Re: the number of fields</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00059.html">Draft Extension: 2005/01/08</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00054"><strong>Date</strong></a></li>
<li><a href="threads.html#00054"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>

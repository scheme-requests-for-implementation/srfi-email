<!-- MHonArc v2.6.15 -->
<!--X-Subject: Re: [Chicken&#45;users] Which eggs to migrate from Chicken 3 first? -->
<!--X-From-R13: Buvy Prjvt <corjvtNtznvy.pbz> -->
<!--X-Date: Thu,  7 May 2009 01:59:14 +0000 (UTC) -->
<!--X-Message-Id: da4fbdb30905061746m2bc5fe1dld80475c14c525715@mail.gmail.com -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: 20090422161112.GA721@mercury.ccil.org -->
<!--X-Reference: da4fbdb30904220916y46def0e6y48d69ebbe2a679d2@mail.gmail.com -->
<!--X-Reference: 20090506021620.GR11542@freaks&#45;unidos.net -->
<!--X-Reference: da4fbdb30905060732x5604d8f8n8776ae926d99abc6@mail.gmail.com -->
<!--X-Reference: m2hbzxrj3n.fsf@synthcode.com -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [Chicken-users] Which eggs to migrate from Chicken 3 first?</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00006.html">Date Prev</a>][<a href="msg00008.html">Date Next</a>][<a href="msg00006.html">Thread Prev</a>][<a href="msg00009.html">Thread Next</a>][<a href="maillist.html#00007">Date Index</a>][<a href="threads.html#00007">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [Chicken-users] Which eggs to migrate from Chicken 3 first?</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: Alex Shinn &lt;<a href="mailto:alexshinn@DOMAIN.HIDDEN">alexshinn@xxxxxxxxx</a>&gt;</li>
<li><em>Subject</em>: Re: [Chicken-users] Which eggs to migrate from Chicken 3 first?</li>
<li><em>From</em>: Phil Bewig &lt;<a href="mailto:pbewig@DOMAIN.HIDDEN">pbewig@xxxxxxxxx</a>&gt;</li>
<li><em>Date</em>: Wed, 6 May 2009 19:46:40 -0500</li>
<li><em>Cc</em>: Alejandro Forero Cuervo &lt;<a href="mailto:azul@DOMAIN.HIDDEN">azul@xxxxxxxxxxxxxxxxx</a>&gt;, <a href="mailto:srfi-41@DOMAIN.HIDDEN">srfi-41@xxxxxxxxxxxxxxxxx</a>, 	<a href="mailto:chicken-users@DOMAIN.HIDDEN">chicken-users@xxxxxxxxxx</a></li>
<li><em>Delivered-to</em>: <a href="mailto:srfi-41@DOMAIN.HIDDEN">srfi-41@xxxxxxxxxxxxxxxxx</a></li>
<li><em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed;        d=gmail.com; s=gamma;        h=domainkey-signature:mime-version:received:in-reply-to:references         :date:message-id:subject:from:to:cc:content-type;        bh=Y7fVBi6juQ3M8qIxme9DHx9wPjJpdTkyfYkH7kGmgcA=;        b=o5nYvPXCJ2Qv/EqbX7A6VcrGGRLzEugfp8Pl2NQp+ZemzEPVmSIcSX+BnjfJxYgAAo         hs6wa1fs+VvuxRUOtpbdddF7SEfqyU44OYrnwtkRUu5Cl2Ra+Hqw/DPY0+jW2OzGTwhM         r/Mvmqs0UK2Twk636F1Gz3tRN6h7ucSTAhDKw=</li>
<li><em>Domainkey-signature</em>: a=rsa-sha1; c=nofws;        d=gmail.com; s=gamma;        h=mime-version:in-reply-to:references:date:message-id:subject:from:to         :cc:content-type;        b=BG+pQqyFXyhijECQkMkPmO4O0Rp52DayOvMdiqVwfdFAZxH+lRFscS6Eemme2fE97K         N+J1U2OXL82TQlGl7CJQTKxkCApIog7sPhNueM81QUHLKwh7ixNzEJmdZS2b5hW1wrcN         3NzXTFH+/06/aZxL+85sgOjtuV5nhFmnMqV40=</li>
<li><em>In-reply-to</em>: &lt;<a href="mailto:m2hbzxrj3n.fsf@DOMAIN.HIDDEN">m2hbzxrj3n.fsf@xxxxxxxxxxxxx</a>&gt;</li>
<li><em>References</em>: &lt;<a href="mailto:20090422161112.GA721@DOMAIN.HIDDEN">20090422161112.GA721@xxxxxxxxxxxxxxxx</a>&gt;	 &lt;<a href="mailto:da4fbdb30904220916y46def0e6y48d69ebbe2a679d2@DOMAIN.HIDDEN">da4fbdb30904220916y46def0e6y48d69ebbe2a679d2@xxxxxxxxxxxxxx</a>&gt;	 &lt;<a href="mailto:20090506021620.GR11542@DOMAIN.HIDDEN">20090506021620.GR11542@xxxxxxxxxxxxxxxxx</a>&gt;	 &lt;<a href="mailto:da4fbdb30905060732x5604d8f8n8776ae926d99abc6@DOMAIN.HIDDEN">da4fbdb30905060732x5604d8f8n8776ae926d99abc6@xxxxxxxxxxxxxx</a>&gt;	 &lt;<a href="mailto:m2hbzxrj3n.fsf@DOMAIN.HIDDEN">m2hbzxrj3n.fsf@xxxxxxxxxxxxx</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<div class="gmail_quote">On Wed, May 6, 2009 at 4:56 PM, Alex Shinn <span dir="ltr">&lt;<a rel="nofollow" href="mailto:alexshinn@xxxxxxxxx">alexshinn@xxxxxxxxx</a>&gt;</span> wrote:<br><blockquote class="gmail_quote" style="border-left: 1px solid rgb(204, 204, 204); margin: 0pt 0pt 0pt 0.8ex; padding-left: 1ex;">
Hi,<br>
<div class="im"><br>
Phil Bewig &lt;<a rel="nofollow" href="mailto:pbewig@xxxxxxxxx">pbewig@xxxxxxxxx</a>&gt; writes:<br>
<br>
&gt; Streams are not lists. &#xA0;Scheme ensures there are<br>
&gt; substantial disadvantages to using streams rather than<br>
&gt; lists, due to the underlying promises that require<br>
&gt; numerous type conversions, so streams should be used only<br>
&gt; when the sequence of elements is truly infinite (such as<br>
&gt; mathematical series) or when there is some clear advantage<br>
&gt; of laziness (such as reducing the number of passes through<br>
&gt; a large data set).<br>
<br>
</div>I also find that any data structure in general which is<br>
built on I/O works well as a stream. &#xA0;For the current NLP<br>
app I&#39;m working on, I need to build a parse graph from a<br>
port. &#xA0;Slurping up the whole input at once could require too<br>
much memory, and also would prevent the parser acting as a<br>
proper (buffered) Unix filter. &#xA0;On the other hand, since the<br>
algorithm for determining how much text I need to work with<br>
is dynamic, I can&#39;t just read chunks at a time (the basic<br>
unit I want to work on is a sentence, but I don&#39;t know what<br>
a sentence is until the parse is finished). &#xA0;So I build the<br>
graph as a lazy stream of nodes, and the algorithm<br>
transparently expands only as much input as needed.<br>
<br>
From what I&#39;ve seen Alejandro also uses streams primarily<br>
with I/O - it&#39;s a very natural combination.<br>
<div class="im"></div></blockquote><div><br>You are correct that streams and parsing go well together.&#xA0; One of the examples I wrote for SRFI-41 was a parsing library based on the calculator Wadler wrote for his &#39;list of successes&#39; paper, but I dropped it because it was too long, and illustrated the list of successes technique with the eight-queens problem.<br>
<br>Parsing also works well without streams, as decades of lex/yacc users can attest. <br></div><blockquote class="gmail_quote" style="border-left: 1px solid rgb(204, 204, 204); margin: 0pt 0pt 0pt 0.8ex; padding-left: 1ex;">
<div class="im"><br>
&gt; Writing a library that duplicates SRFI-1 for streams seems<br>
&gt; to me to be folly.<br>
<br>
</div>Well, if you have streams at all, even if they are only<br>
suited to a special class of algorithms, it makes sense to<br>
provide a complete library of basic operations. &#xA0;Otherwise<br>
people will continuously reinvent the same utilities, and<br>
sometimes get them wrong.<br>
<br>
In fact, it is specifically desirable to provide an exact<br>
match of the SRFI-1 API for easy conversions and<br>
comparisons. &#xA0;In any module system with import prefixing<br>
(including Chicken 4), you can write everything with a<br>
stream- prefix and swap the backend from streams to lists<br>
with:<br>
<br>
 &#xA0;(import srfi-41)<br>
 &#xA0;(import (prefix stream-) srfi-1)<br>
<br>
Going the other direction (writing for SRFI-1 but then<br>
switching to streams) is only a little more verbose,<br>
requiring renaming of the individual identifiers you use.<br>
<div class="im"></div></blockquote><div><br>I disagree.&#xA0; Streams and lists are not substitutable.&#xA0; Haskell conflates the two because everything in Haskell is lazy, so there is no difference.&#xA0; But that isn&#39;t true in Scheme. <br>
</div><blockquote class="gmail_quote" style="border-left: 1px solid rgb(204, 204, 204); margin: 0pt 0pt 0pt 0.8ex; padding-left: 1ex;"><div class="im"><br>
&gt; Some certainly don&#39;t belong in a general-purpose library<br>
&gt; -- if you need symbol-&gt;stream to convert the name of a<br>
&gt; symbol into a stream of characters, you can write it as<br>
&gt; part of your program.<br>
<br>
</div>Sure:<br>
<br>
 &#xA0; (define (symbol-&gt;stream sym)<br>
 &#xA0; &#xA0; (string-&gt;stream (symbol-&gt;string sym)))<br>
<br>
That&#39;s just trivial and probably borderline enough that it<br>
isn&#39;t needed in the library. &#xA0;string-&gt;stream or equivalent<br>
functionality should be included, though, because the most<br>
efficient implementation of this may vary wildly depending<br>
on the Scheme implementation.<br>
<br>
However, the name may be unintuitive if you&#39;re not coming<br>
from a &quot;streams as I/O&quot; perspective. &#xA0;It may be both simpler<br>
to specify and easier to understand if you replace most of<br>
the foo-&gt;stream procedures with:<br>
<br>
 &#xA0;(write-to-character-stream object)<br>
 &#xA0;(display-to-character-stream object)<br>
<div class="im"></div></blockquote><div><br>When would it make sense to convert the name of a symbol to a stream of characters? <br></div><blockquote class="gmail_quote" style="border-left: 1px solid rgb(204, 204, 204); margin: 0pt 0pt 0pt 0.8ex; padding-left: 1ex;">
<div class="im"><br>
&gt; Many -- such as stream-butlast -- make sense only for<br>
&gt; lists (which are materialized in their entirety) and not<br>
&gt; for streams (which may never be materialized).<br>
<br>
</div>I think it&#39;s a little unfair to pick on stream-butlast when<br>
SRFI-41 includes stream-length, stream-&gt;list,<br>
stream-reverse, etc. &#xA0;As you yourself say, not all streams<br>
are infinite, and for finite streams these can be useful.<br>
Otherwise you&#39;ll repeatedly find people who when working<br>
entirely with streams (for type signature compatibility, and<br>
because all of their utilities are designed for streams, not<br>
lists), write things like<br>
<br>
 &#xA0;(list-&gt;stream (butlast (stream-&gt;list stream)))<br>
<br>
when they really do need all but the last element of a<br>
stream they know to be finite.<br>
<br>
[I would argue the name and API should be changed to<br>
stream-drop-right to match SRFI-1, though.]</blockquote><div><br>Stream-length and stream-reverse are certainly candidates to be dropped from a stream library.&#xA0; I&#39;m not entirely sure how I feel about them.<br><br>You and Alejandro seem to be suggesting that you would use streams in preference to lists in a variety of programs.&#xA0; Take as given that streams will be much slower than lists, at least in current Scheme implementations.&#xA0; I can&#39;t imagine using streams for much more than toy programs or academic exercises.&#xA0; I would always find a better way. <br>
</div><blockquote class="gmail_quote" style="border-left: 1px solid rgb(204, 204, 204); margin: 0pt 0pt 0pt 0.8ex; padding-left: 1ex;"><br>
<br>
Now, if you want to argue that the SRFI-1 API is too large,<br>
that&#39;s another story :)</blockquote><div><br>It is.&#xA0; I never use SRFI-1.&#xA0; My personal standard library has take, drop, take-while, drop-while, range, iterate, filter, zip, a simple list comprehension macro, and pattern matching. <br>
</div><blockquote class="gmail_quote" style="border-left: 1px solid rgb(204, 204, 204); margin: 0pt 0pt 0pt 0.8ex; padding-left: 1ex;"><br>
<br>
--<br>
<font color="#888888">Alex</font></blockquote><div><br>I continue to maintain that it makes no sense to use SRFI-1 as a checklist for implementing a streams extension library.&#xA0; I hate to keep repeating myself, but streams are not lists.&#xA0; The two data types are used in two entirely different sets of circumstances, with different usage patterns.<br>
<br>All that said, if you want to write a streams-ext library that mimics SRFI-1, feel free.&#xA0; Just be sure it is based on SRFI-41, not SRFI-40.&#xA0; If you are concerned that there is some conflict between the old streams-ext and the streams-derived of SRFI-41, and don&#39;t mind using the same name for two different things, you can build streams-ext on top of streams-primitive and provide exactly what you want. <br>
</div></div><br>Phil<br>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00005" href="msg00005.html">Re: [Chicken-users] Which eggs to migrate from Chicken 3 first?</a></strong>
<ul><li><em>From:</em> Phil Bewig</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00006.html">Re: [Chicken-users] Which eggs to migrate from Chicken 3 first?</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00008.html">Re: [Chicken-users] Which eggs to migrate from Chicken 3 first?</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00006.html">Re: [Chicken-users] Which eggs to migrate from Chicken 3 first?</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00009.html">Re: [Chicken-users] Which eggs to migrate from Chicken 3 first?</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00007"><strong>Date</strong></a></li>
<li><a href="threads.html#00007"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>

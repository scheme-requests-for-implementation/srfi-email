<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: making indentation marker &#38;| implicit -->
<!--X-From-R13: Oyrk Euvaa <nyrkfuvaaNtznvy.pbz> -->
<!--X-Date: Tue, 28 May 2013 04:03:02 +0200 (MST) -->
<!--X-Message-Id: CAMMPzYNQ79dOWmx0jnix2=YWjpxXDGN2FqSxB16oeUSMfNL=Wg@mail.gmail.com -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: 51A403B1.4060102@bothner.com -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: making indentation marker &amp;| implicit</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00072.html">Date Prev</a>][<a href="msg00074.html">Date Next</a>][<a href="msg00072.html">Thread Prev</a>][<a href="msg00074.html">Thread Next</a>][<a href="maillist.html#00073">Date Index</a>][<a href="threads.html#00073">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: making indentation marker &amp;| implicit</h1>
<p style="max-width: 30em;">This page is part of the web mail archives of <a href="http://srfi.schemers.org/srfi-108">SRFI 108</a> from before July 7th, 2015.  The new archives for SRFI 108 are <a href="http://srfi-email.schemers.org/srfi-108/">here</a>.  The new archives contain all messages, not just those from before July 7th, 2015.</p>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: Per Bothner &lt;<a href="mailto:per@DOMAIN.HIDDEN">per@xxxxxxxxxxx</a>&gt;</li>
<li><em>Subject</em>: Re: making indentation marker &amp;| implicit</li>
<li><em>From</em>: Alex Shinn &lt;<a href="mailto:alexshinn@DOMAIN.HIDDEN">alexshinn@xxxxxxxxx</a>&gt;</li>
<li><em>Date</em>: Tue, 28 May 2013 10:39:01 +0900</li>
<li><em>Cc</em>: <a href="mailto:srfi-108@DOMAIN.HIDDEN">srfi-108@xxxxxxxxxxxxxxxxx</a>, <a href="mailto:srfi-109@DOMAIN.HIDDEN">srfi-109@xxxxxxxxxxxxxxxxx</a></li>
<li><em>Delivered-to</em>: <a href="mailto:srfi-108@DOMAIN.HIDDEN">srfi-108@xxxxxxxxxxxxxxxxx</a></li>
<li><em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed;        d=gmail.com; s=20120113;        h=mime-version:in-reply-to:references:date:message-id:subject:from:to         :cc:content-type;        bh=JQdD4LY5VRmo8ufAxvPD4euLX48/lVMEgFRB3C5hz5g=;        b=EVM6pPDfUhD/ECc7L0hLtFLJD+PtepXt9WimPsTvbvNibinGaRXdZFScSjz12MpRvR         zNvj7YQ1yNg+3wcWcSO9wvcRayVfWvjP+2+KyyrS4ueJBcLW5K0i0KjCt8xWyUoToGeK         +0PtrSDMGXB5gvJtSnG9mF0iK/Kdh/czJtdsMbegs/cBQ1eYtLngUq4fjZpOkSgIY9q+         rx8WfP9MnYwFGLq6xBjBBelXZhpjFxdmyfCX7OwA8Jr4pLvfVJ8AFj1NmNfIknkcc3LH         lUjYRsNL9jEWVO2YtcHeT9yR6+d6IBJTMnD/HesS7gP1R97fH6axogY73vhwk4cV8XKA         jpjQ==</li>
<li><em>In-reply-to</em>: &lt;<a href="mailto:51A403B1.4060102@DOMAIN.HIDDEN">51A403B1.4060102@xxxxxxxxxxx</a>&gt;</li>
<li><em>References</em>: &lt;<a href="mailto:51A403B1.4060102@DOMAIN.HIDDEN">51A403B1.4060102@xxxxxxxxxxx</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<div dir="ltr">On Tue, May 28, 2013 at 10:09 AM, Per Bothner <span dir="ltr">&lt;<a rel="nofollow" href="mailto:per@xxxxxxxxxxx" target="_blank">per@xxxxxxxxxxx</a>&gt;</span> wrote:<br><div class="gmail_extra"><div class="gmail_quote"><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex">
I hate to delay this even more, but ...<br>
<br>
SRFI-10[789] uses &amp;| as an indentation marker, which causes<br>
any preceding whitespace to be skipped. &#xA0;Scribble avoids this<br>
in a way that seems nicer: Any indentation that is common to<br>
each line (following a newline) is stripped. &#xA0;Thus using SRFI-109<br>
syntax:<br>
(define str1 &amp;{<br>
&#xA0; abc<br>
&#xA0; &#xA0; def<br>
&#xA0; ghi}<br>
becomes: &quot;abc\n &#xA0;def\nhgi&quot;.<br>
<br>
<a rel="nofollow" href="http://docs.racket-lang.org/scribbl/reader.html" target="_blank">http://docs.racket-lang.org/<u></u>scribbl/reader.html</a><br>
(last section: 2.4.4 Spaces, Newlines, and Indentation.)<br>
<br>
&quot;Initial indentation&quot; means indentation in the source port,<br>
not the string returned by the reader.<br></blockquote><div><br></div><div style>This is the part that always bothered me, and why I didn&#39;t</div><div style>implement indentation removal. &#xA0;Many of the examples are</div>
<div style>unintuitive, and the rule itself does not seem to be consistent.</div><div style><br></div><div style>For example, the docs have</div><div style><br></div><div style><table cellspacing="0" style="color:rgb(0,0,0);font-family:serif;font-size:medium">
<tbody><tr><td style="padding-left:0px;padding-right:0px"><table cellspacing="0"><tbody><tr><td style="padding-left:0px;padding-right:0px"><p style="margin:0px"><span class="" style="background-color:rgb(238,238,238)"><span class="" style="font-family:monospace;white-space:inherit;color:rgb(204,102,51)">@foo{bar</span><span class="" style="font-family:monospace"></span></span></p>
</td></tr><tr><td style="padding-left:0px;padding-right:0px"><p style="margin:0px"><span class="" style="background-color:rgb(238,238,238)"><span class="" style="font-family:monospace">&#xA0;&#xA0;&#xA0;</span><span class="" style="font-family:monospace;white-space:inherit;color:rgb(204,102,51)">baz</span><span class="" style="font-family:monospace"></span></span></p>
</td></tr><tr><td style="padding-left:0px;padding-right:0px"><p style="margin:0px"><span class="" style="background-color:rgb(238,238,238)"><span class="" style="font-family:monospace">&#xA0;&#xA0;&#xA0;</span><span class="" style="font-family:monospace;white-space:inherit;color:rgb(204,102,51)">bbb}</span><span class="" style="font-family:monospace"></span></span></p>
</td></tr></tbody></table></td><td style="padding-left:0px;padding-right:0px"><p style="margin:0px"><span class="" style="font-family:monospace">&#xA0;&#xA0;</span>reads as<span class="" style="font-family:monospace">&#xA0;&#xA0;</span></p></td>
<td style="padding-left:0px;padding-right:0px"><table cellspacing="0" class="" style="font-family:monospace;white-space:inherit"><tbody><tr style="white-space:inherit"><td style="padding-left:0px;padding-right:0px;vertical-align:baseline;white-space:inherit">
<span class="" style="font-family:monospace;white-space:inherit;color:rgb(132,60,36)">(</span><span class="" style="font-family:monospace;white-space:inherit;color:rgb(38,38,128)">foo</span><span class="" style="font-family:monospace">&#xA0;</span><span class="" style="font-family:monospace;white-space:inherit;color:rgb(34,139,34)">&quot;bar&quot;</span><span class="" style="font-family:monospace">&#xA0;</span><span class="" style="font-family:monospace;white-space:inherit;color:rgb(34,139,34)">&quot;\n&quot;</span></td>
</tr><tr style="white-space:inherit"><td style="padding-left:0px;padding-right:0px;vertical-align:baseline;white-space:inherit"><span class="" style="font-family:monospace">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;</span><span class="" style="font-family:monospace;white-space:inherit;color:rgb(34,139,34)">&quot;baz&quot;</span><span class="" style="font-family:monospace">&#xA0;</span><span class="" style="font-family:monospace;white-space:inherit;color:rgb(34,139,34)">&quot;\n&quot;</span></td>
</tr><tr style="white-space:inherit"><td style="padding-left:0px;padding-right:0px;vertical-align:baseline;white-space:inherit"><span class="" style="font-family:monospace">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;</span><span class="" style="font-family:monospace;white-space:inherit;color:rgb(34,139,34)">&quot;bbb&quot;</span><span class="" style="font-family:monospace;white-space:inherit;color:rgb(132,60,36)">)</span></td>
</tr></tbody></table></td></tr></tbody></table></div><div style><br></div><div style>Why? &#xA0;The indentation of the leading bar is deeper in the</div><div style>source port than the following lines, yet shallower in the</div>
<div style>string. &#xA0;How does it get the same result indentation?</div><div style><br></div><div style>Unsure of the right semantics, it seemed simpler to leave</div><div style>this out since it&#39;s easy enough to specify arbitrary trimming</div>
<div style>behavior separately:</div><div style><br></div><div style>@trim{@foo{</div><div style>&#xA0; ...</div><div style>}}</div><div style><br></div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex">
Some tweaking of the Scribble rules might be appropriate.<br>
For example, line-continuations markers @- seem worth keeping.<br>
And the rules for initial and final lines needs some thought.<br>
<br>
Tabs would have to be consistent: If a line starts with<br>
T1 tabs followed by S1 spaces, and another line starts with<br>
T2 tabs followed by S2 spaces, then it is an error if<br>
(and (not (= T1 T2)) (&gt; S1 0) (&gt; S2 0)).</blockquote><div><br></div><div style>I presume you mean not an error, just not the same indentation?</div><div style><br></div><div style>&#xA0; (define (indentation&lt;? t1 s2 t2 s2)</div>
<div style>&#xA0; &#xA0; (or (&lt; t1 t2) (and (= t1 t2) (&lt; s1 s2))))</div><div><br></div><div style>Or more simply, trimming would work only on string=? prefixes</div><div style>of horizontal whitespace (tab or space).</div><div style>
<br></div><div style>... alternately just define a tab as 8 spaces.</div><div><br></div><div>--&#xA0;</div><div style>Alex</div><div style><br></div></div></div></div>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00074" href="msg00074.html">Re: making indentation marker &amp;| implicit</a></strong>
<ul><li><em>From:</em> Per Bothner</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00072" href="msg00072.html">making indentation marker &amp;| implicit</a></strong>
<ul><li><em>From:</em> Per Bothner</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00072.html">making indentation marker &amp;| implicit</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00074.html">Re: making indentation marker &amp;| implicit</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00072.html">making indentation marker &amp;| implicit</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00074.html">Re: making indentation marker &amp;| implicit</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00073"><strong>Date</strong></a></li>
<li><a href="threads.html#00073"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>

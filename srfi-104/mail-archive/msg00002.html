<!-- MHonArc v2.6.15 -->
<!--X-Subject: SRFI&#45;59 Vicinities -->
<!--X-From-R13: Rrevpx Sqqvatgba <qrevpx.rqqvatgbaNtznvy.pbz> -->
<!--X-Date: Tue, 13 Oct 2009 17:08:31 +0000 (UTC) -->
<!--X-Message-Id: 1255453702.28380.182.camel@eep -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 1254894692.11628.35.camel@eep -->
<!--X-Reference: 4ACC52B7.1090007@gmail.com -->
<!--X-Reference: 1254911744.11628.119.camel@eep -->
<!--X-Reference: 20091007173456.A8C0E51D8B0@voluntocracy.org -->
<!--X-Reference: 1254947025.11628.350.camel@eep -->
<!--X-Reference: 20091012023457.29DEB51D8B0@voluntocracy.org -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>SRFI-59 Vicinities</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00001.html">Date Prev</a>][<a href="msg00003.html">Date Next</a>][<a href="msg00001.html">Thread Prev</a>][<a href="msg00003.html">Thread Next</a>][<a href="maillist.html#00002">Date Index</a>][<a href="threads.html#00002">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>SRFI-59 Vicinities</h1>
<p style="max-width: 30em;">This page is part of the web mail archives of <a href="http://srfi.schemers.org/srfi-104">SRFI 104</a> from before July 7th, 2015.  The new archives for SRFI 104 are <a href="http://srfi-email.schemers.org/srfi-104/">here</a>.  Eventually, the entire history will be moved there, including any new messages.</p>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: Aubrey Jaffer &lt;<a href="mailto:agj@DOMAIN.HIDDEN">agj@xxxxxxxxxxxx</a>&gt;</li>
<li><em>Subject</em>: SRFI-59 Vicinities</li>
<li><em>From</em>: Derick Eddington &lt;<a href="mailto:derick.eddington@DOMAIN.HIDDEN">derick.eddington@xxxxxxxxx</a>&gt;</li>
<li><em>Date</em>: Tue, 13 Oct 2009 10:08:21 -0700</li>
<li><em>Cc</em>: <a href="mailto:srfi-104@DOMAIN.HIDDEN">srfi-104@xxxxxxxxxxxxxxxxx</a></li>
<li><em>Delivered-to</em>: <a href="mailto:srfi-104@DOMAIN.HIDDEN">srfi-104@xxxxxxxxxxxxxxxxx</a></li>
<li><em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed;        d=gmail.com; s=gamma;        h=domainkey-signature:received:received:subject:from:to:cc         :in-reply-to:references:content-type:date:message-id:mime-version         :x-mailer:content-transfer-encoding;        bh=NzNolR97/isqAarI4HcWBL1pzXa66953ZPiqVZbRIpI=;        b=DFFMAmZhccLMFViskQSvEchAu0EUKfjXrDbell+M+2GOZ6ZGmb2QMo+rpEa//ZO5Gn         JcXHmnJpCYAzB21usjthNOR8uB1g09Cr1wTXfhq+YAfjDAaj9Je4j69nGdG+9h1IJVMU         +17SI8+hZ4aXVwZJiRogb4fUcmQ7ygpoFhtiY=</li>
<li><em>Domainkey-signature</em>: a=rsa-sha1; c=nofws;        d=gmail.com; s=gamma;        h=subject:from:to:cc:in-reply-to:references:content-type:date         :message-id:mime-version:x-mailer:content-transfer-encoding;        b=FqqIHqNVeR/cPI9e9jVtwEk5UVuuOqseZAL9jXo1uZH9IOoFns0FghUCczIexD3IK0         2Y86CDYsL8ogyHt0PC7MOvptu9m5XS8lYPk4lP4+a5m3RfahnfJevOEt8PIsmEyE5qtX         5PoyPK8DpeFGPt9xzXMCqgd7QMdFZj+G6yZHs=</li>
<li><em>In-reply-to</em>: &lt;<a href="mailto:20091012023457.29DEB51D8B0@DOMAIN.HIDDEN">20091012023457.29DEB51D8B0@xxxxxxxxxxxxxxxx</a>&gt;</li>
<li><em>References</em>: &lt;<a href="mailto:1254894692.11628.35.camel@DOMAIN.HIDDEN">1254894692.11628.35.camel@eep</a>&gt;  &lt;<a href="mailto:4ACC52B7.1090007@DOMAIN.HIDDEN">4ACC52B7.1090007@xxxxxxxxx</a>&gt;	 &lt;<a href="mailto:1254911744.11628.119.camel@DOMAIN.HIDDEN">1254911744.11628.119.camel@eep</a>&gt;	 &lt;<a href="mailto:20091007173456.A8C0E51D8B0@DOMAIN.HIDDEN">20091007173456.A8C0E51D8B0@xxxxxxxxxxxxxxxx</a>&gt;	 &lt;<a href="mailto:1254947025.11628.350.camel@DOMAIN.HIDDEN">1254947025.11628.350.camel@eep</a>&gt;	 &lt;<a href="mailto:20091012023457.29DEB51D8B0@DOMAIN.HIDDEN">20091012023457.29DEB51D8B0@xxxxxxxxxxxxxxxx</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>On Sun, 2009-10-11 at 22:34 -0400, Aubrey Jaffer wrote:
&gt; | From: Derick Eddington &lt;derick.eddington@xxxxxxxxx&gt;
&gt;  | Date: Wed, 07 Oct 2009 13:23:45 -0700
&gt;  | 
&gt;  | On Wed, 2009-10-07 at 13:34 -0400, Aubrey Jaffer wrote:
&gt;  | &gt; SRFI-103 should have some text comparing SRFI-59 to SRFI-103 and
&gt;  | &gt; explaining why the conventions of SRFI-59 are inadequate to your
&gt;  | &gt; goals for SRFI-103.
&gt;  | 
&gt;  | Thanks for pointing-out SRFI-59.  I just read it for the first
&gt;  | time.  I need more time and sleep to think about it, but right now
&gt;  | I'm thinking it probably is not a fit for this SRFI, and I probably
&gt;  | can succinctly describe why in the document of this SRFI.  I'll
&gt;  | return to this topic.  (Anyone, feel free to comment about this if
&gt;  | you want while I wait.)
&gt; 
&gt; I got a chance to look at SRFI-104, and SRFI-59 is more relevant
&gt; there.  There is no fundamental reason for file paths to be Unicode
&gt; strings.

The correspondence between list-of-symbols library names and
hierarchically organizing files is central to the purpose of this SRFI
and of SRFI 103.  Using abstract vicinities and abstract file names,
instead of Unicode string-paths, is attractive because the abstraction
would support platforms where file hierarchies are not accomplished
using directories and/or where files are not named using string-paths.
List-of-symbols library names could correspond to abstract nested
vicinities such that each symbol, except for the last symbol for
&quot;non-implicit file names&quot; (in SRFI 103 terminology), corresponds to a
sub-vicinity in the vicinity corresponding to the previous symbol, or
for the first symbol, in one of the &quot;search vicinities&quot; (analog of
current SRFI 103's &quot;search paths&quot;).  

However, I still don't have a clear idea how integrating vicinities into
SRFI 103 and SRFI 104 would affect the design and goals.  Also, there
are some issues which I don't think SRFI 59 can handle (more below).  If
those issues could be handled, then I'd be interested in exploring
adopting abstract nested vicinities and abstract file names, and I'd do
an experimental reworking of the reference implementation of SRFI 104 to
help me concretely understand the details and ramifications.

&gt; The approach of SRFI-104 exposes to the programmer
&gt; file-system details like separators which would normally only be used
&gt; when gluing together paths.  

The current draft exposes the path separator on purpose, so that
string-paths using separators different than the host's can be
manipulated.  The `path-separator' parameter can be parameterized for
working with foreign string-paths.  Supporting the ability to work with
foreign string-paths seems necessary for a library of utilities for
working with SRFI 103.  E.g., a program running on a Unix-like host may
want to work with Windows string-paths.

The current draft does not have a reason for exposing the environment
variable separator.  Exposing it is left over from a prior stage of the
evolution of the design when the library needed to be manually
initialized.  Now, the library is automatically initialized, so there is
no longer any reason for exposing the environment variable separator.  I
will remove `environment-variable-separator', in the next revision.
Thank you for helping clean this up.

&gt; Furthermore, several operating-systems'
&gt; file-systems have more than one possible separator:
&gt; 
&gt; (define vicinity:suffix?
&gt;   (let ((suffi
&gt; 	 (case (software-type)
&gt; 	   ((amiga)			'(#\: #\/))
&gt; 	   ((macos thinkc)		'(#\:))
&gt; 	   ((ms-dos windows atarist os/2) '(#\\ #\/))
&gt; 	   ((nosve)			'(#\: #\.))
&gt; 	   ((unix coherent plan9)	'(#\/))
&gt; 	   ((vms)			'(#\: #\]))
&gt; 	   (else
&gt; 	    (slib:warn &quot;require.scm&quot; 'unknown
&gt; 	    	       'software-type (software-type))
&gt; 	    &quot;/&quot;))))
&gt;     (lambda (chr) (and (memv chr suffi) #t))))

Would a string-path for any OSs with multiple separators ever contain
different separators?  E.g., &quot;search/path\\foo/bar\\zab.sls&quot;?  If so,
then that is a problem for the current draft, because only the same
separator per string-path is supported.  Different separators is
supported via parameterizing `path-separator', but that only allows
using different separators for different string-paths, not for the same
string-path.  This SRFI could be modified so that `path-separator'
becomes `path-separators', which is a list of characters, any of which
separate components of a string-path, and only the first of which is
used for constructing string-paths.

&gt; Vicinities can be strings or some other datatype depending on the
&gt; hosting operating-system.  Vicinity operations are higher level than
&gt; string operations, incorporating the separators and file-system
&gt; conventions.  

This is attractive.  But...

&gt; So I think SRFI-104 could benefit from building on
&gt; SRFI-59.

SRFI 59 does not support working with vicinities of foreign hosts.  If
this SRFI was based on SRFI 59, it could not support working with
foreign string-paths.

SRFI 59 does not have &quot;without vicinity&quot; nor &quot;super vicinity&quot; nor
&quot;vicinity name&quot; operators.  If this SRFI was based on SRFI 59, it could
not support the `library-file-path-info' procedure (which I suppose
would be renamed to `library-file-name-info'), because it could not be
implemented because implementing it requires those operators.  SRFI 59's
`pathname-&gt;vicinity' is inadequate because implementing
`library-file-name-info' in terms of abstract file names and abstract
vicinities needs to be like:

(define (library-file-name-info fn)
  (let loop ((v (pathname-&gt;vicinity fn))
             (parts (list (without-vicinity fn))))
    (if v
      (loop (super-vicinity v)
            (cons (vicinity-name v) parts))
      (do-the-rest parts))))

But that's not possible with SRFI 59.

-- 
: Derick
----------------------------------------------------------------

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00001" href="msg00001.html">Re: SRFI-59, SLIB, and SCHEME_LIBRARY_PATH</a></strong>
<ul><li><em>From:</em> Aubrey Jaffer</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00001.html">Re: SRFI-59, SLIB, and SCHEME_LIBRARY_PATH</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00003.html">New revision of SRFI 104</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00001.html">Re: SRFI-59, SLIB, and SCHEME_LIBRARY_PATH</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00003.html">New revision of SRFI 104</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00002"><strong>Date</strong></a></li>
<li><a href="threads.html#00002"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>

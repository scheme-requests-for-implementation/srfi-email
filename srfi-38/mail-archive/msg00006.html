<!-- MHonArc v2.6.15 -->
<!--X-Subject: Re: circular <= shared -->
<!--X-From-R13: orne <orneNfbavp.arg> -->
<!--X-Date: Tue, 17 Dec 2002 16:02:21 +0100 (NFT) -->
<!--X-Message-Id: Pine.LNX.4.40.0212170645150.9587&#45;100000@bolt.sonic.net -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 3DFEE721.4090302@sorted.org -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: circular &lt;= shared</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00005.html">Date Prev</a>][<a href="msg00007.html">Date Next</a>][<a href="msg00001.html">Thread Prev</a>][<a href="msg00008.html">Thread Next</a>][<a href="maillist.html#00006">Date Index</a>][<a href="threads.html#00006">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: circular &lt;= shared</h1>
<p style="max-width: 30em;">This page is part of the web mail archives of <a href="http://srfi.schemers.org/srfi-38">SRFI 38</a> from before July 7th, 2015.  The new archives for SRFI 38 are <a href="http://srfi-email.schemers.org/srfi-38/">here</a>.  Eventually, the entire history will be moved there, including any new messages.</p>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: Matthias Radestock &lt;<a href="mailto:matthias@DOMAIN.HIDDEN">matthias@xxxxxxxxxx</a>&gt;</li>
<li><em>Subject</em>: Re: circular &lt;= shared</li>
<li><em>From</em>: bear &lt;<a href="mailto:bear@DOMAIN.HIDDEN">bear@xxxxxxxxx</a>&gt;</li>
<li><em>Date</em>: Tue, 17 Dec 2002 07:02:19 -0800 (PST)</li>
<li><em>Cc</em>: <a href="mailto:srfi-38@DOMAIN.HIDDEN">srfi-38@xxxxxxxxxxxxxxxxx</a></li>
<li><em>Delivered-to</em>: <a href="mailto:srfi-38@DOMAIN.HIDDEN">srfi-38@xxxxxxxxxxxxxxxxx</a></li>
<li><em>In-reply-to</em>: &lt;<a href="mailto:3DFEE721.4090302@DOMAIN.HIDDEN">3DFEE721.4090302@xxxxxxxxxx</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>

On Tue, 17 Dec 2002, Matthias Radestock wrote:

&gt;The SRFI fails to distinguish between sharing and circularities. This is
&gt;important because R5RS *does* specify how non-circular shared structures
&gt;should be written/displayed(*). For instance
&gt;  (define x (cons #f #f))
&gt;  (define y (cons 1 1))
&gt;  (set-car! x y)
&gt;  (set-cdr! x y)
&gt;  (write x)
&gt;should produce
&gt;  ((1 . 1) 1 . 1)
&gt;when written in an R5RS-conformant system, and *not*
&gt;  (#0=(1 . 1) . #0#)

You may be correct about the implementation of (write), but
part of the point of (write-showing-shared) is that sharing,
including but not limited to circularity, ought to be detected
and written in a form that's recoverable.

&gt;iirc, Al Petrofsky posted an algorithm that detects circularities
&gt;without also catching sharing. It has higher computational complexity
&gt;and is harder to implement than detecting all sharing.

Numbers are not interesting (in the sense of the (interesting?)
subfunction in the reference implementation), because they may
have an (eq?) relationship whenever they are (eqv?).

However, (eq?) relationships on strings, etc. even if they don't
involve circularities in cons-cell structure, should be preserved
by the output.  Since the objective of the SRFI is capturing eq?
relationships (including but not limited to circularities) as
structures are output, I will have to go to the implementation
and look at the (Interesting?) function to make sure they do get
caught.

&gt;(*) Arguably, R5RS even specifies how circular structures should be
&gt;written - as infinite outputs.

That is a behavior that's somewhat hard to implement and cope
with; at some point you'd be getting back a &quot;string&quot; which is
really a port, with an attached output-generating function so
that you could read it forever on a lazy basis.  It would
require low-level twiddles and hacks deep into the guts of
implementations, and I think I'd rather avoid writing a
coherent document for it right now.

				Bear






</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00008" href="msg00008.html">Re: circular &lt;= shared</a></strong>
<ul><li><em>From:</em> Matthias Radestock</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00001" href="msg00001.html">circular &lt;= shared</a></strong>
<ul><li><em>From:</em> Matthias Radestock</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00005.html">Re: Output port?</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00007.html">Re: short or long names</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00001.html">circular &lt;= shared</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00008.html">Re: circular &lt;= shared</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00006"><strong>Date</strong></a></li>
<li><a href="threads.html#00006"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>

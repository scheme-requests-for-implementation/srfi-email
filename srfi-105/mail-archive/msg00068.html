<!-- MHonArc v2.6.16 -->
<!--X-Subject: The "infix.plt" package -->
<!--X-From-R13: "Rnivq O. Iurryre" <qjurryreNqjurryre.pbz> -->
<!--X-Date: Wed,  5 Sep 2012 21:49:13 +0000 (UTC) -->
<!--X-Message-Id: E1T9NTD&#45;0007Aq&#45;0r@fenris.runbox.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: CABefVgzkJbkpshiYbY8KW6=65GtajHqU=e0qB7v5azMrENkfLQ@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>The &quot;infix.plt&quot; package</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00067.html">Date Prev</a>][<a href="msg00069.html">Date Next</a>][<a href="msg00074.html">Thread Prev</a>][<a href="msg00076.html">Thread Next</a>][<a href="maillist.html#00068">Date Index</a>][<a href="threads.html#00068">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>The &quot;infix.plt&quot; package</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: <a href="mailto:srfi-105@DOMAIN.HIDDEN">srfi-105@xxxxxxxxxxxxxxxxx</a></li>
<li><em>Subject</em>: The &quot;infix.plt&quot; package</li>
<li><em>From</em>: &quot;David A. Wheeler&quot; &lt;<a href="mailto:dwheeler@DOMAIN.HIDDEN">dwheeler@xxxxxxxxxxxx</a>&gt;</li>
<li><em>Date</em>: Wed, 05 Sep 2012 17:49:11 -0400 (EDT)</li>
<li><em>Delivered-to</em>: <a href="mailto:srfi-105@DOMAIN.HIDDEN">srfi-105@xxxxxxxxxxxxxxxxx</a></li>
<li><em>In-reply-to</em>: &lt;<a href="mailto:CABefVgzkJbkpshiYbY8KW6%3D65GtajHqU%3De0qB7v5azMrENkfLQ@DOMAIN.HIDDEN">CABefVgzkJbkpshiYbY8KW6=65GtajHqU=e0qB7v5azMrENkfLQ@xxxxxxxxxxxxxx</a>&gt;</li>
<li><em>References</em>: &lt;<a href="mailto:CABefVgzkJbkpshiYbY8KW6%3D65GtajHqU%3De0qB7v5azMrENkfLQ@DOMAIN.HIDDEN">CABefVgzkJbkpshiYbY8KW6=65GtajHqU=e0qB7v5azMrENkfLQ@xxxxxxxxxxxxxx</a>&gt;</li>
<li><em>Reply-to</em>: <a href="mailto:dwheeler@DOMAIN.HIDDEN">dwheeler@xxxxxxxxxxxx</a></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>All:

I plan to add comments about the &quot;infix.plt&quot; package documented here:
&gt; <a  rel="nofollow" href="http://planet.racket-lang.org/package-source/soegaard/infix.plt/1/0/planet-docs/manual/index.html">http://planet.racket-lang.org/package-source/soegaard/infix.plt/1/0/planet-docs/manual/index.html</a>

I think curly-infix-expressions are a better approach than &quot;infix.plt&quot;, but infix.plt has its appeals, and it is certainly better than NOT having an infix notation.  If nothing else, I think the existence of all these &quot;infix&quot; packages shows that there is a pent-up desire to have support for infix operations.

Below is my draft addition to the rationale about the Racket infix.plt package, justifying why I think curly-infix is better.  I don't anticipate universal agreement, but I think it's important to compare-and-contrast to a few alternatives, and this is a worthy alternative to discuss.

--- David A. Wheeler


&lt;h2&gt;&lt;a name=&quot;rationale_racket_infix_plt&quot;&gt;What about the Racket infix.plt package?&lt;/a&gt;&lt;/h2&gt;

&lt;p&gt;
The
&lt;a href=&quot;<a  rel="nofollow" href="http://planet.racket-lang.org/display.ss?package=infix.plt&amp;owner=soegaard&quot">http://planet.racket-lang.org/display.ss?package=infix.plt&amp;owner=soegaard&quot</a>;&gt; &amp;#8220;Infix Expressions for PLT Scheme&amp;#8221; package by
Jens Axel S&#xF8;gaard&lt;/a&gt;, called here the &amp;#8220;Racket infix.plt&amp;#8221; package,
provides an infix notation for PLT Scheme (now called Racket).
The
&lt;a href=&quot;<a  rel="nofollow" href="http://planet.racket-lang.org/package-source/soegaard/infix.plt/1/0/planet-docs/manual/index.html&quot">http://planet.racket-lang.org/package-source/soegaard/infix.plt/1/0/planet-docs/manual/index.html&quot</a>;&gt;manual for the Racket infix.plt package&lt;/a&gt;
lists a number of examples and constructs.
&lt;/p&gt;

&lt;p&gt;
In this approach, the 3-character sequence &amp;#8220;@${&amp;#8220; begins an infix expression,
which switches to a completely different language that
ends with a matching &amp;#8220;}&amp;#8221;.
The &lt;a href=&quot;<a  rel="nofollow" href="http://planet.racket-lang.org/package-source/soegaard/infix.plt/1/0/parser.ss&quot">http://planet.racket-lang.org/package-source/soegaard/infix.plt/1/0/parser.ss&quot</a>;&gt;parser.ss source code&lt;/a&gt; defines the grammar of this
language as follows:
&lt;/p&gt;

&lt;pre&gt;
&amp;lt;e&amp;gt; :== &amp;lt;num&amp;gt;
     |  &amp;lt;id&amp;gt;                   variable reference
     |  &amp;lt;e&amp;gt; [ &amp;lt;args&amp;gt; ]         application
     |  { &amp;lt;args&amp;gt; }             list construction
     |  &amp;lt;e&amp;gt; + &amp;lt;e&amp;gt;              addition
     |  &amp;lt;e&amp;gt; - &amp;lt;e&amp;gt;              subtraction
     |  &amp;lt;e&amp;gt; * &amp;lt;e&amp;gt;              multiplication
     |  &amp;lt;e&amp;gt; / &amp;lt;e&amp;gt;              division
     |  &amp;lt;e&amp;gt; ^ &amp;lt;e&amp;gt;              exponentiation
     |  - &amp;lt;e&amp;gt;                  negation
     | ( &amp;lt;e&amp;gt; )                 grouping

&amp;lt;id&amp;gt;   An identifier begins with a letter,
       and is optionally followed by series of letters, digits or underscores.
       An underscore is converted to a -. Thus list_ref will refer to list-ref.

&amp;lt;num&amp;gt;  A number is an non-empty series of digits,
       optionally followed by a period followed by a series of digits.
&lt;/pre&gt;
&lt;p&gt;
There are some advantages of this approach.
It provides precedence of * and /
over + and -, infix operators need not be separated by whitespace,
and it builds in a simple assignment statement if you want it.
Like many infix notations (including curly-infix), for many expressions
the infix.plt package is a far clearer notation than the
traditional s-expression.
&lt;/p&gt;

&lt;p&gt;
However, there are many negatives to the infix.plt approach:
&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
Because it has a fixed built-in grammar,
only a few fixed symbols can be used as infix operators; you cannot use
any other symbol such as &lt;samp&gt;eq?&lt;/samp&gt; as an infix operator.
For example, &lt;samp&gt;and&lt;/samp&gt; and &lt;samp&gt;or&lt;/samp&gt;
are not supported as infix operators, yet they are also commonly
used in infix position in other languages.
More generally, it demonstrates a basic problem with fixing the set
of operators in a notation: Scheme (like all Lisps) allows for easy
creation of new procedures and macros.
An infix notation should make it easy to &lt;em&gt;use&lt;/em&gt; those
procedures and macros, in whatever position is most natural,
and even if they have not been defined yet.
&lt;/li&gt;
&lt;li&gt;There seems to be no provision for Scheme capabilities
such as quoting and quasiquoting; a quasiquoted variable does not seem to
be allowed.
&lt;/li&gt;
&lt;li&gt;
Many variables and operators cannot be referred to, and some that can
must be spelled differently (and thus inconsistently).
Identifiers (which are also used for function names) must
&amp;#8220;begin with a letter, and is optionally followed by series of letters,
digits or underscores.  An underscore is converted to a -&amp;#8221;.
Thus, it is not possible to call procedures with names like
&amp;#8220;char?=&amp;#8221;,
variables with &amp;#8220;*&amp;#8221; embedded in them likewise cannot be referenced.
In short, many identifiers are inaccessible to this notation, either
as variables or as procedure names.
The approach does references to variable names with &amp;#8220;-&amp;#8221;,
but the names must be spelled differently (and thus inconsistently,
namely, variables like &amp;#8220;list-ref&amp;#8221; must be spelled &amp;#8220;list_ref&amp;#8221;).
This approach also
makes it impossible to refer to variables with underscores in them.
These are fundamental side-effects of not requiring infix operators
to be delimited,
and cannot be changed without a significant change to the notation.
&lt;/li&gt;
&lt;li&gt;
The notation is completely different and inconsistent
with the surrounding Lisp notation.
The curly braces {...} are suddenly used for list creation operation,
square brackets x[...] are used for function application, and
(...) is used for grouping (not for list creation).
This can create confusion, since the same symbol can have a completely
different meaning, and that confusion could easily lead to
hard-to-find errors.
&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;
Note that an implementation could support both curly-infix and
the Racket infix.plt package simultaneously.
&lt;/p&gt;

&lt;p&gt;
Like the Racket &amp;#8220;infix convention&amp;#8221;,
the infix.plt package does demonstrate that there is a &lt;em&gt;need&lt;/em&gt; for
an infix notation that can be used in Scheme.
&lt;/p&gt;

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00067.html">Re: Do we NEED a marker at all?</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00069.html">Re: Do we NEED a marker at all?</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00074.html">Re: The meaning of braces in various Schemes</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00076.html">#!curly-infix vs. #!srfi-105</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00068"><strong>Date</strong></a></li>
<li><a href="threads.html#00068"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>

<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: SRFI 105: Curly&#45;infix&#45;expressions -->
<!--X-From-R13: Oyna [nahry Uybevn <nyzxtybeNtznvy.pbz> -->
<!--X-Date: Sun, 26 Aug 2012 23:59:48 +0000 (UTC) -->
<!--X-Message-Id: CAF+kUQW&#45;ZmFuGHj0izXCK=pSVatkO92uPV4OHuTqg4m7G+bhWg@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: CAF+kUQVtcLe&#45;Ju3tUua+7UMxpqehu&#45;3xT&#45;dQZCBui9U94Qk&#45;cA@mail.gmail.com -->
<!--X-Reference: 20120826214418.GA4966@mercury.ccil.org -->
<!--X-Reference: CAF+kUQXAN_D=T7dvBXUGg8X=h&#45;hwzM5uCcBDAaaZG0BEo3BNLA@mail.gmail.com -->
<!--X-Reference: 20120826223943.GB4966@mercury.ccil.org -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: SRFI 105: Curly-infix-expressions</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00008.html">Date Prev</a>][<a href="msg00010.html">Date Next</a>][<a href="msg00008.html">Thread Prev</a>][<a href="msg00010.html">Thread Next</a>][<a href="maillist.html#00009">Date Index</a>][<a href="threads.html#00009">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: SRFI 105: Curly-infix-expressions</h1>
<p style="max-width: 30em;">This page is part of the web mail archives of <a href="http://srfi.schemers.org/srfi-105">SRFI 105</a> from before July 7th, 2015.  The <a href="http://srfi-email.schemers.org/srfi-105">new archives</a> for SRFI 105 contain all messages, not just those from before July 7th, 2015.</p>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: John Cowan &lt;<a href="mailto:cowan@DOMAIN.HIDDEN">cowan@xxxxxxxxxxxxxxxx</a>&gt;</li>
<li><em>Subject</em>: Re: SRFI 105: Curly-infix-expressions</li>
<li><em>From</em>: Alan Manuel Gloria &lt;<a href="mailto:almkglor@DOMAIN.HIDDEN">almkglor@xxxxxxxxx</a>&gt;</li>
<li><em>Date</em>: Mon, 27 Aug 2012 07:59:47 +0800</li>
<li><em>Cc</em>: <a href="mailto:srfi-105@DOMAIN.HIDDEN">srfi-105@xxxxxxxxxxxxxxxxx</a></li>
<li><em>Delivered-to</em>: <a href="mailto:srfi-105@DOMAIN.HIDDEN">srfi-105@xxxxxxxxxxxxxxxxx</a></li>
<li><em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed;        d=gmail.com; s=20120113;        h=mime-version:in-reply-to:references:date:message-id:subject:from:to         :cc:content-type;        bh=MDO0SaJakVrA6QkGDrsFW3F6gHKf/nh6bD1V7uct0iU=;        b=0gBCSJjHoyIWYv1yhDA9hWddQELwuOeMSi8rvrqx/QfI97IrUQKwQMaNbURHwBzKAI         2rAbuSw6vOTmFhB4EUDwAt/rwogGR/WhEDWcBIjDhvf7D/KnR2wIycAjQzcmy5/5SOl2         pPjUwKz/e1eOvj1L7m7sXerhIbKFjS0cp+XwavlE95V4y3mRhLN85pLL7c/zfcve6Hc7         DDdybjt42OCrODaT8FZ93eAH3MKMYn8m6f8UdsM6VKeDMiKNDV4jRrmc9ruqQ4v6O8nU         BjxbpUMB6w3XildIAgIP4MSklAy/yo+/2KJrmZ3xmvaa4IeIlW4Xk4cqds6/bux6MRD7         zTpA==</li>
<li><em>In-reply-to</em>: &lt;<a href="mailto:20120826223943.GB4966@DOMAIN.HIDDEN">20120826223943.GB4966@xxxxxxxxxxxxxxxx</a>&gt;</li>
<li><em>References</em>: &lt;<a href="mailto:CAF%2BkUQVtcLe-Ju3tUua%2B7UMxpqehu-3xT-dQZCBui9U94Qk-cA@DOMAIN.HIDDEN">CAF+kUQVtcLe-Ju3tUua+7UMxpqehu-3xT-dQZCBui9U94Qk-cA@xxxxxxxxxxxxxx</a>&gt;	&lt;<a href="mailto:20120826214418.GA4966@DOMAIN.HIDDEN">20120826214418.GA4966@xxxxxxxxxxxxxxxx</a>&gt;	&lt;<a href="mailto:CAF%2BkUQXAN_D%3DT7dvBXUGg8X%3Dh-hwzM5uCcBDAaaZG0BEo3BNLA@DOMAIN.HIDDEN">CAF+kUQXAN_D=T7dvBXUGg8X=h-hwzM5uCcBDAaaZG0BEo3BNLA@xxxxxxxxxxxxxx</a>&gt;	&lt;<a href="mailto:20120826223943.GB4966@DOMAIN.HIDDEN">20120826223943.GB4966@xxxxxxxxxxxxxxxx</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>On Mon, Aug 27, 2012 at 6:39 AM, John Cowan &lt;cowan@xxxxxxxxxxxxxxxx&gt; wrote:
&gt; Alan Manuel Gloria scripsit:
&gt;
&gt;&gt; The implementation *must not*, by default, bind the symbol `nfx`
&gt;&gt; to a procedure or macro; this symbol is reserved for use by library
&gt;&gt; writers and application writers.
&gt;
&gt; That still seems unnecessary to me.  In a library-based implementation,
&gt; it makes no difference; in a flat namespace, the name can be overridden.

Okay, how can we best express the idea that &quot;this SRFI does *not*
mandate that implementations provide a precedence system via
nfx, and implementations should generally reserve the nfx symbol
for use by library writers and application writers&quot;?

nfx is a hook for users of the implementation.  That's what we want to
express.  Can you suggest a better way of saying it other than &quot;this
symbol is reserved for use by library writers and application writers&quot;?

Remember that this was inserted in response to Aubrey Jaffer worrying
that implementations are somehow allowed to *ipso facto* mandate a
particular precedence by providing an nfx implementation in the core
bindings of that implementation,  We the authors of the SRFI did not
intend nfx to be used in this manner: our intent was that nfx would
be used by library writers and application writers.

--

For that matter, I personally (almkglor) think that
curly-infix cannot, in practice, be *reliably* implemented
as a library on many actual Scheme implementations.

Our first implementation was on Guile.  On Guile 2.0, however, I
(almkglor) found that turning off autocompilation *disabled* the
curly-infix reader when loading a *module* (but not when using
'load or entering into the REPL).  This was exceedingly
strange behavior, as it worked perfectly fine with autocompilation
*enabled*.

It turns out that the module-loading code in the C side of 2.0 -
which is used *only* when autocompilation is turned off - called
the C implementation of read *directly*; rebinding 'read did *not* work
for this case.  When autocompilation is turned on, Guile 2.0
had this system for managing &quot;languages&quot;, which was implemented
mostly in Scheme, so rebinding 'read *did* work for the autocompilation
case.

In Guile 1.8 the C code for module loading correctly referred to
the Scheme binding for 'read, so this bug was not discovered by
David A. Wheeler, who uses Guile 1.8 exclusively.

--

Another reason for mandating this is the above experience.

Rebinding 'read did not work for some edge case on an actual
Scheme implementation (Guile 2.0).  So I think that it's
possible that a similar mistake may be committed by another
Scheme implementation if they make a core binding for
`nfx`.  For instance, they might make their `nfx` a syntax
recognized by their interpreter or translator, in much the same
way that it's not possible to change the syntax of `lambda` by
rebinding its macro binding.

Specifically mentioning that `nfx` is intended for use by library
writers and application writers should help Scheme implementations
ensure that rebinding and/or limiting the scope of `nfx` does
work properly, as intended in this SRFI.

Sincerely,
AmkG

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00004" href="msg00004.html">Re: SRFI 105: Curly-infix-expressions</a></strong>
<ul><li><em>From:</em> Alan Manuel Gloria</li></ul></li>
<li><strong><a name="00005" href="msg00005.html">Re: SRFI 105: Curly-infix-expressions</a></strong>
<ul><li><em>From:</em> John Cowan</li></ul></li>
<li><strong><a name="00007" href="msg00007.html">Re: SRFI 105: Curly-infix-expressions</a></strong>
<ul><li><em>From:</em> Alan Manuel Gloria</li></ul></li>
<li><strong><a name="00008" href="msg00008.html">Re: SRFI 105: Curly-infix-expressions</a></strong>
<ul><li><em>From:</em> John Cowan</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00008.html">Re: SRFI 105: Curly-infix-expressions</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00010.html">Re: SRFI 105: Curly-infix-expressions</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00008.html">Re: SRFI 105: Curly-infix-expressions</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00010.html">Re: SRFI 105: Curly-infix-expressions</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00009"><strong>Date</strong></a></li>
<li><a href="threads.html#00009"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>

<!-- MHonArc v2.6.16 -->
<!--X-Subject: Two minor last&#45;minute tweaks -->
<!--X-From-R13: [nex V Irnire <zujNargevf.bet> -->
<!--X-Date: Fri, 19 Oct 2012 02:29:50 +0000 (UTC) -->
<!--X-Message-Id: 87sj9bnqia.fsf@tines.lan -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Two minor last-minute tweaks</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00143.html">Date Prev</a>][<a href="msg00145.html">Date Next</a>][<a href="msg00143.html">Thread Prev</a>][<a href="msg00145.html">Thread Next</a>][<a href="maillist.html#00144">Date Index</a>][<a href="threads.html#00144">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Two minor last-minute tweaks</h1>
<p style="max-width: 30em;">This page is part of the web mail archives of <a href="http://srfi.schemers.org/srfi-105">SRFI 105</a> from before July 7th, 2015.  The new archives for SRFI 105 are <a href="http://srfi-email.schemers.org/srfi-105/">here</a>.  The new archives contain all messages, not just those from before July 7th, 2015.</p>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: <a href="mailto:srfi-105@DOMAIN.HIDDEN">srfi-105@xxxxxxxxxxxxxxxxx</a></li>
<li><em>Subject</em>: Two minor last-minute tweaks</li>
<li><em>From</em>: Mark H Weaver &lt;<a href="mailto:mhw@DOMAIN.HIDDEN">mhw@xxxxxxxxxx</a>&gt;</li>
<li><em>Date</em>: Thu, 18 Oct 2012 22:29:33 -0400</li>
<li><em>Delivered-to</em>: <a href="mailto:srfi-105@DOMAIN.HIDDEN">srfi-105@xxxxxxxxxxxxxxxxx</a></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>First, a small typo:

 6. These MUST recurse within lists and vectors, so any list or vector
    in a position that accepts a neoteric expression MUST accept a
    sequence of zero or more neoteric expressions, not just
    s-expressions. (Note that this occurs if they are directly or
    directly within a curly-infix list or a neoteric-expression.) [...]
    ^^^^^^^^

Presumably that should be &quot;directly or indirectly&quot;, not &quot;directly or
directly&quot;.

    An implementation of this SRFI MUST accept the marker #!curly-infix
    followed by a whitespace character in its standard datum readers
    (e.g., read and, if applicable, the default implementation
    REPL). This marker (including the trailing whitespace character)
    MUST be consumed and considered whitespace. After reading this
    marker, the reader MUST accept curly-infix expressions in subsequent
    datums until it reaches an end-of-file or some other conflicting
    marker (no conflicting marker is specified here).

I'd prefer to change the language &quot;[...] in subsequent datums until it
reaches an end-of-file [...]&quot; to something closer to &quot;[...] in
subsequent datums read from the same port [...]&quot;.  This is based on the
text in section 2.1 of R7RS (draft 6) that describes #!fold-case and
#!no-fold-case:

    #!fold-case
    #!no-fold-case
    
    These directives may appear anywhere comments are per- mitted (see
    section 2.2) and are treated as comments, except that they affect
    the reading of subsequent data.  The #!fold-case directive causes
    the read procedure to case-fold (as if by string-foldcase; see
    section 6.7) each identifier and character name subsequently read
    from the same port. (It has no effect on character literals.) The
    #!no-fold-case directive causes the read procedure to return to the
    default, non-folding behavior.

There is a functional difference between the two formulations when
reading from a terminal.  On POSIX systems, a terminal device will
return EOF when CTRL-D is pressed, but then subsequent reads may
continue to read more data.

This raises the question of whether the #!curly-infix read option should
be reset to the Scheme implementation default when CTRL-D is pressed at
a terminal.  I interpret the current language to mean that the flag
should be reset, but I would prefer that the flag retains its setting as
long as the port exists.

Following the R7RS language also simplifies the handling of reader
directives by giving them uniform behavior, and also makes it crystal
clear that the flag should be set on a per-port basis (as opposed to a
global flag for the process or thread).

What do you think?

    Regards,
      Mark

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00145" href="msg00145.html">Re: Two minor last-minute tweaks</a></strong>
<ul><li><em>From:</em> David A. Wheeler</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00143.html">Add explanation about unprefixed brackets</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00145.html">Re: Two minor last-minute tweaks</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00143.html">Add explanation about unprefixed brackets</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00145.html">Re: Two minor last-minute tweaks</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00144"><strong>Date</strong></a></li>
<li><a href="threads.html#00144"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>

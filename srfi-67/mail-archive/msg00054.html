<!-- MHonArc v2.6.15 -->
<!--X-Subject: default ordering of vectors -->
<!--X-From-R13: Eronfgvna Stare <fronfgvna.rtareNcuvyvcf.pbz> -->
<!--X-Date: Fri, 22 Jul 2005 17:34:50 +0200 (DFT) -->
<!--X-Message-Id: OFAE4B88EF.A06D7BF6&#45;ONC1257046.004DE3E8&#45;C1257046.00559456@philips.com -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>default ordering of vectors</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00053.html">Date Prev</a>][<a href="msg00055.html">Date Next</a>][<a href="msg00056.html">Thread Prev</a>][<a href="msg00055.html">Thread Next</a>][<a href="maillist.html#00054">Date Index</a>][<a href="threads.html#00054">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>default ordering of vectors</h1>
<p style="max-width: 30em;">This page is part of the web mail archives of <a href="http://srfi.schemers.org/srfi-67">SRFI 67</a> from before July 7th, 2015.  The new archives for SRFI 67 are <a href="http://srfi-email.schemers.org/srfi-67/">here</a>.  The new archives contain all messages, not just those from before July 7th, 2015.</p>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: <a href="mailto:srfi-67@DOMAIN.HIDDEN">srfi-67@xxxxxxxxxxxxxxxxx</a></li>
<li><em>Subject</em>: default ordering of vectors</li>
<li><em>From</em>: Sebastian Egner &lt;<a href="mailto:sebastian.egner@DOMAIN.HIDDEN">sebastian.egner@xxxxxxxxxxx</a>&gt;</li>
<li><em>Date</em>: Fri, 22 Jul 2005 17:32:30 +0200</li>
<li><em>Delivered-to</em>: <a href="mailto:srfi-67@DOMAIN.HIDDEN">srfi-67@xxxxxxxxxxxxxxxxx</a></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->

<br><font size=2 face="sans-serif">Dear list,</font>
<br>
<br><font size=2 face="sans-serif">The issue of how to define the default
ordering for vectors has not</font>
<br><font size=2 face="sans-serif">yet been settled. I would like to pick
it up again.</font>
<br>
<br><font size=2 face="sans-serif">--- Issue ---</font>
<br>
<br><font size=2 face="sans-serif">The question is what the default ordering
of vectors is supposed to be</font>
<br><font size=2 face="sans-serif">for this SRFI. There are two candidates:
'lexicographic ordering' (LEX)</font>
<br><font size=2 face="sans-serif">and 'first by length then lexicographically'
(LENGTH-LEX). </font>
<br>
<br><font size=2 face="sans-serif">The choice affects VECTOR-COMPARE, DEFAULT-COMPARE,
and the </font>
<br><font size=2 face="sans-serif">way orders are interpreted on an abstract
level. Moreover, there are</font>
<br><font size=2 face="sans-serif">implications for future SRFIs (e.g.
the drafts 66 and 74) that define vector-</font>
<br><font size=2 face="sans-serif">like data structures and could provide
a default ordering consistent</font>
<br><font size=2 face="sans-serif">with this SRFI. A similar choice (LEX
or SIZE-LEX) is to be made for</font>
<br><font size=2 face="sans-serif">the default ordering of comparison-based
set- and dictionary-like data</font>
<br><font size=2 face="sans-serif">structures.</font>
<br>
<br><font size=2 face="sans-serif">--- Summary of the discussion so far
---</font>
<br>
<br><font size=2 face="sans-serif">The issue was brought up by Per Bothner
who wrote in</font>
<br><font size=2 face="sans-serif">http://srfi.schemers.org/srfi-67/mail-archive/msg00031.html</font>
<br>
<br><font size=2 face="sans-serif">&gt; The default compare for vectors
is unusual, and more critically it is</font>
<br><font size=2 face="sans-serif">&gt; incompatible with the default compare
for lists and strings.</font>
<br><font size=2 face="sans-serif">&gt; The latter are both lexicographic
compare. &nbsp;I couldn't find a</font>
<br><font size=2 face="sans-serif">&gt; rationale for this difference.</font>
<br><font size=2 face="sans-serif">&gt;</font>
<br><font size=2 face="sans-serif">&gt; Note that this difference makes
it difficult to have a unified</font>
<br><font size=2 face="sans-serif">&gt; &quot;sequence hierarchy&quot;
as in Common Lisp. &nbsp;The problem is that</font>
<br><font size=2 face="sans-serif">&gt; ordering is defined in terms of
*implementation* types rather</font>
<br><font size=2 face="sans-serif">&gt; than semantics.</font>
<br><font size=2 face="sans-serif">&gt;</font>
<br><font size=2 face="sans-serif">&gt; I suggest using lexicographic compare
for all &quot;sequence&quot; types.</font>
<br>
<br><font size=2 face="sans-serif">Mike Sperber added in </font>
<br><font size=2 face="sans-serif">http://srfi.schemers.org/srfi-67/mail-archive/msg00031.html</font>
<br><font size=2 face="sans-serif">that he found the distinction between
list-compare and</font>
<br><font size=2 face="sans-serif">vector-compare confusing.</font>
<br>
<br><font size=2 face="sans-serif">The discussion continued around whether
lists, strings, and vectors</font>
<br><font size=2 face="sans-serif">should be interpreted as subtypes of
an abstract sequence type or</font>
<br><font size=2 face="sans-serif">as essentially independent types. The
authors of this SRFI adopted</font>
<br><font size=2 face="sans-serif">the latter point of view with the idea
that the basic operations of vector</font>
<br><font size=2 face="sans-serif">are constant-time SIZE and REF suggesting
the LENGTH-LEX order</font>
<br><font size=2 face="sans-serif">and LEX.</font>
<br>
<br><font size=2 face="sans-serif">Moreover, uniform vectors (in the sense
of several SRFI) and strings</font>
<br><font size=2 face="sans-serif">are cited to derive that vectors should
be ordered LEX. Per Bothner</font>
<br><font size=2 face="sans-serif">wrote in http://srfi.schemers.org/srfi-67/mail-archive/msg00038.html</font>
<br>
<br><font size=2 face="sans-serif">&gt; Now consider strings. &nbsp;Is
a string a vector? &nbsp;If you have uniform</font>
<br><font size=2 face="sans-serif">&gt; vectors, then it seems very strange
to not view a string as a uniform</font>
<br><font size=2 face="sans-serif">&gt; vector. &nbsp;It follows that the
ordering for strings should be the same</font>
<br><font size=2 face="sans-serif">&gt; as for uniform vectors.</font>
<br><font size=2 face="sans-serif">&gt;</font>
<br><font size=2 face="sans-serif">&gt; Strings use lexicographic order.</font>
<br><font size=2 face="sans-serif">&gt; Hence uniform vectors should use
lexicographic order.</font>
<br><font size=2 face="sans-serif">&gt; Hence vectors should use lexicographic
order.</font>
<br>
<br><font size=2 face="sans-serif">Jens Axel S&#xF8;gaard replies with the orderings
of polynomials,</font>
<br><font size=2 face="sans-serif">ordered first by degree and then lexicographically,
and points</font>
<br><font size=2 face="sans-serif">to the potentially higher efficiency
of LENGTH-LEX over LEX</font>
<br><font size=2 face="sans-serif">for types with constant-time SIZE operation.
In </font>
<br><font size=2 face="sans-serif">http://srfi.schemers.org/srfi-67/mail-archive/msg00041.html</font>
<br><font size=2 face="sans-serif">he writes</font>
<br>
<br><font size=2 face="sans-serif">&gt; Suppose now that we have the following
list:</font>
<br><font size=2 face="sans-serif">&gt;</font>
<br><font size=2 face="sans-serif">&gt; &nbsp;(list #10000(0 ... 0 1)</font>
<br><font size=2 face="sans-serif">&gt; &nbsp; &nbsp; &nbsp; &nbsp;#10001(0
... 0 2)</font>
<br><font size=2 face="sans-serif">&gt; &nbsp; &nbsp; &nbsp; &nbsp;#10002(0
... 0 3)</font>
<br><font size=2 face="sans-serif">&gt; &nbsp; &nbsp; &nbsp; &nbsp;#10003(0
... 0 4))</font>
<br><font size=2 face="sans-serif">&gt;</font>
<br><font size=2 face="sans-serif">&gt; In this scenerio the order used
in the srfi is better</font>
<br><font size=2 face="sans-serif">&gt; efficiencywise than the lexicographical
order -- and not</font>
<br><font size=2 face="sans-serif">&gt; only by a constant factor.</font>
<br><font size=2 face="sans-serif">&gt;</font>
<br><font size=2 face="sans-serif">&gt; It is also possible to find a list
where the srfi-ordering</font>
<br><font size=2 face="sans-serif">&gt; is slower than the lexicograpic,
but the slow down</font>
<br><font size=2 face="sans-serif">&gt; will be bounded by a small constant
factor. E.g.</font>
<br><font size=2 face="sans-serif">&gt;</font>
<br><font size=2 face="sans-serif">&gt; &nbsp;(list #10000(0 ... 0 1)</font>
<br><font size=2 face="sans-serif">&gt; &nbsp; &nbsp; &nbsp; &nbsp; #10000(0
... 0 2)</font>
<br><font size=2 face="sans-serif">&gt; &nbsp; &nbsp; &nbsp; &nbsp; #10000(0
... 0 3)</font>
<br><font size=2 face="sans-serif">&gt; &nbsp; &nbsp; &nbsp; &nbsp; #10000(0
... 0 4))</font>
<br>
<br><font size=2 face="sans-serif">Donovan Kolbly expressed his concerns
about the cognitive load</font>
<br><font size=2 face="sans-serif">of remembering that vectors and strings
are ordered differently in</font>
<br><font size=2 face="sans-serif">case vectors are not ordered LEX because
he sometimes</font>
<br><font size=2 face="sans-serif">converts strings into vectors of chars
and back.</font>
<br>
<br><font size=2 face="sans-serif">Mike Sperber disputes the arguments
that the LENGTH-LEX ordering</font>
<br><font size=2 face="sans-serif">of strings is more efficient and &quot;natural&quot;
by its relation to the basic</font>
<br><font size=2 face="sans-serif">operations on vectors (i.e. constant
time SIZE and REF).</font>
<br>
<br><font size=2 face="sans-serif">--- analysis ---</font>
<br>
<br><font size=2 face="sans-serif">Looking at the discussion again, I see
only three major arguments:</font>
<br>
<br><font size=2 face="sans-serif">(1) Conceptually vectors and lists are
just sequences, and these are </font>
<br><font size=2 face="sans-serif">conventionally ordered LEX by default.</font>
<br>
<br><font size=2 face="sans-serif">(2) LENGTH-LEX is more natural (and
efficient) for sequences that</font>
<br><font size=2 face="sans-serif">support a constant-time SIZE operation.</font>
<br>
<br><font size=2 face="sans-serif">(3) Conceptually strings are &quot;vectors
of chars&quot; and strings are conventionally</font>
<br><font size=2 face="sans-serif">ordered LEX by default, so vectors should
be ordered LEX as well in order</font>
<br><font size=2 face="sans-serif">to reduce confusion.</font>
<br>
<br><font size=2 face="sans-serif">From my point of view, (2) is the most
fundamental, in a mathematical</font>
<br><font size=2 face="sans-serif">sense. By providing different orders
for vectors and lists it is also</font>
<br><font size=2 face="sans-serif">possible to have the two most important
liftings of total orders to</font>
<br><font size=2 face="sans-serif">sequences readily available.</font>
<br>
<br><font size=2 face="sans-serif">Argument (1) is important as well, primarily
because apparently many</font>
<br><font size=2 face="sans-serif">people are not comfortable with the
existence of two default orderings</font>
<br><font size=2 face="sans-serif">for sequences. This may indeed lead
to surprises in case the ordering</font>
<br><font size=2 face="sans-serif">matters and the user does not care what
is specified in the SRFI. I do</font>
<br><font size=2 face="sans-serif">not share the expectations, however,
that this will be a serious problem.</font>
<br>
<br><font size=2 face="sans-serif">For me, argument (3) is weak. The conventional
ordering of strings is</font>
<br><font size=2 face="sans-serif">mostly historic because it lends itself
well to cellulose-based</font>
<br><font size=2 face="sans-serif">implementations of dictionary data structures
for sequences over</font>
<br><font size=2 face="sans-serif">small-alphabets (e.g. western languages).
This is by no means </font>
<br><font size=2 face="sans-serif">fundamental in the mathematical sense.
Japanese dictionaries,</font>
<br><font size=2 face="sans-serif">for example, often order characters
first by the number of strokes</font>
<br><font size=2 face="sans-serif">and then by other means; for strings
variant of LENGTH-LEX can</font>
<br><font size=2 face="sans-serif">be found as well. So to summarize, I
am fully convinced that strings</font>
<br><font size=2 face="sans-serif">should be ordered LEX by default, but
that does not imply vectors and</font>
<br><font size=2 face="sans-serif">any other sequence container type should
also be ordered LEX.</font>
<br>
<br><font size=2 face="sans-serif">Given my interpretation of the situation,
I would settle for the following:</font>
<br><font size=2 face="sans-serif">* Lists are ordered LEX by default.</font>
<br><font size=2 face="sans-serif">* Vectors are ordered LENGTH-LEX by
default.</font>
<br><font size=2 face="sans-serif">* Strings are ordered LEX with case-sensitive
character comparison by default.</font>
<br><font size=2 face="sans-serif">* The default ordering for lists and
vectors donate their name also as</font>
<br><font size=2 face="sans-serif">prototype orderings (order &quot;-as-list&quot;
or &quot;-as-vector&quot;) for other container types</font>
<br><font size=2 face="sans-serif">that can be interpreted as sequences.</font>
<br><font size=2 face="sans-serif">* Other vector-like data types should
define all orderings that are most</font>
<br><font size=2 face="sans-serif">natural for them. These need not necessarily
be consistent with vectors,</font>
<br><font size=2 face="sans-serif">lists, or strings. In case several default
orderings are natural, these can</font>
<br><font size=2 face="sans-serif">be named differently by appending &quot;-as-&lt;&lt;ordering&gt;&gt;&quot;.
In the cases of</font>
<br><font size=2 face="sans-serif">SRFI 66 and 74 where the ordering is
of minor importance, I would </font>
<br><font size=2 face="sans-serif">recommend to use LENGTH-LEX to be consistent
with this SRFI.</font>
<br>
<br><font size=2 face="sans-serif">This happens to be the current state
of the SRFI specification.</font>
<br>
<br><font size=2 face="sans-serif">Sebastian.</font>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00055" href="msg00055.html">Re: default ordering of vectors</a></strong>
<ul><li><em>From:</em> Per Bothner</li></ul></li>
<li><strong><a name="00057" href="msg00057.html">Re: default ordering of vectors</a></strong>
<ul><li><em>From:</em> Panu A Kalliokoski</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00053.html">Re: On optional arguments</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00055.html">Re: default ordering of vectors</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00056.html">Re: On optional arguments</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00055.html">Re: default ordering of vectors</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00054"><strong>Date</strong></a></li>
<li><a href="threads.html#00054"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>

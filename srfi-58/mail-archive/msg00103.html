<!-- MHonArc v2.6.15 -->
<!--X-Subject: Re: Floating&#45;point formats and standards -->
<!--X-From-R13: Ohoerl Xnssre <ntwNnyhz.zvg.rqh> -->
<!--X-Date: Fri,  7 Jan 2005 05:17:19 +0100 (NFT) -->
<!--X-Message-Id: 20050107041723.207071B7727@voluntocracy.org -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: Pine.LNX.4.44.0412262207080.10074&#45;100000@autodrip.bloodandcoffee.net -->
<!--X-Reference: 20041230222337.3D7BD1B7711@voluntocracy.org -->
<!--X-Reference: Pine.LNX.4.58.0412301550550.3862@bolt.sonic.net -->
<!--X-Reference: 20050105012438.GD6573@ogre.szonye.com -->
<!--X-Reference: 20050105055413.5FA901B7717@voluntocracy.org -->
<!--X-Reference: 20050105114809.GB9007@ogre.szonye.com -->
<!--X-Reference: 20050105122227.GC9007@ogre.szonye.com -->
<!--X-Reference: 20050105170342.348AC1B7719@voluntocracy.org -->
<!--X-Reference: 20050106004956.GB10975@ogre.szonye.com -->
<!--X-Reference: 20050106060805.D2EEC1B7727@voluntocracy.org -->
<!--X-Reference: 20050106104820.GA14471@ogre.szonye.com -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: Floating-point formats and standards</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00102.html">Date Prev</a>][<a href="msg00104.html">Date Next</a>][<a href="msg00102.html">Thread Prev</a>][<a href="msg00105.html">Thread Next</a>][<a href="maillist.html#00103">Date Index</a>][<a href="threads.html#00103">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: Floating-point formats and standards</h1>
<p style="max-width: 30em;">This page is part of the web mail archives of <a href="http://srfi.schemers.org/srfi-58">SRFI 58</a> from before July 7th, 2015.  The new archives for SRFI 58 are <a href="http://srfi-email.schemers.org/srfi-58/">here</a>.  Eventually, the entire history will be moved there, including any new messages.</p>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: <a href="mailto:bradd%2Bsrfi@DOMAIN.HIDDEN">bradd+srfi@xxxxxxxxxx</a></li>
<li><em>Subject</em>: Re: Floating-point formats and standards</li>
<li><em>From</em>: Aubrey Jaffer &lt;<a href="mailto:agj@DOMAIN.HIDDEN">agj@xxxxxxxxxxxx</a>&gt;</li>
<li><em>Date</em>: Thu,  6 Jan 2005 23:17:23 -0500 (EST)</li>
<li><em>Cc</em>: <a href="mailto:srfi-58@DOMAIN.HIDDEN">srfi-58@xxxxxxxxxxxxxxxxx</a></li>
<li><em>Delivered-to</em>: <a href="mailto:srfi-58@DOMAIN.HIDDEN">srfi-58@xxxxxxxxxxxxxxxxx</a></li>
<li><em>In-reply-to</em>: &lt;<a href="mailto:20050106104820.GA14471@DOMAIN.HIDDEN">20050106104820.GA14471@xxxxxxxxxxxxxxx</a>&gt; (<a href="mailto:bradd%2Bsrfi@DOMAIN.HIDDEN">bradd+srfi@xxxxxxxxxx</a>)</li>
<li><em>References</em>: &lt;<a href="mailto:Pine.LNX.4.44.0412262207080.10074-100000@DOMAIN.HIDDEN">Pine.LNX.4.44.0412262207080.10074-100000@xxxxxxxxxxxxxxxxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:20041230222337.3D7BD1B7711@DOMAIN.HIDDEN">20041230222337.3D7BD1B7711@xxxxxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:Pine.LNX.4.58.0412301550550.3862@DOMAIN.HIDDEN">Pine.LNX.4.58.0412301550550.3862@xxxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:20050105012438.GD6573@DOMAIN.HIDDEN">20050105012438.GD6573@xxxxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:20050105055413.5FA901B7717@DOMAIN.HIDDEN">20050105055413.5FA901B7717@xxxxxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:20050105114809.GB9007@DOMAIN.HIDDEN">20050105114809.GB9007@xxxxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:20050105122227.GC9007@DOMAIN.HIDDEN">20050105122227.GC9007@xxxxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:20050105170342.348AC1B7719@DOMAIN.HIDDEN">20050105170342.348AC1B7719@xxxxxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:20050106004956.GB10975@DOMAIN.HIDDEN">20050106004956.GB10975@xxxxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:20050106060805.D2EEC1B7727@DOMAIN.HIDDEN">20050106060805.D2EEC1B7727@xxxxxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:20050106104820.GA14471@DOMAIN.HIDDEN">20050106104820.GA14471@xxxxxxxxxxxxxxx</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre> | Date: Thu, 6 Jan 2005 02:48:20 -0800
 | From: &quot;Bradd W. Szonye&quot; &lt;bradd+srfi@xxxxxxxxxx&gt;
 | 
 | Aubrey Jaffer wrote:
 | &gt; This approach combines rank, dimensions, and new floats.
 | 
 | Initial impression: I love it!

Is it stunned silence from the others?  I have emailed the editor with
version 6.

 | &gt; I punted rank-0 for now.
 | 
 | Any particular reason why? It made sense.

It was 1:00am.  I restored them today.

 | &gt; The prefix syntax is:
 | &gt; 
 | &gt;   array-prefix :: rank `A' [ dimensions ] [ `:' type-specifier ] |
 | &gt;                        `A' dimensions [ `:' type-specifier ]
 | 
 | Would you mind terribly making the A optional in the second syntax?
 | 
 |     array-prefix :: rank  `A'  [ dimensions ] [ `:' type-specifier ]
 |                   |      [`A']   dimensions   [ `:' type-specifier ]
 | 
 | I realize that it complicates parsing a bit, but it also unifies

It took several hours to code, but it seems to work.

 | the dimension syntax with the #n(...) vector syntax of Common Lisp
 | and PLT Scheme.

Can you describe the PLT compatibility?

 | Don't forget to give semantics and examples for the shaped-array
 | syntax.  I don't particularly care whether you define the
 | repeat-fill rule; feel free to leave it for a later SRFI if you
 | don't want to write it up.

Do whole rows, planes, etc also repeat?

 | &gt;   dimensions :: dimension | dimensions `*' dimension
 | 
 | Anybody feel strongly about &quot;*&quot; vs &quot;x&quot; for the bound separator? I
 | prefer &quot;x&quot; because it makes the digits stand out more in my editor,
 | but that may be just a personal/old-age/font thing. Here are some
 | samples:
 | 
 |     A1. #A2*3*4(...)      X1. #A2x3x4(...)      T1. #A2&#xD7;3&#xD7;4(...)
 | 
 |     A2. #A20*30*40(...)   X2. #A20x30x40(...)   T2. #A20&#xD7;30&#xD7;40(...)
 | 
 | Hm, strange. A2 and X1 are quite readable on my screen, but A1 and
 | X2 blur together, making it hard to distinguish the numbers at a
 | glance. T1 and T2 are also good, but they use U+00D7 (the 'times'
 | symbol) which won't be universally available on Scheme systems.

I don't like x because it looks like mistyped hex numbers (#x33)

 | &gt; prototype                                                   type
 | &gt; procedure   exactness   element type			    specifier
 | &gt; =========   =========   ============			    =========
 | &gt; vector      any     
 | &gt; A:floc128b  inexact     128.bit binary flonum complex       floc128b
 | &gt; A:floc64b   inexact     64.bit binary flonum complex        floc64b
 | &gt; A:floc32b   inexact     32.bit binary flonum complex        floc32b
 | &gt; A:floc16b   inexact     16.bit binary flonum complex        floc16b
 | &gt; A:flor128b  inexact     128.bit binary flonum real          flor128b
 | &gt; A:flor64b   inexact     64.bit binary flonum real           flor64b
 | &gt; A:flor32b   inexact     32.bit binary flonum real           flor32b
 | &gt; A:flor16b   inexact     16.bit binary flonum real           flor16b
 | &gt; A:flor128d  exact       128.bit decimal flonum real         flor128d
 | &gt; A:flor64d   exact       64.bit decimal flonum real          flor64d
 | &gt; A:flor32d   exact       32.bit decimal flonum real          flor32d
 | &gt; A:fixz64    exact       64.bit binary fixnum                fixz64b
 | &gt; A:fixz32    exact       32.bit binary fixnum                fixz32b
 | &gt; A:fixz16    exact       16.bit binary fixnum                fixz16b
 | &gt; A:fixz8     exact       8.bit binary fixnum                 fixz8b
 | &gt; A:fixn64    exact       64.bit nonnegative binary fixnum    fixn64b
 | &gt; A:fixn32    exact       32.bit nonnegative binary fixnum    fixn32b
 | &gt; A:fixn16    exact       16.bit nonnegative binary fixnum    fixn16b
 | &gt; A:fixn8     exact       8.bit nonnegative binary fixnum     fixn8b
 | &gt; A:bool                  boolean                             bool
 | 
 | That covers all of the basic types.  Only binaryx is missing, and I
 | suspect that it'll be a common extension to the SRFI.  One problem
 | with adding x86 binaryx is that I don't know whether you should
 | call it an 80-bit type or a 96-bit type.  I don't mind if you punt
 | on it.

I think you will find that vectorized instructions don't pack
non-power-of-2 bit widths.  Breaking operands over cache-line
boundaries is a huge hassle for hardware.

So the 80-bit and 96-bit are likely stored into 128 bits.  We might as
well call them 128b.  This text I added describes how sizes are
chosen:

  Implementations are required to accept all of the type denotations.
  Uniform types of matching sizes which the platform supports will be
  used; the others will be represented as the next larger format of
  the same type implemented.  If there is no larger format of the same
  type and there is a bignum format for that element type, then the
  array format defaults to vector; otherwise the largest uniform
  format of that type is used.

 | No fixq arrays for rational numbers?  C'mon, you know you want to!

Although the syntax could easily specify arbitrary precisions, the
prototype functions would need to take extra arguments.  Should the
precision be specified as total bits and fractional bits; or integral
bits and fractional bits?

 | Thanks for shortening &quot;boolean&quot; to &quot;bool.&quot;

All the type name roots are now 4 characters.

 | What should systems do if they don't provide a 128-bit fixnum?
 | 16-bit fixnums are OK, because you can fake them with a larger
 | type, but there's no good way to get 128-bit floats on an
 | x86. Please don't /drop/ the 128-bit type, but please do specify
 | what to do about it.

The text above does.  If you don't have 128-bit flonums, use the
largest flonums you have.

 | Everything else looks good.
 | 
 | Joke: This draft is even more compatible with Common Lisp than the
 | original proposal, because it gives you the kitchen sink too!

It is the Swiss-army-knife of array syntax.  I hope the R6RS editors
are okay with that.

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00105" href="msg00105.html">Re: Floating-point formats and standards</a></strong>
<ul><li><em>From:</em> Bradd W. Szonye</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00002" href="msg00002.html">Re: #\a octothorpe syntax vs SRFI 10</a></strong>
<ul><li><em>From:</em> campbell</li></ul></li>
<li><strong><a name="00006" href="msg00006.html">Re: #\a octothorpe syntax vs SRFI 10</a></strong>
<ul><li><em>From:</em> Aubrey Jaffer</li></ul></li>
<li><strong><a name="00007" href="msg00007.html">Re: #\a octothorpe syntax vs SRFI 10</a></strong>
<ul><li><em>From:</em> bear</li></ul></li>
<li><strong><a name="00068" href="msg00068.html">Re: #\a octothorpe syntax vs SRFI 10</a></strong>
<ul><li><em>From:</em> Bradd W. Szonye</li></ul></li>
<li><strong><a name="00084" href="msg00084.html">Re: #\a octothorpe syntax vs SRFI 10</a></strong>
<ul><li><em>From:</em> Aubrey Jaffer</li></ul></li>
<li><strong><a name="00087" href="msg00087.html">Floating-point formats and standards</a></strong>
<ul><li><em>From:</em> Bradd W. Szonye</li></ul></li>
<li><strong><a name="00088" href="msg00088.html">Re: Floating-point formats and standards</a></strong>
<ul><li><em>From:</em> Bradd W. Szonye</li></ul></li>
<li><strong><a name="00096" href="msg00096.html">Re: Floating-point formats and standards</a></strong>
<ul><li><em>From:</em> Aubrey Jaffer</li></ul></li>
<li><strong><a name="00098" href="msg00098.html">Re: Floating-point formats and standards</a></strong>
<ul><li><em>From:</em> Bradd W. Szonye</li></ul></li>
<li><strong><a name="00101" href="msg00101.html">Re: Floating-point formats and standards</a></strong>
<ul><li><em>From:</em> Aubrey Jaffer</li></ul></li>
<li><strong><a name="00102" href="msg00102.html">Re: Floating-point formats and standards</a></strong>
<ul><li><em>From:</em> Bradd W. Szonye</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00102.html">Re: Floating-point formats and standards</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00104.html">Re: Floating-point formats and standards</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00102.html">Re: Floating-point formats and standards</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00105.html">Re: Floating-point formats and standards</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00103"><strong>Date</strong></a></li>
<li><a href="threads.html#00103"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>

<!-- MHonArc v2.6.15 -->
<!--X-Subject: Re: Floating&#45;point formats and standards -->
<!--X-From-R13: Ohoerl Xnssre <ntwNnyhz.zvg.rqh> -->
<!--X-Date: Thu,  6 Jan 2005 00:45:10 +0100 (NFT) -->
<!--X-Message-Id: 20050105170342.348AC1B7719@voluntocracy.org -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: Pine.LNX.4.44.0412262207080.10074&#45;100000@autodrip.bloodandcoffee.net -->
<!--X-Reference: 20041230222337.3D7BD1B7711@voluntocracy.org -->
<!--X-Reference: Pine.LNX.4.58.0412301550550.3862@bolt.sonic.net -->
<!--X-Reference: 20050105012438.GD6573@ogre.szonye.com -->
<!--X-Reference: 20050105055413.5FA901B7717@voluntocracy.org -->
<!--X-Reference: 20050105114809.GB9007@ogre.szonye.com -->
<!--X-Reference: 20050105122227.GC9007@ogre.szonye.com -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: Floating-point formats and standards</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00095.html">Date Prev</a>][<a href="msg00097.html">Date Next</a>][<a href="msg00088.html">Thread Prev</a>][<a href="msg00098.html">Thread Next</a>][<a href="maillist.html#00096">Date Index</a>][<a href="threads.html#00096">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: Floating-point formats and standards</h1>
<p style="max-width: 30em;">This page is part of the web mail archives of <a href="http://srfi.schemers.org/srfi-58">SRFI 58</a> from before July 7th, 2015.  The new archives for SRFI 58 are <a href="http://srfi-email.schemers.org/srfi-58/">here</a>.  Eventually, the entire history will be moved there, including any new messages.</p>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: <a href="mailto:bradd%2Bsrfi@DOMAIN.HIDDEN">bradd+srfi@xxxxxxxxxx</a></li>
<li><em>Subject</em>: Re: Floating-point formats and standards</li>
<li><em>From</em>: Aubrey Jaffer &lt;<a href="mailto:agj@DOMAIN.HIDDEN">agj@xxxxxxxxxxxx</a>&gt;</li>
<li><em>Date</em>: Wed,  5 Jan 2005 12:03:42 -0500 (EST)</li>
<li><em>Cc</em>: <a href="mailto:srfi-58@DOMAIN.HIDDEN">srfi-58@xxxxxxxxxxxxxxxxx</a></li>
<li><em>Delivered-to</em>: <a href="mailto:srfi-58@DOMAIN.HIDDEN">srfi-58@xxxxxxxxxxxxxxxxx</a></li>
<li><em>In-reply-to</em>: &lt;<a href="mailto:20050105122227.GC9007@DOMAIN.HIDDEN">20050105122227.GC9007@xxxxxxxxxxxxxxx</a>&gt; (<a href="mailto:bradd%2Bsrfi@DOMAIN.HIDDEN">bradd+srfi@xxxxxxxxxx</a>)</li>
<li><em>References</em>: &lt;<a href="mailto:Pine.LNX.4.44.0412262207080.10074-100000@DOMAIN.HIDDEN">Pine.LNX.4.44.0412262207080.10074-100000@xxxxxxxxxxxxxxxxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:20041230222337.3D7BD1B7711@DOMAIN.HIDDEN">20041230222337.3D7BD1B7711@xxxxxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:Pine.LNX.4.58.0412301550550.3862@DOMAIN.HIDDEN">Pine.LNX.4.58.0412301550550.3862@xxxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:20050105012438.GD6573@DOMAIN.HIDDEN">20050105012438.GD6573@xxxxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:20050105055413.5FA901B7717@DOMAIN.HIDDEN">20050105055413.5FA901B7717@xxxxxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:20050105114809.GB9007@DOMAIN.HIDDEN">20050105114809.GB9007@xxxxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:20050105122227.GC9007@DOMAIN.HIDDEN">20050105122227.GC9007@xxxxxxxxxxxxxxx</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre> | Date: Wed, 5 Jan 2005 04:22:27 -0800
 | From: &quot;Bradd W. Szonye&quot; &lt;bradd+srfi@xxxxxxxxxx&gt;
 | 
 | A couple of corrections to the 754R description:
 | 
 | Bradd W. Szonye wrote:
 | &gt; New name    Sig   Exp   Old name   Currently implemented by
 | &gt; 
 | &gt; binary16     11     5
 | &gt; binary32     23     8   single     all systems (hardware)
 | &gt; binary64     52    11   double     all systems (hardware)
 | &gt; binary80     64    15   extended   all x86-based systems (hardware)
 | &gt; binary128   112    15   quad       most RISC systems (software)
 | 
 | In the current draft, the extended format is called &quot;binaryx&quot;
 | instead of &quot;binary80.&quot; Implementations are supposed to provide at
 | least one high- precision format for intermediate calculations,
 | either binary128 (a basic format) or binaryx (an
 | implementation-defined format about 50% more precise than its best
 | basic format).

Can these intermediate formats be stored in memory?
Can vectored instructions read and store the intermediate formats?

 | One proposal recommends specifying binaryx as the x86 extended
 | format. I have no way of knowing for certain, but I suspect that it
 | will succeed, since x86 and quad are the only /de facto/ standards
 | for high-precision IEEE 754 flonums.
 | 
 | That proposal also states which formats a system should support.
 | 
 | For high-performance technical systems:
 | 
 |     Binary64 is mandatory for computation and storage.
 |     Binary32 is recommended for low-precision, high-density storage.
 |     Binaryx is recommended for computation on x86-compatible systems.
 |     Binary128 is recommended for expression evaluation (i.e., temps).
 | 
 | For commercial and financial systems:
 | 
 |     Decimal128 is mandatory for computation and storage.
 |     Decimal32 and decimal64 are recommended for storage.
 | 
 | The binary requirements match reality pretty well, except for the
 | binary128 recommendation. (Currently, only x86 systems use high-
 | precision temps, and they use binaryx instead of binary128.)

Since these proposed names have sizes in bits, I see little cause to
replace those sizes with the longer names or the cryptic
abbreviations.

While reading through 6.2 Numbers:

  Machine representations such as fixed point and floating point are
  referred to by names such as fixnum and flonum.

So here is a possible naming based on that.  Since flonum and fixnum
are machine representations, they specify attributes other than the
numerical type.  With this encoding rational fixnums could be added (a
la PL/1).

These abbreviations are pronounceable.  The fourth letter of the type
name is C for complex, R for real, (Q for rational?,) I for integer,
and N for nonnegative integer or natural number.

The &quot;-&quot; between the type name and precision could be removed.

Are fixnums and flonums necessarily binary?  Adding in a radix
indicator would gum up the works.

			      -=-=-=-=-

prototype   exact-                                      prefix
procedure   ness    element type                        (rank = n)
=========   =====   ============                        ==========
vector      any     #nA
A:floc-64   inexact IEEE 64.bit binary flonum complex   #nA:floc-64
A:floc-32   inexact IEEE 32.bit binary flonum complex   #nA:floc-32
A:flor-64   inexact IEEE 64.bit binary flonum real      #nA:flor-64
A:flor-32   inexact IEEE 32.bit binary flonum real      #nA:flor-32
A:fixi-64   exact   64.bit binary fixnum                #nA:fixi-64
A:fixi-32   exact   32.bit binary fixnum                #nA:fixi-32
A:fixi-16   exact   16.bit binary fixnum                #nA:fixi-16
A:fixi-8    exact   8.bit binary fixnum                 #nA:fixi-8
A:fixn-64   exact   64.bit nonnegative binary fixnum    #nA:fixn-64
A:fixn-32   exact   32.bit nonnegative binary fixnum    #nA:fixn-32
A:fixn-16   exact   16.bit nonnegative binary fixnum    #nA:fixn-16
A:fixn-8    exact   8.bit nonnegative binary fixnum     #nA:fixn-8
A:boolean           boolean                             #nA:boolean

A two-by-three array of nonnegative 16.bit integers is written:

#2A:fixn-16((0 1 2) (3 5 4))

Note that this is the external representation of an array, not an
expression evaluating to a array. Like vector constants, array
constants must be quoted:

'#2a:FIXN-16((0 1 2) (3 5 4))
               ==&gt; #2A:fixn-16((0 1 2) (3 5 4))

Rank 0 arrays:

#0a sym
#0A:flor-32 237.0

Semantics

(array-dimensions '#2A:fixn-16((0 1 2) (3 5 4))) ==&gt; (2 3)

An equivalent array could have been created by

(define ra (make-array (A:fixn-16) 2 3))
(array-set! ra 0 0 0)
(array-set! ra 1 0 1)
(array-set! ra 2 0 2)
(array-set! ra 3 1 0)
(array-set! ra 5 1 1)
(array-set! ra 4 1 2)

Literal array constants are immutable objects. It is an error to
attempt to store a new value into a location that is denoted by an
immutable object.

The following equivalences will be defined to alias SRFI-47 names to
the new ones. SRFI-47 should be amended or replaced to make these be
the array-prototype-procedures:

(define A:floc-64 ac64)
(define A:floc-32 ac32)
(define A:flor-64 ar64)
(define A:flor-32 ar32)
(define A:fixi-64 as64)
(define A:fixi-32 as32)
(define A:fixi-16 as16)
(define A:fixi-8  as8)
(define A:fixn-64 au64)
(define A:fixn-32 au32)
(define A:fixn-16 au16)
(define A:fixn-8  au8)
(define A:boolean at1)

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00098" href="msg00098.html">Re: Floating-point formats and standards</a></strong>
<ul><li><em>From:</em> Bradd W. Szonye</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00002" href="msg00002.html">Re: #\a octothorpe syntax vs SRFI 10</a></strong>
<ul><li><em>From:</em> campbell</li></ul></li>
<li><strong><a name="00006" href="msg00006.html">Re: #\a octothorpe syntax vs SRFI 10</a></strong>
<ul><li><em>From:</em> Aubrey Jaffer</li></ul></li>
<li><strong><a name="00007" href="msg00007.html">Re: #\a octothorpe syntax vs SRFI 10</a></strong>
<ul><li><em>From:</em> bear</li></ul></li>
<li><strong><a name="00068" href="msg00068.html">Re: #\a octothorpe syntax vs SRFI 10</a></strong>
<ul><li><em>From:</em> Bradd W. Szonye</li></ul></li>
<li><strong><a name="00084" href="msg00084.html">Re: #\a octothorpe syntax vs SRFI 10</a></strong>
<ul><li><em>From:</em> Aubrey Jaffer</li></ul></li>
<li><strong><a name="00087" href="msg00087.html">Floating-point formats and standards</a></strong>
<ul><li><em>From:</em> Bradd W. Szonye</li></ul></li>
<li><strong><a name="00088" href="msg00088.html">Re: Floating-point formats and standards</a></strong>
<ul><li><em>From:</em> Bradd W. Szonye</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00095.html">Re: #\a octothorpe syntax vs SRFI 10</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00097.html">Re: Floating-point formats and standards</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00088.html">Re: Floating-point formats and standards</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00098.html">Re: Floating-point formats and standards</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00096"><strong>Date</strong></a></li>
<li><a href="threads.html#00096"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>

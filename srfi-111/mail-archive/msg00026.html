<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: Lexical syntax for boxes -->
<!--X-From-R13: Xbua Qbjna <pbjnaNzrephel.ppvy.bet> -->
<!--X-Date: Wed, 22 May 2013 17:12:17 +0200 (MST) -->
<!--X-Message-Id: 20130522151214.GA19282@mercury.ccil.org -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 20130517180907.GB16894@mercury.ccil.org -->
<!--X-Reference: CAOBNZ7atriJgsf&#45;XyFkD0sFBabZ99v+qoGJyW&#45;8gC9NZULPeFg@mail.gmail.com -->
<!--X-Reference: 20130517200314.GE16894@mercury.ccil.org -->
<!--X-Reference: 5196935E.6060909@bothner.com -->
<!--X-Reference: CAMMPzYPr5xn9_hyuEjkVJXP8Z=Bfao4JVEj3RH9H6ms22ue0gw@mail.gmail.com -->
<!--X-Reference: 20130521012052.GB21968@mercury.ccil.org -->
<!--X-Reference: CAMMPzYN+THuqjNGnnjy6rCitPmCS7O0JGWKtG1q1J13mwjzaAQ@mail.gmail.com -->
<!--X-Reference: 20130521101732.GG9643@mercury.ccil.org -->
<!--X-Reference: CAMMPzYMP4Eg_OWwnDWSVL18TTyc2QfnmT7gXBj&#45;XxZ+qJ21RpQ@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: Lexical syntax for boxes</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00025.html">Date Prev</a>][<a href="msg00027.html">Date Next</a>][<a href="msg00023.html">Thread Prev</a>][<a href="msg00027.html">Thread Next</a>][<a href="maillist.html#00026">Date Index</a>][<a href="threads.html#00026">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: Lexical syntax for boxes</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: Alex Shinn &lt;<a href="mailto:alexshinn@DOMAIN.HIDDEN">alexshinn@xxxxxxxxx</a>&gt;</li>
<li><em>Subject</em>: Re: Lexical syntax for boxes</li>
<li><em>From</em>: John Cowan &lt;<a href="mailto:cowan@DOMAIN.HIDDEN">cowan@xxxxxxxxxxxxxxxx</a>&gt;</li>
<li><em>Date</em>: Wed, 22 May 2013 11:12:15 -0400</li>
<li><em>Cc</em>: <a href="mailto:srfi-111@DOMAIN.HIDDEN">srfi-111@xxxxxxxxxxxxxxxxx</a></li>
<li><em>Delivered-to</em>: <a href="mailto:srfi-111@DOMAIN.HIDDEN">srfi-111@xxxxxxxxxxxxxxxxx</a></li>
<li><em>In-reply-to</em>: &lt;<a href="mailto:CAMMPzYMP4Eg_OWwnDWSVL18TTyc2QfnmT7gXBj-XxZ%2BqJ21RpQ@DOMAIN.HIDDEN">CAMMPzYMP4Eg_OWwnDWSVL18TTyc2QfnmT7gXBj-XxZ+qJ21RpQ@xxxxxxxxxxxxxx</a>&gt;</li>
<li><em>References</em>: &lt;<a href="mailto:20130517180907.GB16894@DOMAIN.HIDDEN">20130517180907.GB16894@xxxxxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:CAOBNZ7atriJgsf-XyFkD0sFBabZ99v%2BqoGJyW-8gC9NZULPeFg@DOMAIN.HIDDEN">CAOBNZ7atriJgsf-XyFkD0sFBabZ99v+qoGJyW-8gC9NZULPeFg@xxxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:20130517200314.GE16894@DOMAIN.HIDDEN">20130517200314.GE16894@xxxxxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:5196935E.6060909@DOMAIN.HIDDEN">5196935E.6060909@xxxxxxxxxxx</a>&gt; &lt;<a href="mailto:CAMMPzYPr5xn9_hyuEjkVJXP8Z%3DBfao4JVEj3RH9H6ms22ue0gw@DOMAIN.HIDDEN">CAMMPzYPr5xn9_hyuEjkVJXP8Z=Bfao4JVEj3RH9H6ms22ue0gw@xxxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:20130521012052.GB21968@DOMAIN.HIDDEN">20130521012052.GB21968@xxxxxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:CAMMPzYN%2BTHuqjNGnnjy6rCitPmCS7O0JGWKtG1q1J13mwjzaAQ@DOMAIN.HIDDEN">CAMMPzYN+THuqjNGnnjy6rCitPmCS7O0JGWKtG1q1J13mwjzaAQ@xxxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:20130521101732.GG9643@DOMAIN.HIDDEN">20130521101732.GG9643@xxxxxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:CAMMPzYMP4Eg_OWwnDWSVL18TTyc2QfnmT7gXBj-XxZ%2BqJ21RpQ@DOMAIN.HIDDEN">CAMMPzYMP4Eg_OWwnDWSVL18TTyc2QfnmT7gXBj-XxZ+qJ21RpQ@xxxxxxxxxxxxxx</a>&gt;</li>
<li><em>Sender</em>: John Cowan &lt;<a href="mailto:cowan@DOMAIN.HIDDEN">cowan@xxxxxxxx</a>&gt;</li>
<li><em>User-agent</em>: Mutt/1.5.20 (2009-06-14)</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>Alex Shinn scripsit:

&gt; Well, WG2 has to deal with phasing anyway.  One possibility would
&gt; be to make define-reader-ctor a library declaration.

That's a very interesting idea, particularly if we require that it appear
before any use of the new syntax.

&gt; SRFI-108 is pretty huge and scares me somewhat.  Maybe it's good,
&gt; but really for just read/write of records there are much simpler solutions
&gt; that will be easier to gain traction.

I think the core is pretty simple.  For objects you want to initialize
from a literal string, you write:

    &amp;name{string}

which is lexed as

    ($construct$:name &quot;string&quot;)

If you want expressions instead, you write:

    &amp;name[expr expr expr]

which is lexed as

    ($construct$:name $&lt;&lt; expr expr expr $&gt;&gt;$)

where $&lt;&lt;$ and $&gt;&gt;$ are variables defined by the implementation as
distinct objects, typically empty strings.

You can also have both [] and {}, and you can write &amp;[expr ...] inside
braces to get unquoting.  Everything else is just bells and whistles.

The main thing is that there is no separate registry of names.  You just
define procedures or syntax forms with the appropriate names, and the
Right Thing happens.  As long as you abstain from using names of the form
$construct:* randomly in your code, you have the same security as SRFI
10 with no phasing issue.

-- 
My confusion is rapidly waxing          John Cowan
For XML Schema's too taxing:            cowan@xxxxxxxx
    I'd use DTDs                        <a  rel="nofollow" href="http://www.ccil.org/~cowan">http://www.ccil.org/~cowan</a>
    If they had local trees --
I think I best switch to RELAX NG.

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00027" href="msg00027.html">Re: Lexical syntax for boxes</a></strong>
<ul><li><em>From:</em> Per Bothner</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00000" href="msg00000.html">Boxes: halfway through the comment period and no comments</a></strong>
<ul><li><em>From:</em> John Cowan</li></ul></li>
<li><strong><a name="00003" href="msg00003.html">Re: Boxes: halfway through the comment period and no comments</a></strong>
<ul><li><em>From:</em> David Banks</li></ul></li>
<li><strong><a name="00004" href="msg00004.html">Re: Boxes: halfway through the comment period and no comments</a></strong>
<ul><li><em>From:</em> John Cowan</li></ul></li>
<li><strong><a name="00005" href="msg00005.html">Lexical syntax for boxes</a></strong>
<ul><li><em>From:</em> Per Bothner</li></ul></li>
<li><strong><a name="00009" href="msg00009.html">Re: Lexical syntax for boxes</a></strong>
<ul><li><em>From:</em> Alex Shinn</li></ul></li>
<li><strong><a name="00008" href="msg00008.html">Re: Lexical syntax for boxes</a></strong>
<ul><li><em>From:</em> John Cowan</li></ul></li>
<li><strong><a name="00014" href="msg00014.html">Re: Lexical syntax for boxes</a></strong>
<ul><li><em>From:</em> Alex Shinn</li></ul></li>
<li><strong><a name="00015" href="msg00015.html">Re: Lexical syntax for boxes</a></strong>
<ul><li><em>From:</em> John Cowan</li></ul></li>
<li><strong><a name="00023" href="msg00023.html">Re: Lexical syntax for boxes</a></strong>
<ul><li><em>From:</em> Alex Shinn</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00025.html">Re: SRFI 111 update requested</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00027.html">Re: Lexical syntax for boxes</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00023.html">Re: Lexical syntax for boxes</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00027.html">Re: Lexical syntax for boxes</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00026"><strong>Date</strong></a></li>
<li><a href="threads.html#00026"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>

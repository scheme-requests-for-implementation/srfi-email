<!-- MHonArc v2.6.15 -->
<!--X-Subject: Suggestions and EIOD update -->
<!--X-From-R13: Oytroenvp Bragnzrgre Brgebsfxl <nyNcrgebsfxl.bet> -->
<!--X-Date: Sat, 30 Oct 2004 01:10:15 +0200 (DFT) -->
<!--X-Message-Id: 200410292310.QAA07328@radish.petrofsky.org -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: Pine.LNX.4.44.0410221707340.18492&#45;100000@autodrip.bloodandcoffee.net -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Suggestions and EIOD update</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00034.html">Date Prev</a>][<a href="msg00036.html">Date Next</a>][<a href="msg00034.html">Thread Prev</a>][<a href="msg00037.html">Thread Next</a>][<a href="maillist.html#00035">Date Index</a>][<a href="threads.html#00035">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Suggestions and EIOD update</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: <a href="mailto:srfi-46@DOMAIN.HIDDEN">srfi-46@xxxxxxxxxxxxxxxxx</a></li>
<li><em>Subject</em>: Suggestions and EIOD update</li>
<li><em>From</em>: Algebraic Pentameter Petrofsky &lt;<a href="mailto:al@DOMAIN.HIDDEN">al@xxxxxxxxxxxxx</a>&gt;</li>
<li><em>Date</em>: Fri, 29 Oct 2004 16:10:08 -0700</li>
<li><em>Delivered-to</em>: <a href="mailto:srfi-46@DOMAIN.HIDDEN">srfi-46@xxxxxxxxxxxxxxxxx</a></li>
<li><em>In-reply-to</em>: 	&lt;<a href="mailto:Pine.LNX.4.44.0410221707340.18492-100000@DOMAIN.HIDDEN">Pine.LNX.4.44.0410221707340.18492-100000@xxxxxxxxxxxxxxxxxxxxxxxxxxx</a>&gt;	(<a href="mailto:campbell@DOMAIN.HIDDEN">campbell@xxxxxxxxxxxxxxxxxxxxxxxxxxx</a>)</li>
<li><em>References</em>: &lt;<a href="mailto:Pine.LNX.4.44.0410221707340.18492-100000@DOMAIN.HIDDEN">Pine.LNX.4.44.0410221707340.18492-100000@xxxxxxxxxxxxxxxxxxxxxxxxxxx</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>At <a  rel="nofollow" href="http://petrofsky.org/src">http://petrofsky.org/src</a> I've put an updated version of EIOD that
supports the SRFI-46 draft.  At the same location you can find
alexpander, which also supports the current draft.

Some comments on the SRFI:

  ELLIPSIS-IDENTIFIER specifies the token used for ellipsis.  ... This
  identifier, when generated by macros, is subject to the usual rules
  of hygiene.

That's pretty vague.  I realize that all descriptions of r5rs macro
hygiene are a bit vague (the earlier formal treatments done by
Kohlbecker and later Clinger don't address the macro-writing-macros
capabilities that ended up in r5rs), and it's reasonable not to try to
make this SRFI any more rigorous than r5rs, but I think the statement
above is still a little too vague.  Also, it's crucial, in the absence
of rigor, that you at least include an example or two showing some of
the consequences of what you are informally describing.

The r5rs rules of hygiene are (from r5rs 4.3):

  All macros defined using the pattern language are &quot;hygienic&quot; and
  &quot;referentially transparent&quot; and thus preserve Scheme's lexical
  scoping:

   * If a macro transformer inserts a binding for an identifier
     (variable or keyword), the identifier will in effect be renamed
     throughout its scope to avoid conflicts with other identifiers.
     Note that a define at top level may or may not introduce a
     binding; see section 5.2.

   * If a macro transformer inserts a free reference to an identifier,
     the reference refers to the binding that was visible where the
     transformer was specified, regardless of any local bindings that
     may surround the use of the macro.

These &quot;usual rules&quot; don't say anything about ellipses.  I think the
minimal way to state what you are getting at (assuming that what you
are trying to say is what I implemented) is something like this:

  When an ellipsis identifier is specified, that specification is
  considered a binding whose scope is the rules of the transformer.
  The macro system must make the usual hygienic arrangements to
  preserve the lexical scoping of these bindings.

Here's an example you could use, whose result depends on whether or
not F inserts the binding for ::: hygienicly:

  (let-syntax
      ((f (syntax-rules ()
	    ((f e)
	     (let-syntax
		 ((g (syntax-rules ::: ()
		       ((g (x e) (y :::))
			'((x) e (y) :::)))))
	       (g (1 2) (3 4)))))))
    (f :::))
  =&gt; ((1) 2 (3) (4))    [ rather than ((1) (2) (3) (4)) ]

I think the &quot;tail patterns&quot; feature would also benefit from at least
one example expression, which should explicitly include the concrete
result you expect.  Here's one:

  (let-syntax
      ((foo (syntax-rules ()
	      ((foo x y ... z) (list x (list y ...) z)))))
    (foo 1 2 3 4 5))
  =&gt; (1 (2 3 4) 5)  

At the end of the SRFI:

  There is no 'official' reference implementation here provided,
  because this SRFI defines an extension to existing macro expanders,
  which all vary vastly in implementation.

I think you mean to say that it is impractical to provide a widely
ready-to-use implementation.

  Al* Petrofsky suggested that there still be here provided some
  examples of macro expanders that have been modified to support these
  extensions already;

Right, and that's what reference implementations are: implementations
to which people can refer when implementing the specification.

-al

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00037" href="msg00037.html">Re: Suggestions and EIOD update</a></strong>
<ul><li><em>From:</em> campbell</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00034.html">EIOD CYOE (FLAH)</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00036.html">Re: Suggestions and EIOD update</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00034.html">EIOD CYOE (FLAH)</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00037.html">Re: Suggestions and EIOD update</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00035"><strong>Date</strong></a></li>
<li><a href="threads.html#00035"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>

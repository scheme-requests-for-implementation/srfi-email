<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: Should SRFI&#45;115 character sets match extended grapheme clusters? -->
<!--X-From-R13: Oyrk Euvaa <nyrkfuvaaNtznvy.pbz> -->
<!--X-Date: Mon, 12 May 2014 02:35:20 +0000 (UTC) -->
<!--X-Message-Id: CAMMPzYMZGvLnL0SVQ1Jzz=rgQ&#45;YX_cwvTHzYhw&#45;hWiT5nxesGQ@mail.gmail.com -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: 87bnv4ifwu.fsf@yeeloong.lan -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: Should SRFI-115 character sets match extended grapheme clusters?</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00169.html">Date Prev</a>][<a href="msg00171.html">Date Next</a>][<a href="msg00173.html">Thread Prev</a>][<a href="msg00176.html">Thread Next</a>][<a href="maillist.html#00170">Date Index</a>][<a href="threads.html#00170">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: Should SRFI-115 character sets match extended grapheme clusters?</h1>
<p style="max-width: 30em;">This page is part of the web mail archives of <a href="http://srfi.schemers.org/srfi-115">SRFI 115</a> from before July 7th, 2015.  The new archives for SRFI 115 are <a href="http://srfi-email.schemers.org/srfi-115/">here</a>.  The new archives contain all messages, not just those from before July 7th, 2015.</p>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: Mark H Weaver &lt;<a href="mailto:mhw@DOMAIN.HIDDEN">mhw@xxxxxxxxxx</a>&gt;</li>
<li><em>Subject</em>: Re: Should SRFI-115 character sets match extended grapheme clusters?</li>
<li><em>From</em>: Alex Shinn &lt;<a href="mailto:alexshinn@DOMAIN.HIDDEN">alexshinn@xxxxxxxxx</a>&gt;</li>
<li><em>Date</em>: Mon, 12 May 2014 11:35:19 +0900</li>
<li><em>Cc</em>: SRFI-115 discussion list &lt;<a href="mailto:srfi-115@DOMAIN.HIDDEN">srfi-115@xxxxxxxxxxxxxxxxx</a>&gt;</li>
<li><em>Delivered-to</em>: <a href="mailto:srfi-115@DOMAIN.HIDDEN">srfi-115@xxxxxxxxxxxxxxxxx</a></li>
<li><em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed;        d=gmail.com; s=20120113;        h=mime-version:in-reply-to:references:date:message-id:subject:from:to         :cc:content-type;        bh=EUDKN+JfiFcM3uqDfRDv1LXOUwJ9Ns5pe67kImfZrNA=;        b=N9lEqzYdetDh+QB8PXOwOB9ZcA/VRG+m8PKGTw2X7iQKOXKrYpYbI8sAxjE1+s9tvW         EJNCdKbJaLEcOH0djZ/Bn53qu8Zgq3iuKKe9XvmBgQoea5ufqkoSKjU1QY5vYGT6XRiK         w8qfZ/+bWq0FO3UmvP1n64FXoDSehEufLP35vTZd6b+8yx9Im+FHrMbx4ejYAuWEzM1a         yuc6Qb3Ao+JX7REgF0up/sQVveIfmeZpguA1j2WKNaV1MYhX3IdzvmHVjVzyylvJ1+sA         Jfuxy2hlTX90UFY2xPkbWRuiSJRxjMif4Jj34zMYzAx5Vgcx1m3/7ddzc96AVAHhMlgI         nPIA==</li>
<li><em>In-reply-to</em>: &lt;<a href="msg00166.html">87bnv4ifwu.fsf@yeeloong.lan</a>&gt;</li>
<li><em>References</em>: &lt;<a href="msg00166.html">87bnv4ifwu.fsf@yeeloong.lan</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<div dir="ltr"><div class="gmail_extra"><div class="gmail_quote">On Sun, May 11, 2014 at 10:49 PM, Mark H Weaver <span dir="ltr">&lt;<a rel="nofollow" href="mailto:mhw@xxxxxxxxxx" target="_blank">mhw@xxxxxxxxxx</a>&gt;</span> wrote:<br><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left-width:1px;border-left-color:rgb(204,204,204);border-left-style:solid;padding-left:1ex">

Hello all,<br>
<br>
It occurs to me that users of languages that make heavy use of combining<br>
marks will likely find the behavior of &quot;character sets&quot; to be quite<br>
unintuitive if they operate on code points. &#xA0;For example, they might<br>
reasonably expect (&quot;&#xE9;&#xE8;&quot;) to match either of two graphemes, and never to<br>
match a bare &#39;e&#39; or a bare combining mark. &#xA0;They might also expect<br>
(~ (&quot;aeiou&quot;)) to match &quot;&#xE9;&quot;, even when represented as multiple code<br>
points.<br></blockquote><div><br></div><div>An excellent point. &#xA0;I&#39;m inclined to agree that we should handle</div><div>grapheme clusters naturally, though it&#39;s not completely clear that</div><div>this is always the right thing. &#xA0;Users may want to create character</div>
<div>sets with composing characters and have them matched individually,</div><div>not composed with any preceding character (though the workaround</div><div>here would be to include them as characters, not inside string literals).</div>
<div><br></div><div>Regardless, I think for practical reasons we&#39;re stuck with codepoints</div><div>for now. &#xA0;There exist (to my knowledge) no implementations which</div><div>handle grapheme cluster aware char-sets currently, and the overhead</div>
<div>is potentially substantial. &#xA0;Even simple mappings of large Unicode</div><div>char-sets can be expensive to compute (until the ref impl optimized</div><div>known case-insensitive char-sets I believe (w/nocase letter) took</div>
<div>over a minute to iterate over all 10k+ Letter code-points, look up all</div><div>their case variants an insert them into a new set). &#xA0;So I&#39;d consider</div><div>this an open area for improvement.</div><div><br></div>
<div>We could make room for this, in the same way that we allow but</div><div>don&#39;t require w/nocase to handle non-1-to-1 mappings. &#xA0;The concern</div><div>again is how do we distinguish (&quot;&#xE9;&#xE8;&quot;) with non-composed characters</div>
<div>from the character set where they want to match e and the two composing</div><div>characters separately, and how do we translate the distinction to pcre?</div><div><br></div><div>--&#xA0;</div><div>Alex</div><div><br></div>
</div></div></div>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00176" href="msg00176.html">Re: Should SRFI-115 character sets match extended grapheme clusters?</a></strong>
<ul><li><em>From:</em> Alex Shinn</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00166" href="msg00166.html">Should SRFI-115 character sets match extended grapheme clusters?</a></strong>
<ul><li><em>From:</em> Mark H Weaver</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00169.html">Re: Should SRFI-115 character sets match extended grapheme clusters?</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00171.html">Re: Should SRFI-115 character sets match extended grapheme clusters?</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00173.html">Re: Should SRFI-115 character sets match extended grapheme clusters?</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00176.html">Re: Should SRFI-115 character sets match extended grapheme clusters?</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00170"><strong>Date</strong></a></li>
<li><a href="threads.html#00170"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>

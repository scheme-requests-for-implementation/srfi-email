<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: Please drop the ^main^ thing -->
<!--X-From-R13: Rrevpx Sqqvatgba <qrevpx.rqqvatgbaNtznvy.pbz> -->
<!--X-Date: Sat, 26 Sep 2009 01:07:08 +0000 (UTC) -->
<!--X-Message-Id: 1253926743.12583.377.camel@eep -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 1253903002.12583.147.camel@eep -->
<!--X-Reference: 20090925.095634.418185137602245174.shiro@lava.net -->
<!--X-Reference: 1253912560.12583.223.camel@eep -->
<!--X-Reference: 20090925.120944.505912664483828392.shiro@lava.net -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: Please drop the ^main^ thing</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00019.html">Date Prev</a>][<a href="msg00021.html">Date Next</a>][<a href="msg00019.html">Thread Prev</a>][<a href="msg00023.html">Thread Next</a>][<a href="maillist.html#00020">Date Index</a>][<a href="threads.html#00020">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: Please drop the ^main^ thing</h1>
<p style="max-width: 30em;">This page is part of the web mail archives of <a href="http://srfi.schemers.org/srfi-103">SRFI 103</a> from before July 7th, 2015.  The new archives for SRFI 103 are <a href="http://srfi-email.schemers.org/srfi-103/">here</a>.  Eventually, the entire history will be moved there, including any new messages.</p>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: Shiro Kawai &lt;<a href="mailto:shiro@DOMAIN.HIDDEN">shiro@xxxxxxxx</a>&gt;</li>
<li><em>Subject</em>: Re: Please drop the ^main^ thing</li>
<li><em>From</em>: Derick Eddington &lt;<a href="mailto:derick.eddington@DOMAIN.HIDDEN">derick.eddington@xxxxxxxxx</a>&gt;</li>
<li><em>Date</em>: Fri, 25 Sep 2009 17:59:03 -0700</li>
<li><em>Cc</em>: <a href="mailto:aghuloum@DOMAIN.HIDDEN">aghuloum@xxxxxxxxx</a>, <a href="mailto:srfi-103@DOMAIN.HIDDEN">srfi-103@xxxxxxxxxxxxxxxxx</a></li>
<li><em>Delivered-to</em>: <a href="mailto:srfi-103@DOMAIN.HIDDEN">srfi-103@xxxxxxxxxxxxxxxxx</a></li>
<li><em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed;        d=gmail.com; s=gamma;        h=domainkey-signature:received:received:subject:from:to:cc         :in-reply-to:references:content-type:date:message-id:mime-version         :x-mailer:content-transfer-encoding;        bh=gWZYc+h3Jkr/FPwUmMilkTmvc6v6Hi1h9vtxtixYvHU=;        b=VsF5iDKsKvGwR8duTPUPd01Nu/urTPccrKRn/yqyYdyg4RMO+koiOceAYrMIm4S5Pc         B7M2SsxQ193M1UxJYVmzlHSlk272+QEfwRHuImuRRka/s8oSohOXccOXy+4t/Ooz/4sH         Cshz6Z/+gNJzkBx6QnQBdo2I/0TXoPmMprSwA=</li>
<li><em>Domainkey-signature</em>: a=rsa-sha1; c=nofws;        d=gmail.com; s=gamma;        h=subject:from:to:cc:in-reply-to:references:content-type:date         :message-id:mime-version:x-mailer:content-transfer-encoding;        b=wn5lX4sZpXQSdt3Tvu0qL8a3AArujvFr+/1LyzJGeWbZnEtR453xHUtLf50Rn9Zbz0         2In778nZBK3SQLYBP7HIJcRs7VH0LRdGMxLBF/nerMHhu9KpsAHTDplaptlnCcxkVSZC         f1DPIZJocEgMbC6B8mRwYxBC/qcnQVzGC3WCA=</li>
<li><em>In-reply-to</em>: &lt;<a href="mailto:20090925.120944.505912664483828392.shiro@DOMAIN.HIDDEN">20090925.120944.505912664483828392.shiro@xxxxxxxx</a>&gt;</li>
<li><em>References</em>: &lt;<a href="mailto:1253903002.12583.147.camel@DOMAIN.HIDDEN"><a href="msg00010.html">1253903002.12583.147.camel@eep</a></a>&gt;	 &lt;<a href="mailto:20090925.095634.418185137602245174.shiro@DOMAIN.HIDDEN">20090925.095634.418185137602245174.shiro@xxxxxxxx</a>&gt;	 &lt;<a href="mailto:1253912560.12583.223.camel@DOMAIN.HIDDEN"><a href="msg00017.html">1253912560.12583.223.camel@eep</a></a>&gt;	 &lt;<a href="mailto:20090925.120944.505912664483828392.shiro@DOMAIN.HIDDEN">20090925.120944.505912664483828392.shiro@xxxxxxxx</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>On Fri, 2009-09-25 at 12:09 -1000, Shiro Kawai wrote:
&gt; From: Derick Eddington &lt;derick.eddington@xxxxxxxxx&gt;
&gt; Subject: Re: Please drop the ^main^ thing
&gt; Date: Fri, 25 Sep 2009 14:02:40 -0700
&gt; 
&gt; &gt; &gt; Just as a data point, I don't have desire to organize a library
&gt; &gt; &gt; under a single directory.   I don't mind the library tarball
&gt; &gt; &gt; expands into acme/foo.sls, acme/foo/helper1.sls, acme/foo/helper2.sls...
&gt; &gt; 
&gt; &gt; How do you feel about &quot;littering&quot; the top of a search path directory
&gt; &gt; with acme.sls, etc., for single-symbol-named libraries?  (I'm asking
&gt; &gt; just to know your opinion.)  (I think there will be enough
&gt; &gt; single-symbol-named libraries that it will happen without support for an
&gt; &gt; implicit file name.)
&gt; 
&gt; I don't mind unless there are several thousand files in
&gt; a same directory.   Do you think we'll reach there?  

I think we should plan to reach there.  (Otherwise, I wouldn't have
ditched the search-by-decoding instead of search-for-encoded algorithm I
had, which simplified the exchanging-files issues with encoded path
components, because it does not scale well to large numbers of files and
many-symbol library names.)

&gt; If we put 
&gt; per-implementation precompiled files (e.g. fasl or dso) in 
&gt; the same location of *.sls, maybe.  But such
&gt; implementation-specific files doesn't need to follow srfi-103,
&gt; and probably should be encouraged to put files under subdirectory.

But that's still another reason to have the ability to avoid littering
files outside their collection's directory.

&gt; I just looked into /usr/share/emacs/*/lisp.  Mine had less than
&gt; 300 (but I only installed *.elc).   Heavy emacs customizers
&gt; may have a lot more.  It still seems manageable.  Interestingly,
&gt; xemacs uses one-directory-per-package policy.  But if I remember
&gt; correctly it adds every such directory to the search path (I no
&gt; longer use xemacs so I'm not sure).

An Emacs library name is only a symbol, whereas an R6RS library name is
a sequence of symbols.  In order to support subdirectory organization,
Emacs has to add subdirectories to the search paths.  I don't want to do
that because it requires managing the adding/removing of the
subdirectories to/from the search paths for every Scheme implementation
for every collection, and it cannot be automatically assumed that
subdirectories in the search paths should also be search paths because
that would be too confusing with using subdirectories for the compound
library names.

&gt; &gt; While I do like automated management for library collections, and I look
&gt; &gt; forward to having more automated management, I also think it's important
&gt; &gt; to support collections which can simply be manually dropped into a
&gt; &gt; search path and be immediately ready and which can be effectively
&gt; &gt; manually managed, and that it's important to not marginalize this by
&gt; &gt; saying everyone should use automated management.  (I know you weren't
&gt; &gt; saying that and were just giving your personal opinion, which I
&gt; &gt; appreciate.)  
&gt; 
&gt; I'm not sure how much you mean by &quot;automated management&quot;.
&gt; Is untar + make install considered that automated?

The purpose of `make' is automation, so yeah, what I meant was
&quot;everything not just-untar-in-search-path&quot;.

&gt; However, if many people like &quot;just-untar-in-search-path&quot;,
&gt; then I support everything-under-subdirectory in a different
&gt; reason.  Many libraries need accompanied files such as
&gt; README and COPYING.   If we eventually agree a common
&gt; format of meta information (e.g. XEmacs' _pkg.el), such
&gt; file may also needed.   If the library consists of a single
&gt; source file, acme/foo.sls, then it's ambiguous how the
&gt; library author include those auxiliary files.  So it'll
&gt; be reasonable that (acme foo) library always create
&gt; acme/foo/ subdirectory and put everything under that.

Yes, another point in favor of the implicit file name.  But I'm not sure
what you mean by &quot;(acme foo) library always create acme/foo/&quot;.  Do you
mean only for this case of a single-library package, or do you mean all
libraries' files should be required to be under their library name's
last symbol?

&gt; I still think the name ^main^ stands out too much, though.

Standing out a lot is the purpose!  What's bad about that?  I want to be
able to quickly visually recognize implicit file paths because their
mapping to library names is different.  I think the ^main^ will grow on
you guys if you just let yourselves get used to it :)  I don't want to
be prejudiced to only Latin characters... :)

&gt; I think it acceptable to reserve a special name for this main file
&gt; and to have a special conflict resolution rule for it

I don't like that because it adds yet another rule, applicable only to
the last path component, to the already non-small number of rules of the
SRFI.

&gt; (e.g. foo/main.sls for main file, and (foo main) maps to foo/main/main.sls)

So this rule is(?): if a library name ends with the symbol main, then it
avoids conflict by adding a last path component with prefix &quot;main&quot;?
That would avoid the infinite number of possibilities for conflict
problem the PLT method has.  But that means you can never put a 
(foo main) library in the &quot;foo&quot; directory, which I don't like.

-- 
: Derick
----------------------------------------------------------------

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00023" href="msg00023.html">Re: Please drop the ^main^ thing</a></strong>
<ul><li><em>From:</em> Shiro Kawai</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00010" href="msg00010.html">Re: Please drop the ^main^ thing</a></strong>
<ul><li><em>From:</em> Derick Eddington</li></ul></li>
<li><strong><a name="00015" href="msg00015.html">Re: Please drop the ^main^ thing</a></strong>
<ul><li><em>From:</em> Shiro Kawai</li></ul></li>
<li><strong><a name="00017" href="msg00017.html">Re: Please drop the ^main^ thing</a></strong>
<ul><li><em>From:</em> Derick Eddington</li></ul></li>
<li><strong><a name="00019" href="msg00019.html">Re: Please drop the ^main^ thing</a></strong>
<ul><li><em>From:</em> Shiro Kawai</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00019.html">Re: Please drop the ^main^ thing</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00021.html">Re: Please drop the ^main^ thing</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00019.html">Re: Please drop the ^main^ thing</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00023.html">Re: Please drop the ^main^ thing</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00020"><strong>Date</strong></a></li>
<li><a href="threads.html#00020"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>

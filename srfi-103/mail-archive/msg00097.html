<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: upcoming revision, need feedback -->
<!--X-From-R13: Rrevpx Sqqvatgba <qrevpx.rqqvatgbaNtznvy.pbz> -->
<!--X-Date: Mon, 11 Jan 2010 05:03:59 +0000 (UTC) -->
<!--X-Message-Id: 1263186234.15783.274.camel@eep -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 1263094024.31734.295.camel@eep -->
<!--X-Reference: 4B49FD33.2050304@gmail.com -->
<!--X-Reference: 1263167293.15783.61.camel@eep -->
<!--X-Reference: 4B4A9386.90704@gmail.com -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: upcoming revision, need feedback</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00096.html">Date Prev</a>][<a href="msg00098.html">Date Next</a>][<a href="msg00096.html">Thread Prev</a>][<a href="msg00098.html">Thread Next</a>][<a href="maillist.html#00097">Date Index</a>][<a href="threads.html#00097">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: upcoming revision, need feedback</h1>
<p style="max-width: 30em;">This page is part of the web mail archives of <a href="http://srfi.schemers.org/srfi-103">SRFI 103</a> from before July 7th, 2015.  The new archives for SRFI 103 are <a href="http://srfi-email.schemers.org/srfi-103/">here</a>.  Eventually, the entire history will be moved there, including any new messages.</p>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: Vitaly Magerya &lt;<a href="mailto:vmagerya@DOMAIN.HIDDEN">vmagerya@xxxxxxxxx</a>&gt;</li>
<li><em>Subject</em>: Re: upcoming revision, need feedback</li>
<li><em>From</em>: Derick Eddington &lt;<a href="mailto:derick.eddington@DOMAIN.HIDDEN">derick.eddington@xxxxxxxxx</a>&gt;</li>
<li><em>Date</em>: Sun, 10 Jan 2010 21:03:54 -0800</li>
<li><em>Cc</em>: <a href="mailto:srfi-103@DOMAIN.HIDDEN">srfi-103@xxxxxxxxxxxxxxxxx</a></li>
<li><em>Delivered-to</em>: <a href="mailto:srfi-103@DOMAIN.HIDDEN">srfi-103@xxxxxxxxxxxxxxxxx</a></li>
<li><em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed;        d=gmail.com; s=gamma;        h=domainkey-signature:received:received:subject:from:to:cc         :in-reply-to:references:content-type:date:message-id:mime-version         :x-mailer:content-transfer-encoding;        bh=qmaxpP/Pt7nJdlrGHuy39nBy7equsGqp/ym6l9ZdSV0=;        b=d7dJFYZEYnZehyCVecxalv9Pmr3RISYP9PXe+v0CVRaX+myyIbhhd+k7CO/h3ImIVW         mx6kudmdmh086Cb4mudT9zABSVouE3/AZ9qeLgAAppj95AFLC4cfX6KIuUiQB7B23Iux         irEaaA0o8ttVJ/KfLIIHPgp5hoZ8Wks9i1+zU=</li>
<li><em>Domainkey-signature</em>: a=rsa-sha1; c=nofws;        d=gmail.com; s=gamma;        h=subject:from:to:cc:in-reply-to:references:content-type:date         :message-id:mime-version:x-mailer:content-transfer-encoding;        b=j1O+uZadgshb/3DCAlZdiAVtrVqE6CvuHjnsz5cOkv2aid7d58395wYgH/m6jcMz8U         P0hhF9OUB6O065YEogt5nnDlC1qBZYiwXZPTxFRYXy7PqIiqr9dyHVuiQx4U8hqLPdFy         j5xnYj5Lb1dioHLZfrGQAurSNAcyjQSSKMv7w=</li>
<li><em>In-reply-to</em>: &lt;<a href="mailto:4B4A9386.90704@DOMAIN.HIDDEN">4B4A9386.90704@xxxxxxxxx</a>&gt;</li>
<li><em>References</em>: &lt;<a href="mailto:1263094024.31734.295.camel@DOMAIN.HIDDEN"><a href="msg00091.html">1263094024.31734.295.camel@eep</a></a>&gt;  &lt;<a href="mailto:4B49FD33.2050304@DOMAIN.HIDDEN">4B49FD33.2050304@xxxxxxxxx</a>&gt;	 &lt;<a href="mailto:1263167293.15783.61.camel@DOMAIN.HIDDEN"><a href="msg00093.html">1263167293.15783.61.camel@eep</a></a>&gt;  &lt;<a href="mailto:4B4A9386.90704@DOMAIN.HIDDEN">4B4A9386.90704@xxxxxxxxx</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>Thanks for your input on these issues.

On Mon, 2010-01-11 at 04:57 +0200, Vitaly Magerya wrote:
&gt; Derick Eddington wrote:
&gt; &gt; I think the pathname component separators do need to be defined.
&gt; &gt; [...] if they're undefined, the encoded set would not be clearly,
&gt; &gt; precisely, completely specified.
&gt; 
&gt; The current draft sets the encoded set to be &lt;a list of chars and the
&gt; path separator&gt;. The set of path separators depends on a platform [1],
&gt; but the set of encoded characters should not (for portability reasons).
&gt; So you must include all the possible separators from all the supported
&gt; platforms in the encoded set -- after that specifying each of them
&gt; separately serves no purpose.

I know the encoded set is supposed to be the same on all targeted
platforms and so must include all their path separators.  I know the
current draft needs to be improved in this regard, and that's why I'm
planning on making this change I listed:

        8) Rephrase to say what the set of encoded characters is and
        then say why particular characters are encoded.  The current
        phrasing is not as clear.
        
(which probably wasn't described clearly enough)

It will state the set of literal characters (i.e. not abstract ones like
the current draft's &quot;path separator&quot;) and then say things like &quot;these
are encoded for this reason&quot; and &quot;these same ones for this additional
reason&quot;.

I think you're right that defining the path separators should not be
redundantly done outside the (planned) explanation for why characters
are encoded.

(I still think the environment variable element separators should be
defined in the sections about the environment variables, even though
they'll also be specified in the encoded characters explanation.)

&gt; &gt;&gt;&gt; 7) Add #\; to the set of encoded characters, because a directory could be both
&gt; &gt;&gt;&gt; in the SCHEME_LIB_PATH sequence and correspond to a library name component.
&gt; &gt;&gt;&gt; Such a directory with a name including #\; is unusual but must be supported,
&gt; &gt;&gt;&gt; otherwise an unencoded #\; would be misinterpreted in SCHEME_LIB_PATH.
&gt; &gt;&gt;
&gt; &gt;&gt; I heard that when you strive to fail safety it's best to enumerate
&gt; &gt;&gt; allowed things, not the forbidden ones. 
&gt; &gt; 
&gt; &gt; I don't think that justifies what you suggest below.
&gt; 
&gt; It is generally hard to list all the failure conditions, but easy to
&gt; list success conditions.
&gt; 
&gt; Let me illustrate: ~ is missing in the encoded set, since Windows
&gt; threats that character specially (e.g. &quot;PROGRA~1&quot; is a shortcut to the
&gt; first file starting with &quot;Progra&quot;).

Ugh.  The Microsoft page [1] about what characters to avoid does not say
that #\~ is treated specially.  Should #\~ be added to the encoded set?

&gt; Another example is &#xC2; (U+00A5). When represented in Japanese cp-932 it
&gt; maps to #x5C (just as \ does in ascii), which is treated as a path
&gt; separator. Because of this some programs (e.g. Cygwin) will choke on
&gt; filenames with U+00A5 when cp-932 is your local codepage, even though
&gt; U+00A5 itself is perfectly legal. This also applies to &#xE2; (U+20A9) in
&gt; Korean (cp-949), and possibly more.

Ugh.  I think that type of problem should be outside this SRFI's
concern, because it's variable and dependent on individuals' codepage
configurations, and there is not a proper solution (encoding the
majority of characters is not acceptable).

&gt; &gt;&gt; How about &quot;Encode everything
&gt; &gt;&gt; except for [a-zA-Z0-9_.-]&quot;? It's safe, short, simple and works for 99%
&gt; &gt;&gt; of libraries without any encoding at all.
&gt; &gt; 
&gt; &gt; Other cultures' characters must be usable unencoded, especially since
&gt; &gt; the targeted file systems support using them, and we want other
&gt; &gt; cultures' use of Scheme to not be discriminated against growing to be
&gt; &gt; more than 1% of libraries.
&gt; 
&gt; FWIW, using non-ascii symbols in source files is widely considered bad
&gt; manners in my culture. So while I do recognize value in not needing to
&gt; encode these symbols, I won't complain much about the discrimination.

Well, I think that's an unfortunate consequence of archaic poor
English-only designs, and your culture should take advantage of modern
character freedom :)

I think the cultures with very different alphabets, and there are
millions of programmers in them, are those who most appreciate being
able to use their characters unencoded.  If their characters are
encoded, their library files' names will be unintelligible, and that's
not acceptable.

&gt; Also note that file system support for localized characters in Windows
&gt; is (was?) problematic since it uses local codpeage in many places. Due
&gt; to this a filename with a Ukrainian '&#xD1;' (U+0456) is not accessible via
&gt; an SMB mount from a Windows with Russian settings [2].
&gt; 
&gt; [2] Once upon a time this bit a fair share of accountants in Ukraine.

The Microsoft page [1] says what characters are disallowed, and that's
what this SRFI is following.  I'll add whatever other unmentioned
prohibited/special/reserved characters to the set if necessary, but I
will not make other cultures' characters be encoded.  People who want to
use whatever characters can configure their Windows crap to make those
characters work in file names, right?  And when such files are packaged
and distributed to another platform, the correct file names will be
used, right?

[1] <a  rel="nofollow" href="http://msdn.microsoft.com/en-us/library/aa365247">http://msdn.microsoft.com/en-us/library/aa365247</a>(VS.85).aspx

-- 
: Derick
----------------------------------------------------------------

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00098" href="msg00098.html">Re: upcoming revision, need feedback</a></strong>
<ul><li><em>From:</em> Vitaly Magerya</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00091" href="msg00091.html">upcoming revision, need feedback</a></strong>
<ul><li><em>From:</em> Derick Eddington</li></ul></li>
<li><strong><a name="00092" href="msg00092.html">Re: upcoming revision, need feedback</a></strong>
<ul><li><em>From:</em> Vitaly Magerya</li></ul></li>
<li><strong><a name="00093" href="msg00093.html">Re: upcoming revision, need feedback</a></strong>
<ul><li><em>From:</em> Derick Eddington</li></ul></li>
<li><strong><a name="00096" href="msg00096.html">Re: upcoming revision, need feedback</a></strong>
<ul><li><em>From:</em> Vitaly Magerya</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00096.html">Re: upcoming revision, need feedback</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00098.html">Re: upcoming revision, need feedback</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00096.html">Re: upcoming revision, need feedback</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00098.html">Re: upcoming revision, need feedback</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00097"><strong>Date</strong></a></li>
<li><a href="threads.html#00097"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>

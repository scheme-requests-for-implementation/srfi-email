<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: remaining issues -->
<!--X-From-R13: Rrevpx Sqqvatgba <qrevpx.rqqvatgbaNtznvy.pbz> -->
<!--X-Date: Mon, 15 Mar 2010 23:44:41 +0000 (UTC) -->
<!--X-Message-Id: 1268696390.9494.182.camel@eep -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 1267837572.12814.109.camel@eep -->
<!--X-Reference: 201003070545.o275jjtC014624@garbo.cs.indiana.edu -->
<!--X-Reference: 1268013838.23559.217.camel@eep -->
<!--X-Reference: 201003081842.o28IgsK7032406@garbo.cs.indiana.edu -->
<!--X-Reference: 1268121335.29314.390.camel@eep -->
<!--X-Reference: 201003140412.o2E4CmjY023679@garbo.cs.indiana.edu -->
<!--X-Reference: 1268594484.2903.107.camel@eep -->
<!--X-Reference: 201003151409.o2FE9FdW006545@garbo.cs.indiana.edu -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: remaining issues</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00132.html">Date Prev</a>][<a href="msg00134.html">Date Next</a>][<a href="msg00132.html">Thread Prev</a>][<a href="msg00134.html">Thread Next</a>][<a href="maillist.html#00133">Date Index</a>][<a href="threads.html#00133">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: remaining issues</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: <a href="mailto:srfi-103@DOMAIN.HIDDEN">srfi-103@xxxxxxxxxxxxxxxxx</a></li>
<li><em>Subject</em>: Re: remaining issues</li>
<li><em>From</em>: Derick Eddington &lt;<a href="mailto:derick.eddington@DOMAIN.HIDDEN">derick.eddington@xxxxxxxxx</a>&gt;</li>
<li><em>Date</em>: Mon, 15 Mar 2010 16:39:50 -0700</li>
<li><em>Delivered-to</em>: <a href="mailto:srfi-103@DOMAIN.HIDDEN">srfi-103@xxxxxxxxxxxxxxxxx</a></li>
<li><em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed;        d=gmail.com; s=gamma;        h=domainkey-signature:received:received:subject:from:to:in-reply-to         :references:content-type:date:message-id:mime-version:x-mailer         :content-transfer-encoding;        bh=GIZZlbk/8k0nQTnav0DHxrEEY5mtaEkaSa1X+U2L9AM=;        b=HkC9Bcgs4euerMpCGZAu/cybRRX/XR9s8rRvX9rB/x3OuFRPenwlxYuQs4Gedwjj05         7vT65AVKCV/oRVauU5GGXtpDpzbKFcCuRbvHTjxd54+yyI/ULU62RQeNbGmiQ6WhBuKD         j98AfKWDMOrUwioK0PaocrJ4iPBr6gMSU3QW4=</li>
<li><em>Domainkey-signature</em>: a=rsa-sha1; c=nofws;        d=gmail.com; s=gamma;        h=subject:from:to:in-reply-to:references:content-type:date:message-id         :mime-version:x-mailer:content-transfer-encoding;        b=rUIRF0PUkz3xw6VzNyG2FdOm7kKGQDEvxcIYuQAQ+I2csLUF2OiMZi/Vv2k/aTMu6l         wctoQzIGew2LemLrzyWPEGNGixfONAu7++91Hn2EZHyD43OorLHCKHXoGlTRVI2BHQcP         MMa0d6wR+J4Er8wWhgcqyXduNP/04Jrv/86b0=</li>
<li><em>In-reply-to</em>: &lt;<a href="mailto:201003151409.o2FE9FdW006545@DOMAIN.HIDDEN">201003151409.o2FE9FdW006545@xxxxxxxxxxxxxxxxxxxx</a>&gt;</li>
<li><em>References</em>: &lt;<a href="mailto:1267837572.12814.109.camel@DOMAIN.HIDDEN"><a href="msg00119.html">1267837572.12814.109.camel@eep</a></a>&gt;	 &lt;<a href="mailto:201003070545.o275jjtC014624@DOMAIN.HIDDEN">201003070545.o275jjtC014624@xxxxxxxxxxxxxxxxxxxx</a>&gt;	 &lt;<a href="mailto:1268013838.23559.217.camel@DOMAIN.HIDDEN"><a href="msg00126.html">1268013838.23559.217.camel@eep</a></a>&gt;	 &lt;<a href="mailto:201003081842.o28IgsK7032406@DOMAIN.HIDDEN">201003081842.o28IgsK7032406@xxxxxxxxxxxxxxxxxxxx</a>&gt;	 &lt;<a href="mailto:1268121335.29314.390.camel@DOMAIN.HIDDEN"><a href="msg00129.html">1268121335.29314.390.camel@eep</a></a>&gt;	 &lt;<a href="mailto:201003140412.o2E4CmjY023679@DOMAIN.HIDDEN">201003140412.o2E4CmjY023679@xxxxxxxxxxxxxxxxxxxx</a>&gt;	 &lt;<a href="mailto:1268594484.2903.107.camel@DOMAIN.HIDDEN"><a href="msg00131.html">1268594484.2903.107.camel@eep</a></a>&gt;	 &lt;<a href="mailto:201003151409.o2FE9FdW006545@DOMAIN.HIDDEN">201003151409.o2FE9FdW006545@xxxxxxxxxxxxxxxxxxxx</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>On Mon, 2010-03-15 at 10:09 -0400, R. Kent Dybvig wrote:

&gt; Indeed.  This is why an extension in Chez Scheme's list of extensions
&gt; includes the &quot;.&quot; (if the programmer wants one).  It would be great if the
&gt; SRFI would go the same way, so that I don't have to support both forms.

Okay, I'll adopt that, with the restriction that &quot;.&quot; occur only as the
first character, to avoid the conflict mentioned in the current draft.
(The SRFI previously encoded &quot;.&quot; to avoid the conflict, and that was
changed in favor of not encoding it, disallowing it in extensions, and
using &quot;system-ext&quot; extensions instead of &quot;system.ext&quot;.)

&gt; &gt; However, it breaks mapping library-file names to library names, which
&gt; &gt; has been one of my original goals for this SRFI, because, e.g., 
&gt; &gt; acme/a%3A%b.ext might be (acme a%3A%b) or (acme a:b), and
&gt; &gt; foo/bar/zab.ext might be (foo/bar/zab), (foo bar/zab), (foo/bar zab), or
&gt; &gt; (foo bar zab).  Being able to programmatically manage/analyze
&gt; &gt; collections of library files (as far as what's possible from knowing
&gt; &gt; only library names) from only file-name listings has been important to
&gt; &gt; me.
&gt; 
&gt; I suppose the rationale for wanting this is in SRFI 104, but I haven't 
&gt; looked at that SRFI yet.  

The Design section of SRFI 103 says: 

        This SRFI supports files which each contain only one library.
        This supports one-to-one mapping library-file names to library
        names, which supports knowing what libraries are available and
        where they are located, from only file names.  
        
That is useful to humans reviewing/navigating collections of library
files and is useful for programmatically working with library files
without needing to read file contents (maybe the contents are
accidentally malformed but the processing doesn't care, or maybe you
don't have access to the files and are dealing with only a package
manifest).  SRFI 104 is intended to provide ready-made helpers for
working with library files.

&gt; But there's already ambiguity inherent in the
&gt; SRFI 103 mechanism.  If foo/bar/zab.ext is in /home/users/bob/libs, it
&gt; might already hold libraries (zab), (bar zab), (foo bar zab), (libs foo
&gt; bar zab), (bob libs foo bar zab), (users bob libs foo bar zab), or (home
&gt; users bob libs foo bar zab).  If /u is a link to /home/users, it might also
&gt; name (u bob libs foo bar zab).  Other links add other possibilities, and
&gt; you can't generally enumerate what they are because the links might exist
&gt; on external filesystems!  

I've been aware of that.  Programmatically-processed library-file names
need to be relative to their searched directory, which is a natural
approach.  SRFI 104's specification of 'library-file-name-info' mentions
this.  E.g., when programmatically working with collections of library
files, you change the current directory to searched directories and then
work with the recursively-listed file names.  I do that often.

&gt; &gt; I'm not sure it's the SRFI's place to involve special handling of 
&gt; &gt; (~ ---) or (/ ---), (c:/ ---), etc.
&gt; 
&gt; Perhaps not, but I'm sure it's my place not to implement a SRFI that
&gt; inhibits access to such files.

I don't want the SRFI to inhibit it.  I meant I'm not sure it's the
SRFI's place to specify or require the special handling.  Maybe there
should be some brief language saying that systems may have special
handling of library names they consider special?  I'm seeing this issue
as one of those things which should be intentionally left-out because it
complicates the specification with exceptional rules and is so dependent
on particular platforms, and so should be left to informal conventions.
But I'm open to changing my mind if it can be included smoothly (I know
that's vague, I need a clearer idea of how that could be done).

&gt; [&quot;sls&quot;] has been the extension of choice for r6rs libraries,

I feel largely responsible for that, and after concluding that
&quot;r6rs-lib&quot; is superior, I feel responsible for rectifying the situation.

&gt; and it's more pleasant than r6rs-lib.

(&quot;More pleasant&quot; is subjective.)

&gt; &gt; &quot;sls&quot; is currently being used for single-library and multiple-library
&gt; &gt; files.  If &quot;sls&quot; (or any extension) is used for different types/formats,
&gt; &gt; we can't programmatically process files based on their name extensions
&gt; &gt; because they could be something unknown.  &quot;r6rs-lib&quot; says precisely what
&gt; &gt; a file is: one R6RS library.  &quot;thing-libs&quot; means a file containing
&gt; &gt; multiple libraries of dialect Thing.
&gt; 
&gt; With the current SRFI draft, r6rs-lib can and will be used for
&gt; multiple-library files as well.  

The intent is that &quot;r6rs-lib&quot; will not.  

&gt; While the SRFI says an implementation
&gt; must support files with an r6rs-lib extension that have a single library
&gt; as the first datum, it doesn't say that an implementation must not support
&gt; files with an r6rs-lib extension that contain multiple library forms.  

The current draft says: &quot;files conforming to this SRFI have one library
per file&quot;, and &quot;extensions used for library-file names are encouraged to
precisely and unambiguously denote file types&quot;.  I think you're right,
for my intent for &quot;r6rs-lib&quot;, I should require that &quot;r6rs-lib&quot; files can
have only one library.

&gt; If
&gt; it did, I'd be trying to change that, because I see no reason to disallow
&gt; programmers from putting helper libraries in the same file as the library
&gt; directly imported from a program.

I don't want to inhibit systems from supporting multiple-library files.
For specification/implementation simplicity and for mapping library-file
names to library names, this SRFI specifies single-library file formats.
Multiple-library files just won't conform to that aspect.  I want
different file formats to have different extensions, so
multiple-R6RS-library files might use &quot;r6rs-libs&quot;.

How do you think multiple-R6RS-library files should be handled?  Like
Larceny, or something else?  E.g., not a bottom-up tree search like
Larceny, but something like: if multiple libraries are in a file located
according to this SRFI's current method they're all loaded; which means
a primary library can have its helpers occur first and they'll be
available for it, but helpers cannot be located if imported from a
library outside the file because they're not in a file which can be
found via their library name?

&gt; There's no reason you can't just change &quot;r6rs-lib&quot; to &quot;sls&quot; and make
&gt; exactly the same statement.

That doesn't address my other reasons for choosing &quot;r6rs-lib&quot;.

Why should the SRFI's R6RS library file format get &quot;Scheme library
source&quot;, when other formats or dialects are also Scheme library
sources?  

What extensions do you think other formats/dialects should use?  (If
they don't use distinct ones, there are problems and they're not nearly
as useful, as mentioned in the current draft.)

When the SRFI previously used &quot;sls&quot;, I felt compelled to name the
environment variables with &quot;R6RS_&quot; prefixes, to avoid having other
dialects using &quot;sls&quot; interfere with locating the SRFI's &quot;sls&quot; files.
But that's not as useful as one searched-directories configuration which
can work for multiple formats/dialects, and I was given the impression
that people want the environment variables named as &quot;SCHEME_&quot;.

-- 
: Derick
----------------------------------------------------------------

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00134" href="msg00134.html">Re: remaining issues</a></strong>
<ul><li><em>From:</em> R. Kent Dybvig</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00119" href="msg00119.html">remaining issue: Windows-disallowed file names</a></strong>
<ul><li><em>From:</em> Derick Eddington</li></ul></li>
<li><strong><a name="00124" href="msg00124.html">Re: remaining issue: Windows-disallowed file names</a></strong>
<ul><li><em>From:</em> R. Kent Dybvig</li></ul></li>
<li><strong><a name="00126" href="msg00126.html">Re: remaining issue: Windows-disallowed file names</a></strong>
<ul><li><em>From:</em> Derick Eddington</li></ul></li>
<li><strong><a name="00128" href="msg00128.html">Re: remaining issue: Windows-disallowed file names</a></strong>
<ul><li><em>From:</em> R. Kent Dybvig</li></ul></li>
<li><strong><a name="00129" href="msg00129.html">Re: remaining issue: Windows-disallowed file names</a></strong>
<ul><li><em>From:</em> Derick Eddington</li></ul></li>
<li><strong><a name="00130" href="msg00130.html">Re: remaining issue: Windows-disallowed file names</a></strong>
<ul><li><em>From:</em> R. Kent Dybvig</li></ul></li>
<li><strong><a name="00131" href="msg00131.html">Re: remaining issues</a></strong>
<ul><li><em>From:</em> Derick Eddington</li></ul></li>
<li><strong><a name="00132" href="msg00132.html">Re: remaining issues</a></strong>
<ul><li><em>From:</em> R. Kent Dybvig</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00132.html">Re: remaining issues</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00134.html">Re: remaining issues</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00132.html">Re: remaining issues</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00134.html">Re: remaining issues</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00133"><strong>Date</strong></a></li>
<li><a href="threads.html#00133"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>

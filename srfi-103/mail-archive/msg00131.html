<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: remaining issues -->
<!--X-From-R13: Rrevpx Sqqvatgba <qrevpx.rqqvatgbaNtznvy.pbz> -->
<!--X-Date: Sun, 14 Mar 2010 19:21:05 +0000 (UTC) -->
<!--X-Message-Id: 1268594484.2903.107.camel@eep -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 1267837572.12814.109.camel@eep -->
<!--X-Reference: 201003070545.o275jjtC014624@garbo.cs.indiana.edu -->
<!--X-Reference: 1268013838.23559.217.camel@eep -->
<!--X-Reference: 201003081842.o28IgsK7032406@garbo.cs.indiana.edu -->
<!--X-Reference: 1268121335.29314.390.camel@eep -->
<!--X-Reference: 201003140412.o2E4CmjY023679@garbo.cs.indiana.edu -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: remaining issues</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00130.html">Date Prev</a>][<a href="msg00132.html">Date Next</a>][<a href="msg00130.html">Thread Prev</a>][<a href="msg00132.html">Thread Next</a>][<a href="maillist.html#00131">Date Index</a>][<a href="threads.html#00131">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: remaining issues</h1>
<p style="max-width: 30em;">This page is part of the web mail archives of <a href="http://srfi.schemers.org/srfi-103">SRFI 103</a> from before July 7th, 2015.  The new archives for SRFI 103 are <a href="http://srfi-email.schemers.org/srfi-103/">here</a>.  Eventually, the entire history will be moved there, including any new messages.</p>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: <a href="mailto:srfi-103@DOMAIN.HIDDEN">srfi-103@xxxxxxxxxxxxxxxxx</a></li>
<li><em>Subject</em>: Re: remaining issues</li>
<li><em>From</em>: Derick Eddington &lt;<a href="mailto:derick.eddington@DOMAIN.HIDDEN">derick.eddington@xxxxxxxxx</a>&gt;</li>
<li><em>Date</em>: Sun, 14 Mar 2010 12:21:24 -0700</li>
<li><em>Delivered-to</em>: <a href="mailto:srfi-103@DOMAIN.HIDDEN">srfi-103@xxxxxxxxxxxxxxxxx</a></li>
<li><em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed;        d=gmail.com; s=gamma;        h=domainkey-signature:received:received:subject:from:to:in-reply-to         :references:content-type:date:message-id:mime-version:x-mailer         :content-transfer-encoding;        bh=uHTSUPbCluNz/aWHkx8UYWmsHhUgNX9U1q/ovNwOcLY=;        b=TO8QezhZZdiSjBNZ8F1us3RvOMY4ifjnxzbq9LSFMm3koXj3ENsq+Ki68TaTnigSlk         NtOBubMmIow0TFQatfUhNW59xdbgDAyHz1z2000+JL6CmHRJ+JUuOaHWQQOOiuk+z/JY         M8qEOkRRhXSS7TDQoMiW2GTMqRwrupnLyUfEA=</li>
<li><em>Domainkey-signature</em>: a=rsa-sha1; c=nofws;        d=gmail.com; s=gamma;        h=subject:from:to:in-reply-to:references:content-type:date:message-id         :mime-version:x-mailer:content-transfer-encoding;        b=Oze6eRTpwxeVfJPFynJQXnRalpnTUM6d8k/NiyHGP4y2/1UHLdzlBHldIeMopXWsMQ         kwRqWCdSGl7ksswuhAY6cVb84OIn3EbhxCaxdM6SXoIeJxYNxT9/qp6TxghorMuVzZ03         7H1n/58f3vmqZJGpWfcoclBVkAqsdG++rvS18=</li>
<li><em>In-reply-to</em>: &lt;<a href="mailto:201003140412.o2E4CmjY023679@DOMAIN.HIDDEN">201003140412.o2E4CmjY023679@xxxxxxxxxxxxxxxxxxxx</a>&gt;</li>
<li><em>References</em>: &lt;<a href="mailto:1267837572.12814.109.camel@DOMAIN.HIDDEN"><a href="msg00119.html">1267837572.12814.109.camel@eep</a></a>&gt;	 &lt;<a href="mailto:201003070545.o275jjtC014624@DOMAIN.HIDDEN">201003070545.o275jjtC014624@xxxxxxxxxxxxxxxxxxxx</a>&gt;	 &lt;<a href="mailto:1268013838.23559.217.camel@DOMAIN.HIDDEN"><a href="msg00126.html">1268013838.23559.217.camel@eep</a></a>&gt;	 &lt;<a href="mailto:201003081842.o28IgsK7032406@DOMAIN.HIDDEN">201003081842.o28IgsK7032406@xxxxxxxxxxxxxxxxxxxx</a>&gt;	 &lt;<a href="mailto:1268121335.29314.390.camel@DOMAIN.HIDDEN"><a href="msg00129.html">1268121335.29314.390.camel@eep</a></a>&gt;	 &lt;<a href="mailto:201003140412.o2E4CmjY023679@DOMAIN.HIDDEN">201003140412.o2E4CmjY023679@xxxxxxxxxxxxxxxxxxxx</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>On Sat, 2010-03-13 at 23:12 -0500, R. Kent Dybvig wrote:

&gt; &gt; In conclusion, I don't see why considering library names as
&gt; &gt; representations of contemporary file names is proper, and I don't see
&gt; &gt; why it outweighs the importance of abstract unrestricted library names.
&gt; 
&gt; All of what you say follows from your perspective but is uncompelling to
&gt; me from my perspective.  So perhaps we just have to agree to disagree.

Agreed.

(I'd like to make a point I didn't.  With file-name extensions
automatically added, you can't name every possible file via library
names, because you can't get a file name without a &quot;.&quot; and extension.
Perhaps this could be solved by interpreting an empty-string extension
as meaning &quot;don't add an extension&quot;, but that might conflict with the
interpretation of an empty-string extension as meaning &quot;include
system-default extensions&quot;, unless you add more special rules about
where the empty-string extension occurs.)

&gt; But in your second-to-last paragraph:
&gt; 
&gt; &gt; If you want to override the SRFI to catch such library names, you can
&gt; &gt; also map them to a file name without the SRFI's encoding (maybe just the
&gt; &gt; &quot;absolute path&quot; first symbol).  Same for ~.
&gt; 
&gt; lies a possible compromise I might be able to justify implementing: 
&gt; require a system to look first for the unencoded version of the
&gt; constructed pathname (ignoring search-path prefixes if the pathname is
&gt; absolute in the host filesystem) and, if that fails, then for the encoded
&gt; version.  For example, say the list of library directories includes &quot;lib1&quot;
&gt; and &quot;lib2&quot; and the list of library extensions includes only &quot;sls&quot;.  Then
&gt; the system looks for (/ foo) first in /foo.sls, then in lib1/%2f%/foo.sls,
&gt; then in lib2/%2f%/foo.sls.  It looks for (srfi :1) first in
&gt; lib1/srfi/:1.sls, then in lib2/srfi/:1.sls, then in lib1/srfi/%3a%1.sls,
&gt; then in lib2/srfi/%3a%1.sls.  This should allow one to name any file that
&gt; exists in the filesystem and to specify absolute pathnames for convenience
&gt; or security, without inhibiting the sharing of filenames with funny
&gt; characters via the %scalar-value% encoding.  Obviously, a system could
&gt; choose not to bother trying the unencoded version of the path name if it
&gt; is clearly not valid for the underlying filesystem.

I think such unencoded-then-encoded lookup would work.  I'm going to
explore adopting it, and I'll get back to here about that.  

However, it breaks mapping library-file names to library names, which
has been one of my original goals for this SRFI, because, e.g., 
acme/a%3A%b.ext might be (acme a%3A%b) or (acme a:b), and
foo/bar/zab.ext might be (foo/bar/zab), (foo bar/zab), (foo/bar zab), or
(foo bar zab).  Being able to programmatically manage/analyze
collections of library files (as far as what's possible from knowing
only library names) from only file-name listings has been important to
me.

I'm not sure it's the SRFI's place to involve special handling of 
(~ ---) or (/ ---), (c:/ ---), etc.

&gt; Incidentally, is there a reason to chose &quot;r6rs-lib&quot; as the extension for
&gt; R6RS libraries rather than the shorter &quot;sls&quot; as recommended in the R6RS
&gt; non-normative appendices?  We selected sls because it did not (to our
&gt; knowledge) conflict with existing extensions for Scheme source code, so I
&gt; assume that's not your reason.  If there is no particular reason why you
&gt; chose r6rs-lib, please change it to sls.

I can't find &quot;sls&quot; in the Non-Normative Appendices nor any of the other
R6RS documents.

I do have particular reasons for choosing &quot;r6rs-lib&quot;.  

&quot;sls&quot; is currently being used for single-library and multiple-library
files.  If &quot;sls&quot; (or any extension) is used for different types/formats,
we can't programmatically process files based on their name extensions
because they could be something unknown.  &quot;r6rs-lib&quot; says precisely what
a file is: one R6RS library.  &quot;thing-libs&quot; means a file containing
multiple libraries of dialect Thing.

What if a Scheme system wants to support multiple types/formats of
library files and use the extension to know how to handle?  What if
multiple implementations of a library for multiple Scheme dialects (i.e.
the files have the same name modulo extension) should be in the same
directory?  They're all &quot;Scheme library sources&quot; (i.e. &quot;sls&quot;), but they
can't all have the same extension, so why should this SRFI's format for
R6RS library files get &quot;sls&quot;?

For only the tiny price of 5 more characters, a number of benefits are
gained.  If actually understanding the type/format of files requires my
human analysis or analyzing the file contents, I don't see the point of
having barely-useful wannabe types jerry-rigged into file names.  I see
file-name extensions as global names which need to be precisely
unambiguous, not as local names which are okay to be super truncated and
rely on context for disambiguation.  (I wish prevalent file systems had
metadata outside the file name and contents and which could be used for
file typing (and other purposes), maybe in the future...)

I tried to succinctly address all this in the new section &quot;Dialects,
Formats, and Extensions&quot; in the current draft.

&gt; Also, Chez Scheme treats a trailing separator character (&quot;:&quot; under
&gt; Unix-based systems, &quot;;&quot; under Windows) in its variants of SCHEME_LIB_PATH
&gt; and SCHEME_LIB_EXTENSIONS as an indication that the system should look in
&gt; the system-specific libraries/extensions if the library isn't found in
&gt; the user-specified set.  (This mirrors similar behavior for the
&gt; LD_LIBRARY_PATH variable used by some Unix dynamic loaders.)  Perhaps SRFI
&gt; 103 should do the same.  For example, if SCHEME_LIB_PATH is set to
&gt; &quot;foo:bar&quot; on a Unix-based system, the system should look in foo and bar
&gt; only, but if SCHEME_LIB_PATH is set to &quot;foo:bar:&quot;, the system should look
&gt; in foo, bar, and any system-specific library directories.  It is useful to
&gt; prevent the system from looking in system-specific libraries if you want
&gt; to make sure you know exactly where each library is coming from, and it is
&gt; useful for user directories to be searched first if you have a library
&gt; you want used in preference to one shipped with the implementation.

I know about that and I questioned whether the SRFI should involve it.
I decided not to because it's system-specific and the purpose of the
SRFI's environment variables is for telling what directories/extensions
to portably use across arbitrary multiple systems, and some systems may
not have the notion of system-default directories/extensions, so
something which has system-specific effects doesn't seem appropriate to
involve.  What should it mean to a system which doesn't have the notion?

However, I intended that systems still be free to interpret a trailing
separator character as you described above.  The current draft says the
environment variables' values are &quot;a string containing a sequence of
[things] separated by [a separator]&quot; and it says &quot;Scheme systems may
initialize the [abstract sequence of things] to include additional
[things]&quot;.  Since an empty-string directory-name/extension is otherwise
improper, systems may interpret a trailing empty-string thing as meaning
something special.  If users know that all the systems they're using
interpret it as you described above, it'll work for them; but if it
doesn't make sense for some system, then it doesn't make sense to do it
in the for-portable-cross-system-use environment variables.  I've been
imagining that systems will still have their own environment variables
for system-specific configuration.

-- 
: Derick
----------------------------------------------------------------


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00132" href="msg00132.html">Re: remaining issues</a></strong>
<ul><li><em>From:</em> R. Kent Dybvig</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00119" href="msg00119.html">remaining issue: Windows-disallowed file names</a></strong>
<ul><li><em>From:</em> Derick Eddington</li></ul></li>
<li><strong><a name="00124" href="msg00124.html">Re: remaining issue: Windows-disallowed file names</a></strong>
<ul><li><em>From:</em> R. Kent Dybvig</li></ul></li>
<li><strong><a name="00126" href="msg00126.html">Re: remaining issue: Windows-disallowed file names</a></strong>
<ul><li><em>From:</em> Derick Eddington</li></ul></li>
<li><strong><a name="00128" href="msg00128.html">Re: remaining issue: Windows-disallowed file names</a></strong>
<ul><li><em>From:</em> R. Kent Dybvig</li></ul></li>
<li><strong><a name="00129" href="msg00129.html">Re: remaining issue: Windows-disallowed file names</a></strong>
<ul><li><em>From:</em> Derick Eddington</li></ul></li>
<li><strong><a name="00130" href="msg00130.html">Re: remaining issue: Windows-disallowed file names</a></strong>
<ul><li><em>From:</em> R. Kent Dybvig</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00130.html">Re: remaining issue: Windows-disallowed file names</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00132.html">Re: remaining issues</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00130.html">Re: remaining issue: Windows-disallowed file names</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00132.html">Re: remaining issues</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00131"><strong>Date</strong></a></li>
<li><a href="threads.html#00131"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>

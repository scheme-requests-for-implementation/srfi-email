<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: five problems with this draft SRFI -->
<!--X-From-R13: Rrevpx Sqqvatgba <qrevpx.rqqvatgbaNtznvy.pbz> -->
<!--X-Date: Thu,  1 Oct 2009 09:10:44 +0000 (UTC) -->
<!--X-Message-Id: 1254387809.16836.435.camel@eep -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 17989305.811831254316261823.JavaMail.root@zimbra -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: five problems with this draft SRFI</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00041.html">Date Prev</a>][<a href="msg00043.html">Date Next</a>][<a href="msg00041.html">Thread Prev</a>][<a href="msg00029.html">Thread Next</a>][<a href="maillist.html#00042">Date Index</a>][<a href="threads.html#00042">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: five problems with this draft SRFI</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: William D Clinger &lt;<a href="mailto:will@DOMAIN.HIDDEN">will@xxxxxxxxxxx</a>&gt;</li>
<li><em>Subject</em>: Re: five problems with this draft SRFI</li>
<li><em>From</em>: Derick Eddington &lt;<a href="mailto:derick.eddington@DOMAIN.HIDDEN">derick.eddington@xxxxxxxxx</a>&gt;</li>
<li><em>Date</em>: Thu, 01 Oct 2009 02:03:29 -0700</li>
<li><em>Cc</em>: <a href="mailto:srfi-103@DOMAIN.HIDDEN">srfi-103@xxxxxxxxxxxxxxxxx</a></li>
<li><em>Delivered-to</em>: <a href="mailto:srfi-103@DOMAIN.HIDDEN">srfi-103@xxxxxxxxxxxxxxxxx</a></li>
<li><em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed;        d=gmail.com; s=gamma;        h=domainkey-signature:received:received:subject:from:to:cc         :in-reply-to:references:content-type:date:message-id:mime-version         :x-mailer:content-transfer-encoding;        bh=Uajtrzk/GF8me2HlxJ7oq/ljPtpWA4SGmPeiHQF50+Y=;        b=ItaSP20UBhHx7OohY8IcO1/NhWp4yNc1in28z3dgis+rPKJhYspGuYRGLd52XYUkR8         cTlrWUbKUlk7RnNBx5LzuxXi5/VP5NZT6G9fln+UUCe6asFEV1aQ/dudFn6JjvilAy/w         Vtap5IlK1zFvOyqNpZcCNKIDF0/xjmDPB8Fk4=</li>
<li><em>Domainkey-signature</em>: a=rsa-sha1; c=nofws;        d=gmail.com; s=gamma;        h=subject:from:to:cc:in-reply-to:references:content-type:date         :message-id:mime-version:x-mailer:content-transfer-encoding;        b=vJu7ab/4WxXyioUTW5BnqorOnEGfR20tPfXHKivr2JKNvBbSLoPMkQXtJCUwCt+6LU         t6z3LR6JGVt46oaLuLQiypzRfNNBVByiIWKFs7HPQ6q/N57++c+KufXuMN7yjysEOtdD         e9DLbOASjnySoFKHj6g9WWhbcNhuNle5n3VkI=</li>
<li><em>In-reply-to</em>: &lt;<a href="mailto:17989305.811831254316261823.JavaMail.root@DOMAIN.HIDDEN"><a href="msg00041.html">17989305.811831254316261823.JavaMail.root@zimbra</a></a>&gt;</li>
<li><em>References</em>: &lt;<a href="mailto:17989305.811831254316261823.JavaMail.root@DOMAIN.HIDDEN"><a href="msg00041.html">17989305.811831254316261823.JavaMail.root@zimbra</a></a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>[I have put extra time into trying to make this email clear, insightful,
and productive.]

On Wed, 2009-09-30 at 09:11 -0400, William D Clinger wrote:
&gt; Derick Eddington wrote:
&gt; &gt; Library references, in the current draft SRFI,
&gt; &gt; always do have a one-to-infinite mapping to file names, because an R6RS
&gt; &gt; version reference, including an empty/non-existent one, always matches
&gt; &gt; versions with more components than in the version reference, and the
&gt; &gt; possibilities are infinite.
&gt; 
&gt; I appreciate the clarification.

Thank you for helping analyze this draft SRFI.

&gt; As I predicted in a message sent to r6rs-discuss before
&gt; the ratification vote (but am too lazy to look up right
&gt; now), the version number is being treated as part of the
&gt; library	name, but with special rules that add complexity
&gt; to both the semantics as seen by programmers and to
&gt; implementations.

Do you think versioning should be treated, in any way, as part of the
library name and/or library reference?  

Treating it as part of both makes a lot of sense to me.  Version 1.2 of
a library is a different thing than version 0.7.  In natural language,
when we refer to a versioned library, it's normal to call it &quot;Foo 1.2&quot;
because that's the name of that distinct thing, and it's normal to say
&quot;Foo greater than 0.7&quot; when referring to what library to use.

I expect versioning in names and references to be treated with special
rules because the purpose of having versioning in them is to have
special semantics.  Different versions of libraries, and so version
constraints, are reality.  The complexity added by versioning is not
going away, it's just a matter of where it gets pushed to.  I think it
makes a lot of sense to have the language support versioning in the same
way we use it in natural language: as part of the name or reference, as
part of the language, at the syntactic site libraries are named or
referred to.  Until someone convinces me why that shouldn't make sense
to me, I'm going to desire versioning support like R6RS's and desire to
support it in this SRFI.

A personal example: I have built a library (let's call it A, for below)
on top of someone else's library, and their library (let's call it B)
already comes with its own version numbering and I made it into an R6RS
library with the version in the name.  Older versions of it are not
acceptable for my library but would correctly import.  So, I used
version constraints to make only versions great enough acceptable.  If I
were not sure future new series of versions would be acceptable, I could
also further constrain the acceptable versions.  If I did not have
version constraints and only had versions as a non-special part of a
library name, I could refer to only one version which is acceptable.

That does not seem acceptable because of the following possible problem:
library A, which can refer to only one version of library B, is stored
such that it cannot be modified by some user; some library C needs to
use a version of library B different than the version library A refers
to but which library A could have also used; the user needs to use
libraries A, B, and C in the same program; for this case, it is not
acceptable to have two different versions of library B instantiated;
therefore, the user cannot run the program, which could have been run if
only libraries A and C could refer to library B such that a single
version acceptable to both could be used.  

The user might be able to hack around this problem by making a copy of
library A and modifying it and modifying the search paths to use it, but
the user probably isn't sure it can use the same version of library B
which library C needs, and even if the user is sure, I don't find the
ability to hack around the problem a convincing justification for why
multiple-version-allowing version constraints in library references are
not needed.

How do you think the above problem should be solved? 

&gt; The mapping from library references to file names is
&gt; one-to-infinite, but this draft SRFI still contains
&gt; design decisions and rationales that are based upon
&gt; the utility of one-to-one mappings between library
&gt; names and file names.
&gt; 
&gt; I maintain that the one-to-one mapping doesn't really
&gt; exist given the realities of this draft SRFI, 

A reality of this draft SRFI is that there is a one-to-one mapping from
file names (possibly with versions) to library names (possibly with
versions), and that this can be utilized.  The utility of single-library
files, whose name exactly represents the name of the contained library,
exists whether or not this SRFI supports R6RS's library names and
versioning.

The draft has such single-library files so that:

* People and programs can analyze a file name listing and from only that
know what libraries and their versions are present and where, by taking
advantage of the one-to-one mapping.

* If we want to find the files which satisfy a library reference
(whether or not we have library references which allow an infinite
number of possible versions), we need to deal with only file names and
we don't have to search through the contents of multiple-library files.

* If we want to do something with a file containing the library with a
given name (possibly with a version), we can one-to-many map the library
name to a bounded set of file names, and know only that library is in a
file with one of the file names.

Thank you for helping me distill these design rationales.  I will revise
the draft to attempt to better convey them.  I apologize for confusing
the issue with less apt wording; I was trying to be very succinct.

&gt; from
&gt; which I conclude that the design decisions and rationales
&gt; based on that nonexistent mapping should be reconsidered.

If it were not proper to consider versioning as part of the library name
and library reference, I'd agree with that conclusion.  But I don't see
why versioning, including version constraints, is not properly
considered part of them, and so not properly part of the file name in a
scheme designed for utilizing single-library files with names which
exactly represent the name of the contained library.

My position has swayed towards being more in favor of the current
draft's versioning support.

-- 
: Derick
----------------------------------------------------------------

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00041" href="msg00041.html">Re: five problems with this draft SRFI</a></strong>
<ul><li><em>From:</em> William D Clinger</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00041.html">Re: five problems with this draft SRFI</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00043.html">Keeping the version in filenames</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00041.html">Re: five problems with this draft SRFI</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00029.html">Search Order</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00042"><strong>Date</strong></a></li>
<li><a href="threads.html#00042"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>

<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: remaining issue: Windows&#45;disallowed file names -->
<!--X-From-R13: Rrevpx Sqqvatgba <qrevpx.rqqvatgbaNtznvy.pbz> -->
<!--X-Date: Mon,  8 Mar 2010 02:04:07 +0000 (UTC) -->
<!--X-Message-Id: 1268013838.23559.217.camel@eep -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 1267837572.12814.109.camel@eep -->
<!--X-Reference: 201003070545.o275jjtC014624@garbo.cs.indiana.edu -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: remaining issue: Windows-disallowed file names</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00125.html">Date Prev</a>][<a href="msg00127.html">Date Next</a>][<a href="msg00124.html">Thread Prev</a>][<a href="msg00127.html">Thread Next</a>][<a href="maillist.html#00126">Date Index</a>][<a href="threads.html#00126">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: remaining issue: Windows-disallowed file names</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: <a href="mailto:srfi-103@DOMAIN.HIDDEN">srfi-103@xxxxxxxxxxxxxxxxx</a></li>
<li><em>Subject</em>: Re: remaining issue: Windows-disallowed file names</li>
<li><em>From</em>: Derick Eddington &lt;<a href="mailto:derick.eddington@DOMAIN.HIDDEN">derick.eddington@xxxxxxxxx</a>&gt;</li>
<li><em>Date</em>: Sun, 07 Mar 2010 18:03:58 -0800</li>
<li><em>Delivered-to</em>: <a href="mailto:srfi-103@DOMAIN.HIDDEN">srfi-103@xxxxxxxxxxxxxxxxx</a></li>
<li><em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed;        d=gmail.com; s=gamma;        h=domainkey-signature:received:received:subject:from:to:in-reply-to         :references:content-type:date:message-id:mime-version:x-mailer         :content-transfer-encoding;        bh=nBXUgN9hPVKNdiABWHOQlspSwqT2zwNCEk28sz6nrNo=;        b=Jq4nF2MMMQICtfWIHxXLsPVl7POzZDlJohJb4wKqhk2bKk4NFGodjy09KYEZvg2Uj4         iubHWct50OUiCN4dX7Os2oEmvoyTIWoy9vZtxqkAbNSi6u9pjzeMEMIt7ODPIMdlwmG+         flolPodQrwNwwK5eUKauEvk7XLh0Emv7/mDQY=</li>
<li><em>Domainkey-signature</em>: a=rsa-sha1; c=nofws;        d=gmail.com; s=gamma;        h=subject:from:to:in-reply-to:references:content-type:date:message-id         :mime-version:x-mailer:content-transfer-encoding;        b=ENrVi8om5gc8pPkb03zd27XJbwUwqi61MNsndFooXqJS0q8dv9kOyFgISoxLw5m/Mp         /PKU1mENC7tU6BbPQo1UFa9vsUwLFy6x/FTxHMQg7ChIx402+hXcrvXUhyTDRGWO4Bwy         MnXvAKmjMVS0PHEbHSTUBKsYqHyMPmHa6B8eU=</li>
<li><em>In-reply-to</em>: &lt;<a href="mailto:201003070545.o275jjtC014624@DOMAIN.HIDDEN">201003070545.o275jjtC014624@xxxxxxxxxxxxxxxxxxxx</a>&gt;</li>
<li><em>References</em>: &lt;<a href="mailto:1267837572.12814.109.camel@DOMAIN.HIDDEN"><a href="msg00119.html">1267837572.12814.109.camel@eep</a></a>&gt;	 &lt;<a href="mailto:201003070545.o275jjtC014624@DOMAIN.HIDDEN">201003070545.o275jjtC014624@xxxxxxxxxxxxxxxxxxxx</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>On Sun, 2010-03-07 at 00:45 -0500, R. Kent Dybvig wrote:

&gt; &gt; But, not being able to name libraries with the same freedom as with all
&gt; &gt; other symbols (and that freedom is a big thing I love about Scheme) ...
&gt; 
&gt; Yes, but even though you can create a string containing any sequence of
&gt; characters, you don't necessarily have the freedom to use it as a
&gt; pathname.  Should we modify open-file-input-port, etc., so that we do,
&gt; somehow?  

No, because file-name strings are inherently platform specific.  Library
names (for portable libraries) are supposed to be completely abstracted
from any platform, and that's why I'm convinced allowing them to be
determined by the flaws of platforms is unacceptable.

&gt; Scheme's freedom is curtailed once one interacts with things
&gt; outside of Scheme.  That's life.

(Not after Scheme takes over everything... :-)

&gt; Have you thought about what to do when a library name translates to a file
&gt; name or pathname longer than allowed by the underlying file system?  

I have known that issue exists.

&gt; 255
&gt; seems to be a fairly common limit for a file name, and 1024 and 4096 seem
&gt; to be fairly common limits for paths on Unix systems.  These are fairly
&gt; generous limits, but symbols don't have any such limits.  (Plus, 255 gets
&gt; eaten up faster when a lot of long encodings are used.)  If I have the
&gt; freedom to use arbitrary symbols as library name components, shouldn't
&gt; that freedom extend to size as well as contents?

Yes, it should.  That issue is virtually never going to be a problem,
but the Windows-portability issue is going to be.  If that issue was
realistically going to determine library names, I'd have a problem with
it too.  Also, there's nothing SRFI 103 can do about that issue (I
think), but it can do something about the Windows-portability issue.

&gt; Also, I'd like the freedom to use libraries stored in the user's home
&gt; directory, like (~ \x2e;myappinit) in ~/.myappinit.sls, assuming the
&gt; Scheme system interprets ~ the way a shell does, as some do.  The encoding
&gt; of ~ prevents that.  

That's not portable and SRFI 103's purpose is supposed to be portability
across prevalent OSs, so it's not supposed to be concerned with that.
That can be portably accomplished with libraries named like 
(personal ---) and (for unixes) placing the &quot;personal&quot; directories in
home directories and doing 
SCHEME_LIB_PATH=$HOME/wherever:$SCHEME_LIB_PATH.

&gt; Similarly, I would like the freedom to import from
&gt; absolute path names starting with /, e.g., so a set-uid script can
&gt; protect itself from exploits involving the setting of the library-path
&gt; environment variable.  The encoding of / prevents that.  

Actually, the joining of relative library-file names with
searched-directory names is what prevents that (assuming I'm
understanding what you mean).  Without the encoding, a library named 
(/ foo), with SCHEME_LIB_PATH=/exploit, will be found
at /exploit///foo.ext.  That's an OS-security design flaw, and OSs
should have better security models.

So, I don't think your arguments are convincing reasons for losing the
portability-assisting special mapping rules.

&gt; One freedom leads
&gt; to the loss of others.

In the sense we've been using &quot;freedom&quot;, indeed.  (In the libertarian
semantics of &quot;freedom&quot;, that's not possible, but I digress.)

&gt; I support the notion that we not encode any characters but instead leave
&gt; it to library authors to choose names that don't conflict with the systems
&gt; upon which they intend their libraries to be used.  

You have a lot of weight (metaphorically :-), so I'm leaning towards
losing it, but only because I think Windows deserves that.

&gt; Programmers can police
&gt; the authors who don't initially comply.  

I'll be telling people: &quot;Sorry you can't automatically use that library
I made, it's Windows' fault.&quot;  I'm okay with that, and I want to make
sure everyone else is ready.

&gt; Sure, a library named
&gt; (srfi s2 and-let-star) might be uglier than (srfi :2 and-let*), 

For me, that's not an issue of ugliness, it's an issue of corresponding
to the intended meaning of the library.  A library named (acme thing?)
is named that because it exports &quot;thing?&quot;, not &quot;thing&quot; or
&quot;thing-predicate&quot;.

&gt; but it's
&gt; not clearly better to have a file named srfi/%3a%/and-let%2a%.

The undesirability of the ugliness, annoying-to-type-ness, and small
additional processing of the encoding should not outweigh keeping the
primary abstraction of library names pure.

I think it's clearly better to not restrict library names *and* to have
portability with Windows (because I think it'll help Scheme adoption),
via an encoding design which will die when Windows does and which won't
be used much.  

I want to make sure other weighty people have a chance to comment.  I'm
going to wait until the end of the draft period (in 1 month) to make a
decision.

-- 
: Derick
----------------------------------------------------------------

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00127" href="msg00127.html">Re: remaining issue: Windows-disallowed file names</a></strong>
<ul><li><em>From:</em> Derick Eddington</li></ul></li>
<li><strong><a name="00128" href="msg00128.html">Re: remaining issue: Windows-disallowed file names</a></strong>
<ul><li><em>From:</em> R. Kent Dybvig</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00119" href="msg00119.html">remaining issue: Windows-disallowed file names</a></strong>
<ul><li><em>From:</em> Derick Eddington</li></ul></li>
<li><strong><a name="00124" href="msg00124.html">Re: remaining issue: Windows-disallowed file names</a></strong>
<ul><li><em>From:</em> R. Kent Dybvig</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00125.html">Re: Character encoding</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00127.html">Re: remaining issue: Windows-disallowed file names</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00124.html">Re: remaining issue: Windows-disallowed file names</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00127.html">Re: remaining issue: Windows-disallowed file names</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00126"><strong>Date</strong></a></li>
<li><a href="threads.html#00126"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>

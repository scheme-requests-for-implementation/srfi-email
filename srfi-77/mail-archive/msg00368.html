<!-- MHonArc v2.6.15 -->
<!--X-Subject: Re: arithmetic issues -->
<!--X-From-R13: Oyna Ingfba <n.jngfbaNnfgebfzb.hanz.zk> -->
<!--X-Date: Thu, 19 Jan 2006 17:28:55 +0100 (MET) -->
<!--X-Message-Id: 43CFBE3A.1080504@astrosmo.unam.mx -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: E1EzSZd&#45;0004Q9&#45;Le@adara.ccs.neu.edu -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: arithmetic issues</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00367.html">Date Prev</a>][<a href="msg00369.html">Date Next</a>][<a href="msg00364.html">Thread Prev</a>][<a href="msg00365.html">Thread Next</a>][<a href="maillist.html#00368">Date Index</a>][<a href="threads.html#00368">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: arithmetic issues</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: William D Clinger &lt;<a href="mailto:will@DOMAIN.HIDDEN">will@xxxxxxxxxxx</a>&gt;</li>
<li><em>Subject</em>: Re: arithmetic issues</li>
<li><em>From</em>: Alan Watson &lt;<a href="mailto:a.watson@DOMAIN.HIDDEN">a.watson@xxxxxxxxxxxxxxxx</a>&gt;</li>
<li><em>Date</em>: Thu, 19 Jan 2006 10:28:42 -0600</li>
<li><em>Cc</em>: <a href="mailto:srfi-77@DOMAIN.HIDDEN">srfi-77@xxxxxxxxxxxxxxxxx</a></li>
<li><em>Delivered-to</em>: <a href="mailto:srfi-77@DOMAIN.HIDDEN">srfi-77@xxxxxxxxxxxxxxxxx</a></li>
<li><em>In-reply-to</em>: &lt;<a href="mailto:E1EzSZd-0004Q9-Le@DOMAIN.HIDDEN">E1EzSZd-0004Q9-Le@xxxxxxxxxxxxxxxxx</a>&gt;</li>
<li><em>Organization</em>: Centro de Radioastronom&#xED;a y Astrof&#xED;sica UNAM</li>
<li><em>References</em>: &lt;<a href="mailto:E1EzSZd-0004Q9-Le@DOMAIN.HIDDEN">E1EzSZd-0004Q9-Le@xxxxxxxxxxxxxxxxx</a>&gt;</li>
<li><em>User-agent</em>: Mozilla Thunderbird 1.0.7 (X11/20051113)</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">
William D Clinger wrote:
</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
I think the major difference between us is what we
mean by the word &quot;adequate&quot;.  I want the base language
to be adequate to support a portable implementation of
</pre><tt>the full numeric tower. 
</tt></blockquote><pre style="margin: 0em;">

</pre><tt>Would it be correct to say that you want the base language to include 
</tt><tt>all of the tools necessary for building a &quot;full&quot; Scheme? Therefore, 
</tt><tt>since you suspect that R6RS will not mandate the full tower, you want 
</tt><tt>the base language to provide the primitives to implement the full tower.
</tt><pre style="margin: 0em;">

</pre><tt>(I that is the case, I have to say that it I would not have understood 
</tt><tt>that from the SRFI document. Reading it again, the emphasis for the 
</tt><tt>fixnum and flonum routines seems to be on efficiency rather than 
</tt><tt>providing a set of tools for implementing the full tower.)
</tt><pre style="margin: 0em;">

</pre><tt>Okay, that's reasonable and consistent. But where does it end? A &quot;full&quot; 
</tt><tt>Scheme should have some kind of string ports; should the base language 
</tt><tt>expose the reader suffiently to allow these to be implemented? A full 
</tt><tt>Scheme should have vector-map, but in many implementations, this cannot 
</tt><tt>be implemented efficiently in Scheme; should it be part of the base 
</tt><tt>language?
</tt><pre style="margin: 0em;">

&gt; I don't fully understand what
&gt; you mean by adequate, because I don't think you have
&gt; yet explained yourself.

I want the base language to be a minimal Scheme that is still useful.
This primarily to make it easy to teach and learn.

</pre><tt>This is not so well defined, I acknowledge. Possibly the minimal Scheme 
</tt><tt>that is still useful has symbols, exact integers, lists, lambda, define, 
</tt><tt>apply, map, for-each, call-with-current-continuation, error handlers, 
</tt><tt>and that's all. Perhaps you add characters and strings. Perhaps you add 
</tt><tt>vectors. Perhaps you make it all of R5RS but not much more. Perhaps you 
</tt><tt>only include what's necesary to run the code in &quot;The Little Schemer&quot; and 
</tt><tt>&quot;The Seasoned Schemer&quot;.
</tt><pre style="margin: 0em;">

</pre><tt>Literal constants in programs are a problem. Perhaps you include all of 
</tt><tt>them in the base language, but do not define any procedures on them 
</tt><tt>(e.g., I can read a flonum, but I cannot do anything useful with it). 
</tt><tt>Perhaps when you import a library module that defines a read that 
</tt><tt>recognizes flonums, you signal to the program reader that it too should 
</tt><tt>recognize flonums.
</tt><pre style="margin: 0em;">

</pre><tt>I am not against including the tools in R6RS, but they should be pushed 
</tt><tt>off into the library. I think a good example of what I want is 
</tt><tt>&lt;complex.h&gt; in C99. You cannot write this is &quot;base C99&quot; (the langauge 
</tt><tt>part of C99 plus, say, &lt;float.h&gt;), so it has to be provided by the 
</tt><tt>implementor. I would not object to the fixnum or flonum parts of SRFI-77 
</tt><tt>if they were available as a library module.
</tt><pre style="margin: 0em;">

</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
Nothing in SRFI-77 even
suggests that implementations are forbidden to support
exact integers beyond the fixnum range in their base.
</pre></blockquote><pre style="margin: 0em;">

</pre><tt>SRFI-77 is fine. However, in your email you suggested that requiring 
</tt><tt>&quot;only the fixnum/flonum foundation&quot; in the base language was attractive. 
</tt><tt>I think the minimum you have to include is exact integers &quot;large enough 
</tt><tt>to index any list, string, or vector that can be created&quot; along with 
</tt><tt>arithmetic operations on these exact integers. Do you disagree?
</tt><pre style="margin: 0em;">

</pre><tt>From this, I think you either (a) define only the fixnum foundation and 
</tt><tt>either make fixnums long enough or lists, strings, and vectors short 
</tt><tt>enough that they are adequate for indexing or (b) allow fixnums and 
</tt><tt>bignums and define generic arithmetic operations on them.
</tt><pre style="margin: 0em;">

I find (a) unnecessarily restrictive. I prefer (b).

</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
What we have to worry about are the systems that
provide nothing beyond modular arithmetic and
flonums.  Some implementors of those systems have
told me they do not want to support unlimited
precision integer arithmetic in their base language.
SRFI-77 was designed to make it possible to write
portable code that uses the full tower even in
systems whose implementors don't want to bother
with it.  All the implementors have to provide is
the fixnum/flonum base, and virtually all of them
can do that with little or no extra effort.
</pre></blockquote><pre style="margin: 0em;">

</pre><tt>Let's consider a programmer that needs to use the full tower and three 
</tt><tt>implementions:
</tt><pre style="margin: 0em;">

(a) One that supports the full tower natively.

</pre><tt>(b) One that supports only fixnums and flonums natively, but supports 
</tt><tt>SRFI-77 and uses your code.
</tt><pre style="margin: 0em;">

</pre><tt>(c) One that supports only fixnums and flonums natively, does not 
</tt><tt>support SRFI-77, but does have generic R5RS arithmetic. The programmer 
</tt><tt>can then (define fx+ +), etc., and use your code.
</tt><pre style="margin: 0em;">

</pre><tt>Can a program distinguish (a) and (b)? Should it be able to distinguish 
</tt><tt>(a) and (b)? How?
</tt><pre style="margin: 0em;">

</pre><tt>Are (b) and (c) different except in terms of efficiency? That is, are 
</tt><tt>the fixnum and flonum parts of SRFI-77 anything more than the 
</tt><tt>specification of the interface of your code with a Scheme implementation?
</tt><pre style="margin: 0em;">

</pre><tt>Perhaps SRFI-77 should be split in two; the flonum and fixnum parts 
</tt><tt>would be one SRFI, primarily of interest to implementors who wish to use 
</tt><tt>your code, and the exact and inexact parts would the other, primarily of 
</tt><tt>interest to programmers.
</tt><pre style="margin: 0em;">

Regards,

Alan
--
Dr Alan Watson
Centro de Radioastronom&#xED;a y Astrof&#xED;sica
Universidad Astron&#xF3;mico Nacional de M&#xE9;xico

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00364" href="msg00364.html">Re: arithmetic issues</a></strong>
<ul><li><em>From:</em> William D Clinger</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00367.html">Re: arithmetic issues</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00369.html">Re: arithmetic issues</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00364.html">Re: arithmetic issues</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00365.html">Re: arithmetic issues</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00368"><strong>Date</strong></a></li>
<li><a href="threads.html#00368"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>

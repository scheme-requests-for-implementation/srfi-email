<!-- MHonArc v2.6.15 -->
<!--X-Subject: Questions about srfi&#45;77 Generic Arithmetic -->
<!--X-From-R13: Penqyrl Zhpvre <yhpvreNzngu.cheqhr.rqh> -->
<!--X-Date: Sun,  5 Feb 2006 21:36:04 +0100 (MET) -->
<!--X-Message-Id: 55047DAD&#45;A9BE&#45;4F10&#45;9287&#45;8BEC3DD88440@math.purdue.edu -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Questions about srfi-77 Generic Arithmetic</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00403.html">Date Prev</a>][<a href="msg00405.html">Date Next</a>][<a href="msg00400.html">Thread Prev</a>][<a href="msg00405.html">Thread Next</a>][<a href="maillist.html#00404">Date Index</a>][<a href="threads.html#00404">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Questions about srfi-77 Generic Arithmetic</h1>
<p style="max-width: 30em;">This page is part of the web mail archives of <a href="http://srfi.schemers.org/srfi-77">SRFI 77</a> from before July 7th, 2015.  The new archives for SRFI 77 are <a href="http://srfi-email.schemers.org/srfi-77/">here</a>.  Eventually, the entire history will be moved there, including any new messages.</p>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: <a href="mailto:srfi-77@DOMAIN.HIDDEN">srfi-77@xxxxxxxxxxxxxxxxx</a></li>
<li><em>Subject</em>: Questions about srfi-77 Generic Arithmetic</li>
<li><em>From</em>: Bradley Lucier &lt;<a href="mailto:lucier@DOMAIN.HIDDEN">lucier@xxxxxxxxxxxxxxx</a>&gt;</li>
<li><em>Date</em>: Sun, 5 Feb 2006 14:35:57 -0600</li>
<li><em>Cc</em>: Bradley Lucier &lt;<a href="mailto:lucier@DOMAIN.HIDDEN">lucier@xxxxxxxxxxxxxxx</a>&gt;</li>
<li><em>Delivered-to</em>: <a href="mailto:srfi-77@DOMAIN.HIDDEN">srfi-77@xxxxxxxxxxxxxxxxx</a></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<tt>I'm trying to understand the R5RS-style Generic Arithmetic and I have  
</tt><tt>some questions.  Please forgive me if some of these have been  
</tt><tt>answered previously.
</tt><pre style="margin: 0em;">

</pre><tt>1.  In the first paragraph it says &quot;The generic operations all  
</tt><tt>implement inexact operations.&quot;  What does that mean?
</tt><pre style="margin: 0em;">

</pre><tt>2.  In the first paragraph it says &quot;A number is inexact if it is  
</tt><tt>infinite, if it was written as an inexact constant, if it was derived  
</tt><tt>using inexact ingredients, or if it was derived using inexact  
</tt><tt>operations.&quot;
</tt><pre style="margin: 0em;">
    (a) I prefer some other word to &quot;ingredients&quot;.
</pre><tt>    (b) What is an inexact operation?  The in* functions?  Or, do  
</tt><tt>you mean every operation in this section?
</tt><pre style="margin: 0em;">
    (c) If 0 denotes exact 0 and 1 denotes exact 1, I prefer
        (log 1) = (sin 0)=(asin 0)=(atan 0)=(tan 0)=...=0
        and
        (cos 0) = (exp 0)=1,
</pre><tt>        in the same way that I prefer (sqrt 4) = 2 (where 4 denotes  
</tt><tt>exact 4 and 2 denotes exact 2).  Is this allowed in your proposal?
</tt><pre style="margin: 0em;">

</pre><tt>3.  Paragraph 6 says &quot;With the exception of inexact-&gt;exact, the  
</tt><tt>operations described in this section must return inexact results when  
</tt><tt>given any inexact arguments.&quot;
</tt><tt>    (a) I prefer (* 0 x) =&gt; 0 for any x; is this allowed in your  
</tt><tt>proposal?  (The principle here is that if you get the same answer for  
</tt><tt>any possible exact x, then you should get the same answer for any  
</tt><tt>inexact x, too, even if +inf.0, -inf.0, or +nan.0.)  I don't see that  
</tt><tt>there is not a conflict here with &quot;The procedures described here  
</tt><tt>behave consistently with the inexact arithmetic if passed inexact  
</tt><tt>arguments, and consistently with the exact arithmetic if passed exact  
</tt><tt>arguments;&quot; we have to decide what to do when mixing exact and  
</tt><tt>inexact arguments.
</tt><pre style="margin: 0em;">

</pre><tt>4.  &quot;nan?&quot; takes any complex as an argument.  If the real or  
</tt><tt>imaginary part of z is a NaN, and the other is rational, does that  
</tt><tt>make z a NaN?
</tt><pre style="margin: 0em;">
Maybe you should restrict the argument of nan? to be real.

</pre><tt>5.  Re: &quot;If any of these procedures are applied to mixed non-rational  
</tt><tt>real and non-real complex arguments, they either report a violation  
</tt><tt>of an implementation restriction or return an unspecified number.&quot;  
</tt><tt>What does this mean?  That
</tt><pre style="margin: 0em;">
      (+ +nan.0 +4.0i)
</pre><tt>is not specified?  Are you allowing here an implementation to use the  
</tt><tt>computable reals as the inexact representation?  I really don't  
</tt><tt>understand this.
</tt><pre style="margin: 0em;">

</pre><tt>6.  Perhaps you should remove strictly double argument &quot;-&quot; and &quot;/&quot;  
</tt><tt>from the manual, since this case is subsumed into the case with two  
</tt><tt>or more arguments.
</tt><pre style="margin: 0em;">

</pre><tt>7.  Why do &quot;-&quot; and &quot;/&quot; not have the commentary &quot;If any of these  
</tt><tt>procedures are applied to mixed non-rational real and non-real  
</tt><tt>complex arguments, they either report a violation of an  
</tt><tt>implementation restriction or return an unspecified number.&quot;?
</tt><pre style="margin: 0em;">

8.  Integer Divison.
</pre><tt>    (a) I think it is a really bad design to have the basic  
</tt><tt>operation of div+mod change when the second argument changes sign.
</tt><pre style="margin: 0em;">
    (b) I think it is a really bad design to have
        (div x1 0) =&gt; 0
</pre><tt>        It conflicts with the requirement in quotient+remainder,  
</tt><tt>quotient, remainder, and modulo that &quot;n2 should be nonzero&quot;.  (Unless  
</tt><tt>I read &quot;should&quot; here in the language lawyer sense, i.e., that it is  
</tt><tt>totally nonprescriptive.)  The only way I can think of making  
</tt><tt>division by exact 0 make sense is by divorcing the meaning of &quot;div&quot;  
</tt><tt>from any notion of mathematical division.
</tt><tt>    (c) This is one place where the Rationale says to refer to Egner  
</tt><tt>et al. to see an argument why these procedures &quot;are better suited  
</tt><tt>than quotient and remainder to implement modular reduction.&quot;  As a  
</tt><tt>point of procedure, I would really prefer to have the arguments  
</tt><tt>included in this document; I don't want to have to discuss my  
</tt><tt>opinions of Egner et al. just to discuss my opinions of this specific  
</tt><tt>proposal.
</tt><pre style="margin: 0em;">

</pre><tt>9.  I don't agree that +inf.0, -inf.0, and +nan.0 should be in the  
</tt><tt>domain of floor, round, ceiling, and truncate; returning these values  
</tt><tt>as results implies, to me, that they are integers, and I believe they  
</tt><tt>aren't integers, since they aren't rational.
</tt><pre style="margin: 0em;">

</pre><tt>10.  I don't agree that rationalize should take +inf.0, -inf.0, or  
</tt><tt>+nan.0 as arguments.  &quot;Rationalize&quot; should, by its nature and name,  
</tt><tt>return a rational value, and I don't believe that  +inf.0, -inf.0, or  
</tt><tt>+nan.0 are rational.
</tt><pre style="margin: 0em;">

</pre><tt>11.  Re: log, etc. You have the statement &quot;If the function has a real- 
</tt><tt>valued limit as its argument tends toward positive infinity, then  
</tt><tt>that is the value returned by the function applied to +inf.0. If the  
</tt><tt>function has a real-valued limit as its argument tends toward  
</tt><tt>negative infinity, then that is the value returned by the function  
</tt><tt>applied to -inf.0.&quot;  Why are complex-valued limits not specified, too?
</tt><pre style="margin: 0em;">

</pre><tt>Also, you have &quot;In the event that these formulae do not yield a real  
</tt><tt>result for the given arguments, the result may be +nan.0, or may be  
</tt><tt>some meaningless inexact number.&quot;  I don't understand the reason for  
</tt><tt>this statement.
</tt><pre style="margin: 0em;">

12. (a) You give the examples:
       (log +inf.0) =&gt; +inf.0
       (log -1.0+0.0i) =&gt; 0.0+pii
       (log -1.0-0.0i) =&gt; 0.0-pii
       yet
       (log -inf.0) =&gt; unspecified
       Given the previous examples, shouldn't
       (log -inf.0) =&gt; +inf.0+pii

</pre><tt>    (b) You don't say what (log 0) evaluates to; I would prefer it  
</tt><tt>to be an error.
</tt><pre style="margin: 0em;">

</pre><tt>13.  For sqrt:  Is your intention to no longer have sqrt return exact  
</tt><tt>results when possible given exact arguments?  Or will
</tt><pre style="margin: 0em;">
     (sqrt 4) =&gt; 2
     be allowed?  Your definition
     (sqrt z) =&gt; (exp (/ (log z) 2.0))
</pre><tt>     seems to preclude it by putting in that inexact 2.  Do you mean  
</tt><tt>the right hand side of this formula literally, with exp and log being  
</tt><tt>Scheme procedures, or do you mean to represent the mathematical  
</tt><tt>formula $e^{\log(z)/2}$ (in TeX notation).
</tt><pre style="margin: 0em;">

13 bis: Again for sqrt, why is
        (sqrt -inf.0) =&gt; unspecified
        and not
        (sqrt -inf.0) =&gt; +inf.0i
        You didn't have any problem with
        (log 0.0) =&gt; -inf.0

</pre><tt>14.  About expt:  In contrast to my comments about sqrt, I note that  
</tt><tt>your definition of expt uses mathematical notation to define it, so
</tt><pre style="margin: 0em;">
     (expt 5 3)  =&gt; 125, not 125.0
     is not only allowed, but required?  Is
     (expt 125 1/3) =&gt; 5
     allowed?

15.  I agree with Knuth, and would very much prefer
     (expt 0 0) =&gt; 1
     so that the binomial expansion formula
     x^n = (x+0)^n = x^n\times 0^0 + nx^{n-1}\times 0^2+...
     holds.  In fact, for any other z1, I would also have
     (expt z1 0) =&gt; (exp (* 0 (log z1))) =&gt; (exp 0) =&gt; 1

</pre><tt>16.  About magnitude: Following Kahan, I think it should be required  
</tt><tt>that
</tt><pre style="margin: 0em;">
     (magnitude z) =&gt; +inf.0
</pre><tt>     if either the real or imaginary part of z is infinite (even if  
</tt><tt>the other part is a NaN).  Here Kahan is following the argument that,  
</tt><tt>if the real or imaginary part is infinite, you would get the same  
</tt><tt>answer no matter the (finite) value of the other part, so you should  
</tt><tt>give that answer even if the other part is infinite or NaN.
</tt><pre style="margin: 0em;">


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00405" href="msg00405.html">Re: Questions about srfi-77 Generic Arithmetic</a></strong>
<ul><li><em>From:</em> Michael Sperber</li></ul></li>
<li><strong><a name="00418" href="msg00418.html">div and mod.</a></strong>
<ul><li><em>From:</em> bear</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00403.html">Re: Arithmetic issues - feedback</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00405.html">Re: Questions about srfi-77 Generic Arithmetic</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00400.html">Re: straw-man [was Re: arithmetic issues]</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00405.html">Re: Questions about srfi-77 Generic Arithmetic</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00404"><strong>Date</strong></a></li>
<li><a href="threads.html#00404"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>

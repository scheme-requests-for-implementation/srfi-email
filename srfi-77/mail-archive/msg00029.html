<!-- MHonArc v2.6.15 -->
<!--X-Subject: Re: meta&#45;comment on typing -->
<!--X-From-R13: [nepva 'Cepmnx' Ybjnypmlx <depmnxNxaz.bet.cy> -->
<!--X-Date: Mon, 17 Oct 2005 00:06:02 +0200 (MST) -->
<!--X-Message-Id: 87r7alce2i.fsf@qrnik.zagroda -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 43440EDA.1020900@bothner.com -->
<!--X-Reference: 20051005220034.GH6680@NYCMJCOWA2 -->
<!--X-Reference: 43445027.1010408@bothner.com -->
<!--X-Reference: 20051006045500.GA2668@NYCMJCOWA2 -->
<!--X-Reference: 4344B83B.50705@bothner.com -->
<!--X-Reference: 878xx75dt4.fsf@qrnik.zagroda -->
<!--X-Reference: 4344D02F.5030704@bothner.com -->
<!--X-Reference: Pine.LNX.4.58.0510161238590.13563@bolt.sonic.net -->
<!--X-Reference: 4352B55D.6010901@bothner.com -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: meta-comment on typing</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00028.html">Date Prev</a>][<a href="msg00030.html">Date Next</a>][<a href="msg00028.html">Thread Prev</a>][<a href="msg00041.html">Thread Next</a>][<a href="maillist.html#00029">Date Index</a>][<a href="threads.html#00029">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: meta-comment on typing</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: <a href="mailto:srfi-77@DOMAIN.HIDDEN">srfi-77@xxxxxxxxxxxxxxxxx</a></li>
<li><em>Subject</em>: Re: meta-comment on typing</li>
<li><em>From</em>: Marcin 'Qrczak' Kowalczyk &lt;<a href="mailto:qrczak@DOMAIN.HIDDEN">qrczak@xxxxxxxxxx</a>&gt;</li>
<li><em>Date</em>: Mon, 17 Oct 2005 00:05:57 +0200</li>
<li><em>Delivered-to</em>: <a href="mailto:srfi-77@DOMAIN.HIDDEN">srfi-77@xxxxxxxxxxxxxxxxx</a></li>
<li><em>In-reply-to</em>: &lt;<a href="mailto:4352B55D.6010901@DOMAIN.HIDDEN">4352B55D.6010901@xxxxxxxxxxx</a>&gt; (Per Bothner's message of &quot;Sun, 16 Oct 2005 13:17:33 -0700&quot;)</li>
<li><em>Mail-followup-to</em>: <a href="mailto:srfi-77@DOMAIN.HIDDEN">srfi-77@xxxxxxxxxxxxxxxxx</a></li>
<li><em>References</em>: &lt;<a href="mailto:43440EDA.1020900@DOMAIN.HIDDEN">43440EDA.1020900@xxxxxxxxxxx</a>&gt; &lt;<a href="mailto:20051005220034.GH6680@DOMAIN.HIDDEN"><a href="msg00005.html">20051005220034.GH6680@NYCMJCOWA2</a></a>&gt;	&lt;<a href="mailto:43445027.1010408@DOMAIN.HIDDEN">43445027.1010408@xxxxxxxxxxx</a>&gt; &lt;<a href="mailto:20051006045500.GA2668@DOMAIN.HIDDEN"><a href="msg00008.html">20051006045500.GA2668@NYCMJCOWA2</a></a>&gt;	&lt;<a href="mailto:4344B83B.50705@DOMAIN.HIDDEN">4344B83B.50705@xxxxxxxxxxx</a>&gt; &lt;<a href="mailto:878xx75dt4.fsf@DOMAIN.HIDDEN">878xx75dt4.fsf@xxxxxxxxxxxxx</a>&gt;	&lt;<a href="mailto:4344D02F.5030704@DOMAIN.HIDDEN">4344D02F.5030704@xxxxxxxxxxx</a>&gt;	&lt;<a href="mailto:Pine.LNX.4.58.0510161238590.13563@DOMAIN.HIDDEN">Pine.LNX.4.58.0510161238590.13563@xxxxxxxxxxxxxx</a>&gt;	&lt;<a href="mailto:4352B55D.6010901@DOMAIN.HIDDEN">4352B55D.6010901@xxxxxxxxxxx</a>&gt;</li>
<li><em>Sender</em>: Marcin 'Qrczak' Kowalczyk &lt;<a href="mailto:qrczak@DOMAIN.HIDDEN">qrczak@xxxxxxxxxx</a>&gt;</li>
<li><em>User-agent</em>: Gnus/5.1006 (Gnus v5.10.6) Emacs/21.3 (gnu/linux)</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>Per Bothner &lt;per@xxxxxxxxxxx&gt; writes:

&gt; Your argument hinges on the term &quot;addition&quot;, which you don't define,
&gt; so it's meaningless.

A good approximation is + as defined by R5RS.

&gt; Do you consider &quot;complex number addition&quot; to be &quot;addition&quot;?

Definitely.

&gt; Do you consider &quot;matrix addition&quot; to be &quot;addition&quot;?

If Scheme supported generic functions and made + extensible, then it
would make sense to let a library providing matrices specialize + on
matrices to mean matrix addition.

&gt; If you allow either of the former to be 'addition&quot; then
&gt; there is no a priori reason to reject &quot;32-bit unsigned modulo
&gt; addition with wrap-around&quot; to be addition as well.

There is a very good reason: addition of integers is already defined
to mean something else. A necessary condition for adding any overload
is that it doesn't conflict with existing overloads.

If Scheme used generic functions, you could add a separate 32-bit
unsigned integer type, for which + means modulo. Note that with
typical implementations they would be less efficient than fixnums and
would require heap allocation for all numbers, so it would make little
sense to use them just for efficiency. I'm not convinced that this
type is useful often enough to provide it by standard Scheme.

&gt; In fact most programming languages do consider the latter to
&gt; be &quot;addition&quot;.

I disagree with &quot;most&quot;: Lisp, R5RS, Dylan, Smalltalk, Python, Ruby,
Perl, SML don't make modular arithmetic the default, Haskell provides
two equally well supported integer types - one correct and one with
wraparound, and even C# can be told to throw exceptions in case of
overflow.

I disagree with making this compromise between efficiency and
correctness the default for Scheme.

SRFI-77 provides a way to use the fast but incorrect addition in cases
the programmer has manually proven they are correct. It could be done
in some different way, perhaps even by some declarations scoped over
regular arithmetic operators, but it should not break existing
addition.

Note that in almost all Scheme implementations fixnums are not exactly
32 bits but slightly smaller (or slightly smaller than 64 bits) and
signed. There is an extremely slim chance that one would need the
semantics of wraparound over an unspecified number of bits of a signed
type, except when he just wants to detect fixnum overflow and redo the
computation differently in this case (or let the program fail). It's
not a variant addition that anybody really wants, but just something
that happens to be implementable on current hardware faster than any
other approximation of addition.

&gt; What it really boils down to:
&gt; * Is it wise/useful/desirable to overload operations so
&gt; that different (but in-some-way-related) operations are named
&gt; by the same operation name?

Yes. Although the amount of doing that is a matter of taste, and
it could be abused.

&gt; * Is it wise/useful/desirable overload the operation names for
&gt; standard arithmetic to objects that don't obey all the rules
&gt; of complex number arithmetic?

Yes, as long as they don't conflict with more correct interpretations
of these operations for the same arguments.

-- 
   __(&quot;&lt;         Marcin Kowalczyk
   \__/       qrczak@xxxxxxxxxx
    ^^     <a  rel="nofollow" href="http://qrnik.knm.org.pl/~qrczak/">http://qrnik.knm.org.pl/~qrczak/</a>

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00001" href="msg00001.html">meta-comment on typing</a></strong>
<ul><li><em>From:</em> Per Bothner</li></ul></li>
<li><strong><a name="00005" href="msg00005.html">Re: meta-comment on typing</a></strong>
<ul><li><em>From:</em> John.Cowan</li></ul></li>
<li><strong><a name="00006" href="msg00006.html">Re: meta-comment on typing</a></strong>
<ul><li><em>From:</em> Per Bothner</li></ul></li>
<li><strong><a name="00008" href="msg00008.html">Re: meta-comment on typing</a></strong>
<ul><li><em>From:</em> John.Cowan</li></ul></li>
<li><strong><a name="00009" href="msg00009.html">Re: meta-comment on typing</a></strong>
<ul><li><em>From:</em> Per Bothner</li></ul></li>
<li><strong><a name="00011" href="msg00011.html">Re: meta-comment on typing</a></strong>
<ul><li><em>From:</em> Marcin 'Qrczak' Kowalczyk</li></ul></li>
<li><strong><a name="00012" href="msg00012.html">Re: meta-comment on typing</a></strong>
<ul><li><em>From:</em> Per Bothner</li></ul></li>
<li><strong><a name="00027" href="msg00027.html">Re: meta-comment on typing</a></strong>
<ul><li><em>From:</em> bear</li></ul></li>
<li><strong><a name="00028" href="msg00028.html">Re: meta-comment on typing</a></strong>
<ul><li><em>From:</em> Per Bothner</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00028.html">Re: meta-comment on typing</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00030.html">Re: integer-length and integer-sqrt</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00028.html">Re: meta-comment on typing</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00041.html">Re: meta-comment on typing</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00029"><strong>Date</strong></a></li>
<li><a href="threads.html#00029"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>

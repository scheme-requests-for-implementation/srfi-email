<!-- MHonArc v2.6.15 -->
<!--X-Subject: Re: Questions about srfi&#45;77 Generic Arithmetic -->
<!--X-From-R13: [vpunry Ecreore <fcreoreNvasbezngvx.hav&#45;ghrovatra.qr> -->
<!--X-Date: Fri, 10 Feb 2006 19:08:02 +0100 (MET) -->
<!--X-Message-Id: y9lbqxj6ky0.fsf@informatik.uni&#45;tuebingen.de -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 55047DAD&#45;A9BE&#45;4F10&#45;9287&#45;8BEC3DD88440@math.purdue.edu -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: Questions about srfi-77 Generic Arithmetic</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00404.html">Date Prev</a>][<a href="msg00406.html">Date Next</a>][<a href="msg00404.html">Thread Prev</a>][<a href="msg00418.html">Thread Next</a>][<a href="maillist.html#00405">Date Index</a>][<a href="threads.html#00405">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: Questions about srfi-77 Generic Arithmetic</h1>
<p style="max-width: 30em;">This page is part of the web mail archives of <a href="http://srfi.schemers.org/srfi-77">SRFI 77</a> from before July 7th, 2015.  The new archives for SRFI 77 are <a href="http://srfi-email.schemers.org/srfi-77/">here</a>.  The new archives contain all messages, not just those from before July 7th, 2015.</p>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: Bradley Lucier &lt;<a href="mailto:lucier@DOMAIN.HIDDEN">lucier@xxxxxxxxxxxxxxx</a>&gt;</li>
<li><em>Subject</em>: Re: Questions about srfi-77 Generic Arithmetic</li>
<li><em>From</em>: Michael Sperber &lt;<a href="mailto:sperber@DOMAIN.HIDDEN">sperber@xxxxxxxxxxxxxxxxxxxxxxxxxxx</a>&gt;</li>
<li><em>Date</em>: Tue, 07 Feb 2006 20:13:59 +0100</li>
<li><em>Cc</em>: <a href="mailto:srfi-77@DOMAIN.HIDDEN">srfi-77@xxxxxxxxxxxxxxxxx</a></li>
<li><em>Delivered-to</em>: <a href="mailto:srfi-77@DOMAIN.HIDDEN">srfi-77@xxxxxxxxxxxxxxxxx</a></li>
<li><em>In-reply-to</em>: &lt;<a href="mailto:55047DAD-A9BE-4F10-9287-8BEC3DD88440@DOMAIN.HIDDEN">55047DAD-A9BE-4F10-9287-8BEC3DD88440@xxxxxxxxxxxxxxx</a>&gt; (Bradley	Lucier's message of &quot;Sun, 5 Feb 2006 14:35:57 -0600&quot;)</li>
<li><em>References</em>: &lt;<a href="mailto:55047DAD-A9BE-4F10-9287-8BEC3DD88440@DOMAIN.HIDDEN">55047DAD-A9BE-4F10-9287-8BEC3DD88440@xxxxxxxxxxxxxxx</a>&gt;</li>
<li><em>Resent-date</em>: Fri, 10 Feb 2006 19:07:54 +0100</li>
<li><em>Resent-from</em>: Michael Sperber &lt;<a href="mailto:sperber@DOMAIN.HIDDEN">sperber@xxxxxxxxxxxxxxxxxxxxxxxxxxx</a>&gt;</li>
<li><em>Resent-message-id</em>: &lt;<a href="mailto:y9l1wybm6it.fsf@DOMAIN.HIDDEN">y9l1wybm6it.fsf@xxxxxxxxxxxxxxxxxxxxxxxxxxx</a>&gt;</li>
<li><em>Resent-to</em>: <a href="mailto:srfi-77@DOMAIN.HIDDEN">srfi-77@xxxxxxxxxxxxxxxxx</a></li>
<li><em>User-agent</em>: Gnus/5.110003 (No Gnus v0.3) XEmacs/21.5-b24 (darwin)</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>
Hi Brad,

many thanks for your comments!  A few issues you raise seem
substantive, but I'm not expert enough on numerics to answer them.
(Will might search for his name in this email for follow-up bait.)

Bradley Lucier &lt;lucier@xxxxxxxxxxxxxxx&gt; writes:

&gt; 1.  In the first paragraph it says &quot;The generic operations all  
&gt; implement inexact operations.&quot;  What does that mean?

I'll leave this one to Will.

&gt; 2.  In the first paragraph it says &quot;A number is inexact if it is  
&gt; infinite, if it was written as an inexact constant, if it was derived  
&gt; using inexact ingredients, or if it was derived using inexact  
&gt; operations.&quot;
&gt;     (a) I prefer some other word to &quot;ingredients&quot;.

Which one?

&gt;     (b) What is an inexact operation?  The in* functions?  Or, do  
&gt; you mean every operation in this section?

I guess this could be clarified.  It means every operation that, as
part of what it does, introduces error into the result.  Note that
&quot;operations&quot; are distinct from &quot;procedures.&quot;  It's part of the nature
of the R5RS generic arithmetic that each procedures implements
multiple operations, depending on the arguments.  The statement you're
referring to means operations performed by procedures that consume
exact arguments and can't return a mathematically exact result.

&gt;     (c) If 0 denotes exact 0 and 1 denotes exact 1, I prefer
&gt;         (log 1) = (sin 0)=(asin 0)=(atan 0)=(tan 0)=...=0
&gt;         and
&gt;         (cos 0) = (exp 0)=1,
&gt;         in the same way that I prefer (sqrt 4) = 2 (where 4 denotes  
&gt; exact 4 and 2 denotes exact 2).  Is this allowed in your proposal?

I don't see why not.  (It is not required, however.)  I don't think it
was our intention to forbid it.

&gt; 3.  Paragraph 6 says &quot;With the exception of inexact-&gt;exact, the  
&gt; operations described in this section must return inexact results when  
&gt; given any inexact arguments.&quot;
&gt;     (a) I prefer (* 0 x) =&gt; 0 for any x; is this allowed in your  
&gt; proposal?  

No.  I can't say I'm convinced by either you or Jaffer's argument
either way---maybe some other experts could cast their votes?

&gt; 4.  &quot;nan?&quot; takes any complex as an argument.  If the real or
&gt; imaginary part of z is a NaN, and the other is rational, does that  
&gt; make z a NaN?
&gt; Maybe you should restrict the argument of nan? to be real.

Yes.  Will do.

&gt; 5.  Re: &quot;If any of these procedures are applied to mixed non-rational  
&gt; real and non-real complex arguments, they either report a violation  
&gt; of an implementation restriction or return an unspecified number.&quot;  
&gt; What does this mean?  That
&gt;       (+ +nan.0 +4.0i)
&gt; is not specified?

Yes.

&gt; Are you allowing here an implementation to use the computable reals
&gt; as the inexact representation?

I don't see what this statement has to do with it---the computable
reals sure should qualify as a representation for inexact reals,
though.

&gt; 6.  Perhaps you should remove strictly double argument &quot;-&quot; and &quot;/&quot;  
&gt; from the manual, since this case is subsumed into the case with two  
&gt; or more arguments.

Good point.  Will do.

&gt; 7.  Why do &quot;-&quot; and &quot;/&quot; not have the commentary &quot;If any of these  
&gt; procedures are applied to mixed non-rational real and non-real  
&gt; complex arguments, they either report a violation of an  
&gt; implementation restriction or return an unspecified number.&quot;?

Oversight.  Will fix.

&gt; 8.  Integer Divison. [...]
&gt;     (c) This is one place where the Rationale says to refer to Egner  
&gt; et al. to see an argument why these procedures &quot;are better suited  
&gt; than quotient and remainder to implement modular reduction.&quot;  As a  
&gt; point of procedure, I would really prefer to have the arguments  
&gt; included in this document; I don't want to have to discuss my  
&gt; opinions of Egner et al. just to discuss my opinions of this specific  
&gt; proposal.

That is not going to happen---the draft refers to external documents
as a rationale on numerous issues.  Moreover, this issue is pretty
isolated in the paper, and I don't see any problem with discussing
this specific issue, referring to the paper.

&gt; 9.  I don't agree that +inf.0, -inf.0, and +nan.0 should be in the  
&gt; domain of floor, round, ceiling, and truncate; returning these values  
&gt; as results implies, to me, that they are integers, and I believe they  
&gt; aren't integers, since they aren't rational.

This is on the issues list---I'm almost convinced, but wonder what
happens in representations where the argument isn't infinite or NaN,
and the result still can't be represented as an inexact integer.  (Not
with IEEE 754, obviously, but possible in fixed-point
representations.)  Signalling an error in this case would seem to make
a program susceptible to long-latent programming errors slash
portability problems.

&gt; 11.  Re: log, etc. You have the statement &quot;If the function has a real- 
&gt; valued limit as its argument tends toward positive infinity, then  
&gt; that is the value returned by the function applied to +inf.0. If the  
&gt; function has a real-valued limit as its argument tends toward  
&gt; negative infinity, then that is the value returned by the function  
&gt; applied to -inf.0.&quot;  Why are complex-valued limits not specified, too?

Oversight, I guess.  I'm unsure how to do this right---could you
suggest language to help clean this up?

&gt; Also, you have &quot;In the event that these formulae do not yield a real  
&gt; result for the given arguments, the result may be +nan.0, or may be  
&gt; some meaningless inexact number.&quot;  I don't understand the reason for  
&gt; this statement.

It specifies the case where the result is undefined.

&gt; 12. (a) You give the examples:
&gt;        (log +inf.0) =&gt; +inf.0
&gt;        (log -1.0+0.0i) =&gt; 0.0+pii
&gt;        (log -1.0-0.0i) =&gt; 0.0-pii
&gt;        yet
&gt;        (log -inf.0) =&gt; unspecified
&gt;        Given the previous examples, shouldn't
&gt;        (log -inf.0) =&gt; +inf.0+pii
&gt;     (b) You don't say what (log 0) evaluates to; I would prefer it  
&gt; to be an error.

I'll have to defer these to a discussion with Will.

&gt; 13.  For sqrt:  Is your intention to no longer have sqrt return exact  
&gt; results when possible given exact arguments?  

No.

&gt; Or will
&gt;      (sqrt 4) =&gt; 2
&gt;      be allowed?  Your definition
&gt;      (sqrt z) =&gt; (exp (/ (log z) 2.0))
&gt;      seems to preclude it by putting in that inexact 2.  Do you mean  
&gt; the right hand side of this formula literally, with exp and log being  
&gt; Scheme procedures, or do you mean to represent the mathematical  
&gt; formula $e^{\log(z)/2}$ (in TeX notation).

Good point.  This (the relationship between mathematical formulae and
the return values of procedures) is a general problem with the
presentation, and (in different form) dates back to R5RS.  It's my
intention to clean this up before it goes into R6RS.
      
&gt; 13 bis: Again for sqrt, why is
&gt;         (sqrt -inf.0) =&gt; unspecified
&gt;         and not
&gt;         (sqrt -inf.0) =&gt; +inf.0i
&gt;         You didn't have any problem with
&gt;         (log 0.0) =&gt; -inf.0

I'll have to defer this to a discussion with Will.

&gt; 14.  About expt:  In contrast to my comments about sqrt, I note that  
&gt; your definition of expt uses mathematical notation to define it, so
&gt;      (expt 5 3)  =&gt; 125, not 125.0
&gt;      is not only allowed, but required?  

Yes.

&gt; Is
&gt;      (expt 125 1/3) =&gt; 5
&gt;      allowed?

Yes, but not required.

&gt; 15.  I agree with Knuth, and would very much prefer
&gt;      (expt 0 0) =&gt; 1

It does say that, but I see the example has a typo (the &quot;1&quot; is
missing).  Will fix.

&gt; 16.  About magnitude: Following Kahan, I think it should be required  
&gt; that
&gt;      (magnitude z) =&gt; +inf.0
&gt;      if either the real or imaginary part of z is infinite (even if  
&gt; the other part is a NaN).  Here Kahan is following the argument that,  
&gt; if the real or imaginary part is infinite, you would get the same  
&gt; answer no matter the (finite) value of the other part, so you should  
&gt; give that answer even if the other part is infinite or NaN.

I'll have to defer these to a discussion with Will.

-- 
Cheers =8-} Mike
Friede, V&#xF6;lkerverst&#xE4;ndigung und &#xFC;berhaupt blabla

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00404" href="msg00404.html">Questions about srfi-77 Generic Arithmetic</a></strong>
<ul><li><em>From:</em> Bradley Lucier</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00404.html">Questions about srfi-77 Generic Arithmetic</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00406.html">Re: Questions about srfi-77 Generic Arithmetic</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00404.html">Questions about srfi-77 Generic Arithmetic</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00418.html">div and mod.</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00405"><strong>Date</strong></a></li>
<li><a href="threads.html#00405"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>

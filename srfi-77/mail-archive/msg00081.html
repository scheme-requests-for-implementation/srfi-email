<!-- MHonArc v2.6.15 -->
<!--X-Subject: Re: Exactness -->
<!--X-From-R13: [nepva 'Cepmnx' Ybjnypmlx <depmnxNxaz.bet.cy> -->
<!--X-Date: Fri, 21 Oct 2005 22:12:36 +0200 (MST) -->
<!--X-Message-Id: 87k6g64ojy.fsf@qrnik.zagroda -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 87wtk9qro1.fsf@qrnik.zagroda -->
<!--X-Reference: 20051019191720.GA24703@mimir.szonye.com -->
<!--X-Reference: 87fyqxb6i6.fsf@qrnik.zagroda -->
<!--X-Reference: 20051019220800.GF24703@mimir.szonye.com -->
<!--X-Reference: Pine.LNX.4.58.0510191726410.13819@bolt.sonic.net -->
<!--X-Reference: 87ach45z5v.fsf@qrnik.zagroda -->
<!--X-Reference: Pine.LNX.4.58.0510201408480.6745@bolt.sonic.net -->
<!--X-Reference: 87hdbbfwps.fsf@qrnik.zagroda -->
<!--X-Reference: 87oe5j1sef.fsf@becket.becket.net -->
<!--X-Reference: 87wtk7qoau.fsf@qrnik.zagroda -->
<!--X-Reference: 87zmp2ra04.fsf@becket.becket.net -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: Exactness</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00080.html">Date Prev</a>][<a href="msg00082.html">Date Next</a>][<a href="msg00080.html">Thread Prev</a>][<a href="msg00083.html">Thread Next</a>][<a href="maillist.html#00081">Date Index</a>][<a href="threads.html#00081">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: Exactness</h1>
<p style="max-width: 30em;">This page is part of the web mail archives of <a href="http://srfi.schemers.org/srfi-77">SRFI 77</a> from before July 7th, 2015.  The new archives for SRFI 77 are <a href="http://srfi-email.schemers.org/srfi-77/">here</a>.  The new archives contain all messages, not just those from before July 7th, 2015.</p>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: <a href="mailto:srfi-77@DOMAIN.HIDDEN">srfi-77@xxxxxxxxxxxxxxxxx</a></li>
<li><em>Subject</em>: Re: Exactness</li>
<li><em>From</em>: Marcin 'Qrczak' Kowalczyk &lt;<a href="mailto:qrczak@DOMAIN.HIDDEN">qrczak@xxxxxxxxxx</a>&gt;</li>
<li><em>Date</em>: Fri, 21 Oct 2005 22:12:33 +0200</li>
<li><em>Delivered-to</em>: <a href="mailto:srfi-77@DOMAIN.HIDDEN">srfi-77@xxxxxxxxxxxxxxxxx</a></li>
<li><em>In-reply-to</em>: &lt;<a href="mailto:87zmp2ra04.fsf@DOMAIN.HIDDEN">87zmp2ra04.fsf@xxxxxxxxxxxxxxxxx</a>&gt; (Thomas Bushnell's message of &quot;Fri, 21 Oct 2005 11:38:18 -0700&quot;)</li>
<li><em>Mail-followup-to</em>: <a href="mailto:srfi-77@DOMAIN.HIDDEN">srfi-77@xxxxxxxxxxxxxxxxx</a></li>
<li><em>References</em>: &lt;<a href="mailto:87wtk9qro1.fsf@DOMAIN.HIDDEN">87wtk9qro1.fsf@xxxxxxxxxxxxx</a>&gt;	&lt;<a href="mailto:20051019191720.GA24703@DOMAIN.HIDDEN">20051019191720.GA24703@xxxxxxxxxxxxxxxx</a>&gt;	&lt;<a href="mailto:87fyqxb6i6.fsf@DOMAIN.HIDDEN">87fyqxb6i6.fsf@xxxxxxxxxxxxx</a>&gt;	&lt;<a href="mailto:20051019220800.GF24703@DOMAIN.HIDDEN">20051019220800.GF24703@xxxxxxxxxxxxxxxx</a>&gt;	&lt;<a href="mailto:Pine.LNX.4.58.0510191726410.13819@DOMAIN.HIDDEN">Pine.LNX.4.58.0510191726410.13819@xxxxxxxxxxxxxx</a>&gt;	&lt;<a href="mailto:87ach45z5v.fsf@DOMAIN.HIDDEN">87ach45z5v.fsf@xxxxxxxxxxxxx</a>&gt;	&lt;<a href="mailto:Pine.LNX.4.58.0510201408480.6745@DOMAIN.HIDDEN">Pine.LNX.4.58.0510201408480.6745@xxxxxxxxxxxxxx</a>&gt;	&lt;<a href="mailto:87hdbbfwps.fsf@DOMAIN.HIDDEN">87hdbbfwps.fsf@xxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:87oe5j1sef.fsf@DOMAIN.HIDDEN">87oe5j1sef.fsf@xxxxxxxxxxxxxxxxx</a>&gt;	&lt;<a href="mailto:87wtk7qoau.fsf@DOMAIN.HIDDEN">87wtk7qoau.fsf@xxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:87zmp2ra04.fsf@DOMAIN.HIDDEN">87zmp2ra04.fsf@xxxxxxxxxxxxxxxxx</a>&gt;</li>
<li><em>Sender</em>: Marcin 'Qrczak' Kowalczyk &lt;<a href="mailto:qrczak@DOMAIN.HIDDEN">qrczak@xxxxxxxxxx</a>&gt;</li>
<li><em>User-agent</em>: Gnus/5.1006 (Gnus v5.10.6) Emacs/21.3 (gnu/linux)</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>Thomas Bushnell BSG &lt;tb@xxxxxxxxxx&gt; writes:

&gt;&gt; Querying is too late: when program needs a particular characteristic,
&gt;&gt; it doesn't help it that it could detect that the implementation
&gt;&gt; doesn't meet its expectations.
&gt;
&gt; Oh, so you want to demand that all Scheme systems must implement
&gt; whatever feature you need for that program?  How does that go?

It's not an exotic feature but quite a common need, and they already
mostly provide it. Except some embedded implementations, and except
that it's not done consistently wrt. +inf.0, -inf.0, +nan.0, -0.0,
exactness of complex numbers, acceptability of inexact integers by
procedures which require integers, the set of additional procedures
provided as extensions, and perhaps other minor issues.

&gt;&gt; I disagree. There are programs which require flonums or something
&gt;&gt; which behave similarly. All Scheme implementations I know and all
&gt;&gt; other general-purpose languages I know provide flonums.
&gt;
&gt; No, Scheme does not provide &quot;flonums&quot;.  Some Scheme systems provide an
&gt; implementation of inexact reals which is similar to the Lisp notion of
&gt; a flonum.  But that's not the same thing.

Which differences do you have in mind? For me it's close enough.

&gt;&gt; Consider the example at the end of R5RS run on a typical Scheme
&gt;&gt; implementation with floats and ratios, augmented with displaying all
&gt;&gt; elements of the lazy list it produces. It runs fine. But when we
&gt;&gt; replace the two inexact numbers in the initial state with exact ones
&gt;&gt; of the same values, fractions become bigger and bigger, even though
&gt;&gt; the growing precision it accumulates is useless: the algorithm is
&gt;&gt; inexact to begin with!
&gt;
&gt; But this is not a feature of exactness; it's a feature of the
&gt; particular strategy chosen to implement exactness.

Which everybody chooses. So we have the choice:

A. The programmer could use exact numbers here, hoping that some day
   someone will invent a Scheme implementation which would compile
   this program into efficient code. The decision was also supported
   by the fear that some weird Scheme implementation could choose the
   default format of inexact real numbers such that the version with
   inexact numbers would accumulate increasing precision eating more
   and more memory.

B. The programmer knows that ratnums are inappropriate here, and
   at the same time knows that flonums are appropriate. He chooses
   flonums by writing a number with a decimal point, and all existing
   Scheme implementations run this code fine.

I'm choosing B. Everybody would do that in practice. The Scheme
standard doesn't guarantee that it will work well however, and it
doesn't provide any better way either. The common practice suggests
that it's fine, so it's the only sane choice.

Here is another story. A programmer wants to make a portable program
which calculates taxes and Bank interests, and he needs to choose the
representation of monetary amounts and interest percentages. He knows
that flonums are inappropriate. Choices:

C. He uses ratnums, and (hypothetical for now) functions which format
   ratnums into decimal fractions with the given number of trailing
   zeros, parsers which convert &quot;12.99&quot; into an exact number, and
   procedures for rounding at the given decimal place.

D. He is afraid that for some Scheme implementations 1/100 is a
   flonum, so he uses scaled integers, reimplementing arithmetic
   operations, formatting and parsing, being careful to not confuse
   scaled and unscaled numbers, and deciding whether the scale can
   be a global constant or must be different for different numbers.
   On some Scheme implementations the program only handles intermediate
   results up to $10M, above which they silently become negative.

This time I would prefer C. Now we have D.

Speciyfing too little is as bad as specifying too much.

&gt;&gt; I want portable flonums.
&gt;
&gt; Do you care whether they are called &quot;portable flonums&quot;?
&gt; Can we call them something else and you will be happy?

I care that they are fast, that they are used by default for numbers
entered with a decimal point, that I don't have to check whether
exp(x) will overflow before applying exp, that a number which has
overflowed can be printed and read by other implementations, that
arctangent of a number which has overflowed is close to pi/2, and that
if I need to interface to C in order to compute erf(x), then the only
portability issues will be with linking with C - not with passing the
numeric value.

-- 
   __(&quot;&lt;         Marcin Kowalczyk
   \__/       qrczak@xxxxxxxxxx
    ^^     <a  rel="nofollow" href="http://qrnik.knm.org.pl/~qrczak/">http://qrnik.knm.org.pl/~qrczak/</a>

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00083" href="msg00083.html">Re: Exactness</a></strong>
<ul><li><em>From:</em> Thomas Bushnell BSG</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00055" href="msg00055.html">My comments</a></strong>
<ul><li><em>From:</em> Marcin 'Qrczak' Kowalczyk</li></ul></li>
<li><strong><a name="00056" href="msg00056.html">Re: My comments</a></strong>
<ul><li><em>From:</em> Bradd W. Szonye</li></ul></li>
<li><strong><a name="00062" href="msg00062.html">Re: My comments</a></strong>
<ul><li><em>From:</em> Marcin 'Qrczak' Kowalczyk</li></ul></li>
<li><strong><a name="00067" href="msg00067.html">Re: My comments</a></strong>
<ul><li><em>From:</em> Bradd W. Szonye</li></ul></li>
<li><strong><a name="00068" href="msg00068.html">Exactness (was Re: My comments)</a></strong>
<ul><li><em>From:</em> bear</li></ul></li>
<li><strong><a name="00070" href="msg00070.html">Re: Exactness</a></strong>
<ul><li><em>From:</em> Marcin 'Qrczak' Kowalczyk</li></ul></li>
<li><strong><a name="00072" href="msg00072.html">Re: Exactness</a></strong>
<ul><li><em>From:</em> bear</li></ul></li>
<li><strong><a name="00073" href="msg00073.html">Re: Exactness</a></strong>
<ul><li><em>From:</em> Marcin 'Qrczak' Kowalczyk</li></ul></li>
<li><strong><a name="00074" href="msg00074.html">Re: Exactness</a></strong>
<ul><li><em>From:</em> Thomas Bushnell BSG</li></ul></li>
<li><strong><a name="00075" href="msg00075.html">Re: Exactness</a></strong>
<ul><li><em>From:</em> Marcin 'Qrczak' Kowalczyk</li></ul></li>
<li><strong><a name="00080" href="msg00080.html">Re: Exactness</a></strong>
<ul><li><em>From:</em> Thomas Bushnell BSG</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00080.html">Re: Exactness</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00082.html">Re: arithmetic issues</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00080.html">Re: Exactness</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00083.html">Re: Exactness</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00081"><strong>Date</strong></a></li>
<li><a href="threads.html#00081"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>

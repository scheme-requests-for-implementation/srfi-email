<!-- MHonArc v2.6.15 -->
<!--X-Subject: Re: SRFI&#45;77 with more than one flonum representation -->
<!--X-From-R13: Oyna Ingfba <n.jngfbaNnfgebfzb.hanz.zk> -->
<!--X-Date: Thu, 29 Jun 2006 18:13:00 +0200 (MST) -->
<!--X-Message-Id: 44A33752.9000906@astrosmo.unam.mx -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: E1Fv0YU&#45;0000mn&#45;OV@adara.ccs.neu.edu -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: SRFI-77 with more than one flonum representation</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00473.html">Date Prev</a>][<a href="msg00475.html">Date Next</a>][<a href="msg00466.html">Thread Prev</a>][<a href="msg00476.html">Thread Next</a>][<a href="maillist.html#00474">Date Index</a>][<a href="threads.html#00474">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: SRFI-77 with more than one flonum representation</h1>
<p style="max-width: 30em;">This page is part of the web mail archives of <a href="http://srfi.schemers.org/srfi-77">SRFI 77</a> from before July 7th, 2015.  The <a href="http://srfi-email.schemers.org/srfi-77">new archives</a> for SRFI 77 contain all messages, not just those from before July 7th, 2015.</p>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: William D Clinger &lt;<a href="mailto:will@DOMAIN.HIDDEN">will@xxxxxxxxxxx</a>&gt;</li>
<li><em>Subject</em>: Re: SRFI-77 with more than one flonum representation</li>
<li><em>From</em>: Alan Watson &lt;<a href="mailto:a.watson@DOMAIN.HIDDEN">a.watson@xxxxxxxxxxxxxxxx</a>&gt;</li>
<li><em>Date</em>: Wed, 28 Jun 2006 22:13:38 -0400</li>
<li><em>Cc</em>: <a href="mailto:srfi-77@DOMAIN.HIDDEN">srfi-77@xxxxxxxxxxxxxxxxx</a>, <a href="mailto:sperber@DOMAIN.HIDDEN">sperber@xxxxxxxxxxxxxxxxxxxxxxxxxxx</a></li>
<li><em>Delivered-to</em>: <a href="mailto:srfi-77@DOMAIN.HIDDEN">srfi-77@xxxxxxxxxxxxxxxxx</a></li>
<li><em>In-reply-to</em>: &lt;<a href="mailto:E1Fv0YU-0000mn-OV@DOMAIN.HIDDEN">E1Fv0YU-0000mn-OV@xxxxxxxxxxxxxxxxx</a>&gt;</li>
<li><em>Organization</em>: Centro de Radioastronom&#xED;a y Astrof&#xED;sica UNAM</li>
<li><em>References</em>: &lt;<a href="mailto:E1Fv0YU-0000mn-OV@DOMAIN.HIDDEN">E1Fv0YU-0000mn-OV@xxxxxxxxxxxxxxxxx</a>&gt;</li>
<li><em>User-agent</em>: Mozilla Thunderbird 1.0.7 (X11/20051113)</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">
Thank you for your reply.

</pre><tt>In what follows, I will use &quot;floating-point representation&quot; to refer to 
</tt><tt>the low-level representation used internally for certain inexact numbers 
</tt><tt>and &quot;flonum&quot; to mean the subset of inexacts supported by the 
</tt><tt>flonum-specific parts of SRFI 77.
</tt><pre style="margin: 0em;">

William D Clinger wrote:
</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
Referring to John Cowan's interpretation, Alan Watson wrote:

</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><tt>Yes, that is a possible solution, but does anyone think it is a 
</tt><tt>satisfactory one?
</tt></blockquote><pre style="margin: 0em;">


I do.  I expect most implementations will designate their preferred
or default precision of inexact reals as their set of flonums.
</pre></blockquote><pre style="margin: 0em;">

</pre><tt>I agree that most implementations will continue to use a single 
</tt><tt>floating-point representation and so will have no problems implementing 
</tt><tt>SRFI 77.
</tt><pre style="margin: 0em;">

</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
SRFI 77 does not insist upon giving privileged status to any
particular representation of inexact reals, but it does allow
implementations to bestow privileged status upon a particular
precision.
</pre></blockquote><pre style="margin: 0em;">

If an implementation uses more than one floating point representation,
when implementing SRFI 77, the implementor must choose between defining
flonum to refer to only one representation (and thus prejudicing the
others) or to all representations (and thus being less efficient). Thus,
if you have more than one representation, it is difficult to obtain
efficiency without prejudicing certain representations.

The only motivation for the flonum-specific part of SRFI 77 seems to be
efficiency. Thus, in implementations that have more than one
floating-point representation, one either has to sacrifice efficiency or
</pre><tt>priviledge one representation. Thus, the motivation of SRFI 77 would in 
</tt><tt>this case encourage an implementor to bestow priviledged status on a 
</tt><tt>particular representation.
</tt><pre style="margin: 0em;">

</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
You may not have realized it, but R5RS 6.2.4 had already given
privileged status to some precision by saying &quot;the exponent marker
`e' specifies the default precision for the implementation.  The
default precision has at least as much precision as double, but
implementations may wish to allow this default to be set by the
user.&quot;
</pre></blockquote><pre style="margin: 0em;">

</pre><tt>I know, but I do not regard this as an especially important form of 
</tt><tt>prejudice. When you use &quot;e&quot;, you mean &quot;d&quot; or &quot;l&quot; and you don't care 
</tt><tt>which. (And I think I can guess the historical basis for this.)
</tt><pre style="margin: 0em;">

</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
One solution that would avoid giving priviledged status to one of
</pre><tt>the flonum representations would be to mandate modules for 
</tt><tt>short[*], single, double, and extended flonums. [...]
</tt></blockquote><pre style="margin: 0em;">


Yes, but we should first take a look at current practice. A quick
check of the eight implementations of Scheme that are installed on my
primary machine shows that all eight implement just one precision of
inexact real, and three of them are not even R5RS-conformant.
(Contrary to R5RS 6.2.4, they fail to recognize the `s', `f', `d',
</pre><tt>and `l' exponents and to map those precisions onto the available 
</tt><tt>precisions.)
</tt></blockquote><pre style="margin: 0em;">

</pre><tt>Forgive me if I put words into your mouth, but you seem to be saying 
</tt><tt>that existing implementations use only one floating-point 
</tt><tt>representation, therefore it is okay to standardize interfaces that are 
</tt><tt>well-adapted to such implementations but ill-adapted to implementations 
</tt><tt>that might use more than one floating-point representation.
</tt><pre style="margin: 0em;">

</pre><tt>This seems to be an argument for eliminating s, f, d, l, and forcing all 
</tt><tt>future Schemes to use only one floating-point representation. 
</tt><tt>Furthermore, it also seems to be an argument for forcing all future 
</tt><tt>Schemes to use only floating-point representations for inexacts.
</tt><pre style="margin: 0em;">

</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
There is little to be gained by requiring implementations to provide
modules for every precision when most systems provide only one
precision.
</pre></blockquote><pre style="margin: 0em;">

Perhaps, but there also seems to be little cost: simply make the short,
single, double, and long floating-point modules aliases for the default
module.

</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><tt>One of the arguments for the flonum-specific procedures is 
</tt><tt>efficiency. real-&gt;flonum is generic, and undersome circumstances 
</tt><tt>will not be as efficient as as hypothetical 
</tt><tt>double-precision-flonum-&gt;single-precision-flonum procedure.
</tt></blockquote><pre style="margin: 0em;">


Before we mandate some procedure on grounds of efficiency, we should
measure the efficiency to be gained in some real implementation.
</pre></blockquote><pre style="margin: 0em;">

</pre><tt>If you are going to promote interfaces on the basis of efficiency (and 
</tt><tt>there seems to be no other justification for the flonum-specific part of 
</tt><tt>SRFI 77), you should expect people to use the same arguments against you.
</tt><pre style="margin: 0em;">

Regards,

Alan
--
Dr Alan Watson
Centro de Radioastronom&#xED;a y Astrof&#xED;sica
Universidad Astron&#xF3;mico Nacional de M&#xE9;xico

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00476" href="msg00476.html">Re: SRFI-77 with more than one flonum representation</a></strong>
<ul><li><em>From:</em> John Cowan</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00466" href="msg00466.html">Re: SRFI-77 with more than one flonum representation</a></strong>
<ul><li><em>From:</em> William D Clinger</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00473.html">Re: Handling of invalid arguments</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00475.html">Constant names</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00466.html">Re: SRFI-77 with more than one flonum representation</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00476.html">Re: SRFI-77 with more than one flonum representation</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00474"><strong>Date</strong></a></li>
<li><a href="threads.html#00474"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>

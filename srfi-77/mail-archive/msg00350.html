<!-- MHonArc v2.6.15 -->
<!--X-Subject: Re: arithmetic issues -->
<!--X-From-R13: Ivyyvnz R Qyvatre <jvyyNppf.arh.rqh> -->
<!--X-Date: Wed, 18 Jan 2006 06:54:01 +0100 (MET) -->
<!--X-Message-Id: E1Ez6Ga&#45;0002aS&#45;7Q@welsh.ccs.neu.edu -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: arithmetic issues</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00349.html">Date Prev</a>][<a href="msg00351.html">Date Next</a>][<a href="msg00161.html">Thread Prev</a>][<a href="msg00351.html">Thread Next</a>][<a href="maillist.html#00350">Date Index</a>][<a href="threads.html#00350">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: arithmetic issues</h1>
<p style="max-width: 30em;">This page is part of the web mail archives of <a href="http://srfi.schemers.org/srfi-77">SRFI 77</a> from before July 7th, 2015.  The new archives for SRFI 77 are <a href="http://srfi-email.schemers.org/srfi-77/">here</a>.  The new archives contain all messages, not just those from before July 7th, 2015.</p>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: <a href="mailto:srfi-77@DOMAIN.HIDDEN">srfi-77@xxxxxxxxxxxxxxxxx</a></li>
<li><em>Subject</em>: Re: arithmetic issues</li>
<li><em>From</em>: William D Clinger &lt;<a href="mailto:will@DOMAIN.HIDDEN">will@xxxxxxxxxxx</a>&gt;</li>
<li><em>Date</em>: Wed, 18 Jan 2006 00:53:56 -0500</li>
<li><em>Cc</em>: <a href="mailto:agj@DOMAIN.HIDDEN">agj@xxxxxxxxxxxx</a>, <a href="mailto:sperber@DOMAIN.HIDDEN">sperber@xxxxxxxxxxxxxxxxxxxxxxxxxxx</a></li>
<li><em>Delivered-to</em>: <a href="mailto:srfi-77@DOMAIN.HIDDEN">srfi-77@xxxxxxxxxxxxxxxxx</a></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>Aubrey Jaffer wrote:
&gt; &quot;Branch Prediction and Interpreter Speed&quot;
&gt; &lt;<a  rel="nofollow" href="http://swiss.csail.mit.edu/~jaffer/CNS/interpreter-branch">http://swiss.csail.mit.edu/~jaffer/CNS/interpreter-branch</a>&gt;

The first two paragraphs of that article's conclusion read as follows:
&gt; For an interpreter, using branch prediction to prevent speculative
&gt; fetches can make generic arithmetic operations as fast as
&gt; typed-restricted ones.
&gt;
&gt; As a result, the SRFI-77 type-specific duplicate arithmetic
&gt; functions have motivation only for Scheme compilers. Type
&gt; information for compiling is commonly supplied thorugh type
&gt; declarations. It is incumbent upon SRFI-77 to justify its
&gt; approach versus type declarations, which it doesn't mention.

That first paragraph is moderately interesting, but is not
particularly relevant to SRFI-77.  It appears to me that
the second paragraph implicitly rests on three questionable
assumptions:

1.  Speedups that are achievable only by compilers are not
particularly important.
2.  Speed is the primary rationale for the type-specific
operations described in SRFI-77.
3.  The common way of doing things is the best way to do
them in Scheme.

Assumption 1 does not require a response.

Assumption 2 is, in my view, false.  In my view, the primary
rationale for the type-specific operations is to improve the
portability and predictability of Scheme code.  The fixnum
and flonum operations do that by providing a portable base
for a portable implementation of the full numeric tower.
This will allow Scheme programmers to use generic arithmetic
without worrying about implementations that don't provide the
full tower, and the fixnum-specific operations will allow
those who are already using fixnum-specific operations or
implementations to do so more portably.  The primary rationale
for the other type-specific operations is to address some of
the portability and predictability issues that were raised
in the paper by Egner et al.

As for assumption 3, type declarations cannot address the
portability and predictability issues unless implementations
are required to interpret those declarations in a consistent
way.  Given the expectations created by Common Lisp, many
Scheme programmers would make the mistake of thinking that
type declarations are for performance, and that interpreters
are free to ignore them.  Some implementors might make the
same mistakes, especially when you consider that requiring
implementations to pay attention to type declarations is
likely to make interpreters slower, not faster.

By the way, when speed is a goal, the Common Lisp experience
suggests that type declarations are often less effective than
type-specific operations, mainly because programmers would
rather write and read (fx+ (foo x) (baz y)) than
(the fixnum (+ (the fixnum (foo x)) (the fixnum (baz y)))).

Will

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00351" href="msg00351.html">Re: arithmetic issues</a></strong>
<ul><li><em>From:</em> Alan Watson</li></ul></li>
<li><strong><a name="00352" href="msg00352.html">Re: arithmetic issues</a></strong>
<ul><li><em>From:</em> bear</li></ul></li>
<li><strong><a name="00375" href="msg00375.html">Re: straw-man [was Re: arithmetic issues]</a></strong>
<ul><li><em>From:</em> Aubrey Jaffer</li></ul></li>
<li><strong><a name="00377" href="msg00377.html">Re: arithmetic issues</a></strong>
<ul><li><em>From:</em> Alan Watson</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00349.html">Re: arithmetic issues</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00351.html">Re: arithmetic issues</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00161.html">Re: arithmetic issues</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00351.html">Re: arithmetic issues</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00350"><strong>Date</strong></a></li>
<li><a href="threads.html#00350"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>

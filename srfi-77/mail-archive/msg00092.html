<!-- MHonArc v2.6.15 -->
<!--X-Subject: Re: Exactness -->
<!--X-From-R13: [nepva 'Cepmnx' Ybjnypmlx <depmnxNxaz.bet.cy> -->
<!--X-Date: Sat, 22 Oct 2005 02:34:46 +0200 (MST) -->
<!--X-Message-Id: 87u0faqti6.fsf@qrnik.zagroda -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 87wtk9qro1.fsf@qrnik.zagroda -->
<!--X-Reference: 20051019191720.GA24703@mimir.szonye.com -->
<!--X-Reference: 87fyqxb6i6.fsf@qrnik.zagroda -->
<!--X-Reference: 20051019220800.GF24703@mimir.szonye.com -->
<!--X-Reference: Pine.LNX.4.58.0510191726410.13819@bolt.sonic.net -->
<!--X-Reference: 87ach45z5v.fsf@qrnik.zagroda -->
<!--X-Reference: Pine.LNX.4.58.0510201408480.6745@bolt.sonic.net -->
<!--X-Reference: 87hdbbfwps.fsf@qrnik.zagroda -->
<!--X-Reference: 87oe5j1sef.fsf@becket.becket.net -->
<!--X-Reference: 87wtk7qoau.fsf@qrnik.zagroda -->
<!--X-Reference: 87zmp2ra04.fsf@becket.becket.net -->
<!--X-Reference: 87k6g64ojy.fsf@qrnik.zagroda -->
<!--X-Reference: 874q7ar4vf.fsf@becket.becket.net -->
<!--X-Reference: 878xwm4ncq.fsf@qrnik.zagroda -->
<!--X-Reference: 87vezqpplg.fsf@becket.becket.net -->
<!--X-Reference: 874q7alg8r.fsf@qrnik.zagroda -->
<!--X-Reference: 87fyqupmsr.fsf@becket.becket.net -->
<!--X-Reference: 87zmp2jyyp.fsf@qrnik.zagroda -->
<!--X-Reference: 87zmp2o5az.fsf@becket.becket.net -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: Exactness</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00091.html">Date Prev</a>][<a href="msg00093.html">Date Next</a>][<a href="msg00090.html">Thread Prev</a>][<a href="msg00095.html">Thread Next</a>][<a href="maillist.html#00092">Date Index</a>][<a href="threads.html#00092">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: Exactness</h1>
<p style="max-width: 30em;">This page is part of the web mail archives of <a href="http://srfi.schemers.org/srfi-77">SRFI 77</a> from before July 7th, 2015.  The new archives for SRFI 77 are <a href="http://srfi-email.schemers.org/srfi-77/">here</a>.  The new archives contain all messages, not just those from before July 7th, 2015.</p>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: <a href="mailto:srfi-77@DOMAIN.HIDDEN">srfi-77@xxxxxxxxxxxxxxxxx</a></li>
<li><em>Subject</em>: Re: Exactness</li>
<li><em>From</em>: Marcin 'Qrczak' Kowalczyk &lt;<a href="mailto:qrczak@DOMAIN.HIDDEN">qrczak@xxxxxxxxxx</a>&gt;</li>
<li><em>Date</em>: Sat, 22 Oct 2005 02:34:41 +0200</li>
<li><em>Delivered-to</em>: <a href="mailto:srfi-77@DOMAIN.HIDDEN">srfi-77@xxxxxxxxxxxxxxxxx</a></li>
<li><em>In-reply-to</em>: &lt;<a href="mailto:87zmp2o5az.fsf@DOMAIN.HIDDEN">87zmp2o5az.fsf@xxxxxxxxxxxxxxxxx</a>&gt; (Thomas Bushnell's message of &quot;Fri, 21 Oct 2005 15:48:04 -0700&quot;)</li>
<li><em>Mail-followup-to</em>: <a href="mailto:srfi-77@DOMAIN.HIDDEN">srfi-77@xxxxxxxxxxxxxxxxx</a></li>
<li><em>References</em>: &lt;<a href="mailto:87wtk9qro1.fsf@DOMAIN.HIDDEN">87wtk9qro1.fsf@xxxxxxxxxxxxx</a>&gt;	&lt;<a href="mailto:20051019191720.GA24703@DOMAIN.HIDDEN">20051019191720.GA24703@xxxxxxxxxxxxxxxx</a>&gt;	&lt;<a href="mailto:87fyqxb6i6.fsf@DOMAIN.HIDDEN">87fyqxb6i6.fsf@xxxxxxxxxxxxx</a>&gt;	&lt;<a href="mailto:20051019220800.GF24703@DOMAIN.HIDDEN">20051019220800.GF24703@xxxxxxxxxxxxxxxx</a>&gt;	&lt;<a href="mailto:Pine.LNX.4.58.0510191726410.13819@DOMAIN.HIDDEN">Pine.LNX.4.58.0510191726410.13819@xxxxxxxxxxxxxx</a>&gt;	&lt;<a href="mailto:87ach45z5v.fsf@DOMAIN.HIDDEN">87ach45z5v.fsf@xxxxxxxxxxxxx</a>&gt;	&lt;<a href="mailto:Pine.LNX.4.58.0510201408480.6745@DOMAIN.HIDDEN">Pine.LNX.4.58.0510201408480.6745@xxxxxxxxxxxxxx</a>&gt;	&lt;<a href="mailto:87hdbbfwps.fsf@DOMAIN.HIDDEN">87hdbbfwps.fsf@xxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:87oe5j1sef.fsf@DOMAIN.HIDDEN">87oe5j1sef.fsf@xxxxxxxxxxxxxxxxx</a>&gt;	&lt;<a href="mailto:87wtk7qoau.fsf@DOMAIN.HIDDEN">87wtk7qoau.fsf@xxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:87zmp2ra04.fsf@DOMAIN.HIDDEN">87zmp2ra04.fsf@xxxxxxxxxxxxxxxxx</a>&gt;	&lt;<a href="mailto:87k6g64ojy.fsf@DOMAIN.HIDDEN">87k6g64ojy.fsf@xxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:874q7ar4vf.fsf@DOMAIN.HIDDEN">874q7ar4vf.fsf@xxxxxxxxxxxxxxxxx</a>&gt;	&lt;<a href="mailto:878xwm4ncq.fsf@DOMAIN.HIDDEN">878xwm4ncq.fsf@xxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:87vezqpplg.fsf@DOMAIN.HIDDEN">87vezqpplg.fsf@xxxxxxxxxxxxxxxxx</a>&gt;	&lt;<a href="mailto:874q7alg8r.fsf@DOMAIN.HIDDEN">874q7alg8r.fsf@xxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:87fyqupmsr.fsf@DOMAIN.HIDDEN">87fyqupmsr.fsf@xxxxxxxxxxxxxxxxx</a>&gt;	&lt;<a href="mailto:87zmp2jyyp.fsf@DOMAIN.HIDDEN">87zmp2jyyp.fsf@xxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:87zmp2o5az.fsf@DOMAIN.HIDDEN">87zmp2o5az.fsf@xxxxxxxxxxxxxxxxx</a>&gt;</li>
<li><em>Sender</em>: Marcin 'Qrczak' Kowalczyk &lt;<a href="mailto:qrczak@DOMAIN.HIDDEN">qrczak@xxxxxxxxxx</a>&gt;</li>
<li><em>User-agent</em>: Gnus/5.1006 (Gnus v5.10.6) Emacs/21.3 (gnu/linux)</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>Thomas Bushnell BSG &lt;tb@xxxxxxxxxx&gt; writes:

&gt; Much better is to think about what *features* specifically you want,
&gt; and have programmers ask for *those*.

It would lead to a way too complex interface. There are too many
interacting features to specify.

The purpose of the IEEE standard for floating point arithmetic
is that we don't have to describe features from scratch each time,
design what kinds of special numbers should be supported and how.
It comes prepackaged. It's a set of sane defaults for certain purposes.
And it's usually implemented in hardware, i.e. it's fast.

Actually IEEE does provide various knobs for tuning the behavior:
rounding mode, the precision, or setting which unusual conditions
should be signalled as catchable errors. I would be glad if they
were standarized in more programming languages.

But how can we agree on the way of specifying these details if we
can't agree whether Scheme should be mandated to support any kind
of floating point at all?

The R5RS knobs are very limited. It's basically one button for all
numbers: exact/inexact. Everything else is supposed to be automatic.
The user must even be prepared that the implementation itself will
sometimes switch the button to &quot;inexact&quot;. This is too inflexible.
How do you propose to specify more?

&gt; So far you've mentioned one feature: constant size arithmetic.
&gt; I've suggested one way of having programmers ask for that feature
&gt; (though there are surely others).

Below are some other features which matter.
a) Do you think they should be independently settable, and the
   implementation would be required to produce a numeric format
   which fulfills any self-consistent combination of them?
b) Or the programmer should have no portable way to control them,
   as everything (besides the exactness bit) should depend on the
   implementation?
c) Or a few prepackaged sets of choices should be provided (ratnums,
   flonums etc., less standard representations used explicitly -
   not taking over the default reader formats)?
My answer is c) for most of them, a) to some others (e.g. textual
formatting).

1. In case of functions which in general can't be computed exactly
   (e.g. trigonometric), do we want an assurance about the interval
   that the true result sits in (interval arithmetic), facing the
   possibility that &lt; can't be determined, or perhaps we will be happy
   with a single approximate result?

2. In case of functions like trigonometric, do we insist on specifying
   the precision - perhaps quite large - or any reasonable hardware
   default will do?

3. How to format a number into text? Use a decimal point or vulgar
   fraction? Do we want to get a decimal point in case of an inexact
   number which looks like it's an integer? How many digits after the
   point to display? Is the scientific (exponential) notation accepted?
   Pad with leading and trailing zeros to some widths? Use &quot;.&quot; or &quot;,&quot;?
   Do we accept &quot;#&quot; in place of trailing insignificant digits?

4. What should happen when the number being computed is getting too
   large to be conveniently represented? Return &quot;infinity&quot;? Signal an
   error? How an infinity is formatted into text?

5. What should happen when the inherent inaccuracy of the operation
   would make the implementation unable to sensibly compute the
   result, e.g. (sin (exp 1000))? Return special not-a-number marker?
   Signal an error?

6. What should happen if not-a-number is compared by eqv? = &lt; &gt; &lt;= &gt;=
   with other numbers and itself? Return #t/#f? Signal an error?

7. Should there be a distinguished -0.0 which determines the side
   of a branch cut of a multivalued complex function?

8. Do we need exact complex numbers?

9. Should the implementation try to track inexactness of real and
   imaginary part separately, or we don't care? If the imaginary part
   comes very close to 0, should the result be indistinguishable from
   a real number, or we care about being sure whether it's real or not?

10. When we ask whether the number is even, and it happens to be
   inexact, should the implementation try to answer hoping that
   inexactness did not change the value, or we prefer an error to be
   signalled?

&gt;&gt; What do you mean by constant-width addition?
&gt;
&gt; I mean &quot;addition in which the space use of the output is no larger
&gt; than the input&quot;.  This is a feature which you said was needed for
&gt; reals (I agree) and it's a feature that is useful for integers too.

This description is meaningful for inexact numbers (cut less
significant digits which are over the limit, with proper rounding),
but meaningless for exact ones: there are no digits to cut if the
number should remain exact.

&gt; I don't know what you mean by &quot;safe&quot;;

That they don't cause undefined behavior.

&gt;&gt; Letting (+ 1.2 3.4) perform fixed-size binary floating point arithmetic
&gt;&gt; is compatible with both the existing standard and common practice.
&gt;
&gt; What exactly are you asking for?

In general I'm asking to make the behavior of Scheme arithmetic
defined in more details, to give less choice for implementations and
more confidence for users about what to expect.

For example I believe that IEEE or at least IEEE-like floating point
arithmetic should be the default choice of inexact real numbers.
I wish that if the given implementation supports IEEE at all, it
should do it in the same way as others e.g. with respect to the
behavior of eqv? and = on NaN and the textual notation of special
numbers.

I don't have a complete plan. I only comment on issues related to
SRFI-77, which was not my initiative.

&gt; By &quot;letting&quot; do you mean &quot;requiring&quot;?

Yes.

&gt; (Because then, you're wrong.)

Why?

-- 
   __(&quot;&lt;         Marcin Kowalczyk
   \__/       qrczak@xxxxxxxxxx
    ^^     <a  rel="nofollow" href="http://qrnik.knm.org.pl/~qrczak/">http://qrnik.knm.org.pl/~qrczak/</a>

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00095" href="msg00095.html">Re: Exactness</a></strong>
<ul><li><em>From:</em> Thomas Bushnell BSG</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00055" href="msg00055.html">My comments</a></strong>
<ul><li><em>From:</em> Marcin 'Qrczak' Kowalczyk</li></ul></li>
<li><strong><a name="00056" href="msg00056.html">Re: My comments</a></strong>
<ul><li><em>From:</em> Bradd W. Szonye</li></ul></li>
<li><strong><a name="00062" href="msg00062.html">Re: My comments</a></strong>
<ul><li><em>From:</em> Marcin 'Qrczak' Kowalczyk</li></ul></li>
<li><strong><a name="00067" href="msg00067.html">Re: My comments</a></strong>
<ul><li><em>From:</em> Bradd W. Szonye</li></ul></li>
<li><strong><a name="00068" href="msg00068.html">Exactness (was Re: My comments)</a></strong>
<ul><li><em>From:</em> bear</li></ul></li>
<li><strong><a name="00070" href="msg00070.html">Re: Exactness</a></strong>
<ul><li><em>From:</em> Marcin 'Qrczak' Kowalczyk</li></ul></li>
<li><strong><a name="00072" href="msg00072.html">Re: Exactness</a></strong>
<ul><li><em>From:</em> bear</li></ul></li>
<li><strong><a name="00073" href="msg00073.html">Re: Exactness</a></strong>
<ul><li><em>From:</em> Marcin 'Qrczak' Kowalczyk</li></ul></li>
<li><strong><a name="00074" href="msg00074.html">Re: Exactness</a></strong>
<ul><li><em>From:</em> Thomas Bushnell BSG</li></ul></li>
<li><strong><a name="00075" href="msg00075.html">Re: Exactness</a></strong>
<ul><li><em>From:</em> Marcin 'Qrczak' Kowalczyk</li></ul></li>
<li><strong><a name="00080" href="msg00080.html">Re: Exactness</a></strong>
<ul><li><em>From:</em> Thomas Bushnell BSG</li></ul></li>
<li><strong><a name="00081" href="msg00081.html">Re: Exactness</a></strong>
<ul><li><em>From:</em> Marcin 'Qrczak' Kowalczyk</li></ul></li>
<li><strong><a name="00083" href="msg00083.html">Re: Exactness</a></strong>
<ul><li><em>From:</em> Thomas Bushnell BSG</li></ul></li>
<li><strong><a name="00085" href="msg00085.html">Re: Exactness</a></strong>
<ul><li><em>From:</em> Marcin 'Qrczak' Kowalczyk</li></ul></li>
<li><strong><a name="00086" href="msg00086.html">Re: Exactness</a></strong>
<ul><li><em>From:</em> Thomas Bushnell BSG</li></ul></li>
<li><strong><a name="00087" href="msg00087.html">Re: Exactness</a></strong>
<ul><li><em>From:</em> Marcin 'Qrczak' Kowalczyk</li></ul></li>
<li><strong><a name="00088" href="msg00088.html">Re: Exactness</a></strong>
<ul><li><em>From:</em> Thomas Bushnell BSG</li></ul></li>
<li><strong><a name="00089" href="msg00089.html">Re: Exactness</a></strong>
<ul><li><em>From:</em> Marcin 'Qrczak' Kowalczyk</li></ul></li>
<li><strong><a name="00090" href="msg00090.html">Re: Exactness</a></strong>
<ul><li><em>From:</em> Thomas Bushnell BSG</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00091.html">Re: arithmetic issues</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00093.html">Re: arithmetic issues</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00090.html">Re: Exactness</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00095.html">Re: Exactness</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00092"><strong>Date</strong></a></li>
<li><a href="threads.html#00092"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>

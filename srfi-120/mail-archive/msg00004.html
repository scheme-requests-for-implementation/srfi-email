<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: Last call -->
<!--X-From-R13: Fnxnfuv Yngb <xgnxnfuvNlznvy.pbz> -->
<!--X-Date: Mon, 20 Apr 2015 17:28:45 +0000 (UTC) -->
<!--X-Message-Id: 5535374D.7070206@ymail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 5533DD41.3000206@ymail.com -->
<!--X-Reference: 20150419185129.GC26194@mercury.ccil.org -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: Last call</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00003.html">Date Prev</a>][<a href="msg00005.html">Date Next</a>][<a href="msg00002.html">Thread Prev</a>][<a href="msg00005.html">Thread Next</a>][<a href="maillist.html#00004">Date Index</a>][<a href="threads.html#00004">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: Last call</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: John Cowan &lt;<a href="mailto:cowan@DOMAIN.HIDDEN">cowan@xxxxxxxxxxxxxxxx</a>&gt;</li>
<li><em>Subject</em>: Re: Last call</li>
<li><em>From</em>: Takashi Kato &lt;<a href="mailto:ktakashi@DOMAIN.HIDDEN">ktakashi@xxxxxxxxx</a>&gt;</li>
<li><em>Date</em>: Mon, 20 Apr 2015 19:28:45 +0200</li>
<li><em>Cc</em>: <a href="mailto:srfi-120@DOMAIN.HIDDEN">srfi-120@xxxxxxxxxxxxxxxxx</a></li>
<li><em>Delivered-to</em>: <a href="mailto:srfi-120@DOMAIN.HIDDEN">srfi-120@xxxxxxxxxxxxxxxxx</a></li>
<li><em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=ymail.com; s=s2048; t=1429550924; bh=rJawe53hYqcrAOFrMy6b2V1OfwHT4GNzxpZEZYDJlXM=; h=Date:From:To:CC:Subject:References:In-Reply-To:From:Subject; b=Cf+xpjy0ReHJHK+7lptcRqt7ha0rPtWfwvMpNwhX46U7O/7ewKM2XVeWIkxaG1fT28inadW7kn3j4UC0eKtJk9F/vyZ0oBRD2xpih1kykmmOfeczMzf9wgXE20SdL3RpmyxHEz9H3WxsmaUqOPJ3IXJOTlwCBSXwmFOWFVsXHiNouzGKWDRLEPXOMIrdzmGQPJAWvTwOjUzqLBZifpO/KO2Dwfi/3vCwJRne9u+Tst5TsbSo5UOKUYJLp50HoanCKQ+vMbHfbfr71MF2Eyzi8F8Rsq6cFt9GE/m8PR95lvPlpdZV82eLH/gAfC0blfI+ckVX9fv8fyjH26XwOSMQuw==</li>
<li><em>In-reply-to</em>: &lt;20150419185129.GC26194@mercury.ccil.org&gt;</li>
<li><em>References</em>: &lt;<a href="msg00002.html">5533DD41.3000206@ymail.com</a>&gt; &lt;20150419185129.GC26194@mercury.ccil.org&gt;</li>
<li><em>User-agent</em>: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:31.0) Gecko/20100101 Thunderbird/31.6.0</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
1) You need to say something about the dynamic environment in which the
task runs: is it the environment of the call to make-timer, timer-start!,
or timer-schedule!?
</pre></blockquote><pre style="margin: 0em;">
It should be where the `thunk` is captured. I'm not sure if I understand
what you meant correctly. Could you maybe give me a clear example why
this needs to be clarified?

</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
2) I agree that there's no need to separate timer-start! and
timer-schedule!.  To break the symmetry, rename timer-stop! to
timer-cancel!, which is more the idea anyway (since it cannot be
restarted).
</pre></blockquote><pre style="margin: 0em;">
You mean `make-timer` and `timer-start!`? `timer-cancel!` sounds good,
I'll change it.

</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
3) Rather than talking about time objects, simply talk about integers,
and then say that implementations may extend the appropriate arguments
to implementation-specified objects.
</pre></blockquote><pre style="margin: 0em;">
The reason why I've added the time object is that it can handle nano
second. If users want to make smaller unit of period, then at least the
SRFI can handle it. Or it might be better to let the integer represents
nano second instead of milli second. Any opinion?

</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
4) Timer-{remove!,exists} would be clearer as timer-task-{remove!,exists},
since they affect only one of many possible tasks.
</pre></blockquote><pre style="margin: 0em;">
Sounds good, I'll change it.

</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
5) Better not to say that id is an integer, but leave it as an unspecified
and possibly disjoint type.
</pre></blockquote><pre style="margin: 0em;">
The idea behind this is that if other process (not thread) want to stop
a task, then it needs to be a readable datum. Well, it might be users'
responsibility to handle it properly. How about adding timer type which
contains its id and modification procedures should accept both timer
task itself and id to modify timer?

</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
6) Need to say something about what can be done from a task, such as
cancel other tasks on the same timer, change its own scheduling, etc.
This affects how much safety an implementation needs.
</pre></blockquote><pre style="margin: 0em;">
Good point. A task should be able to cancel other tasks but should not
be able to cancel/reschedule itself. I'll add it.

</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
7) Are tasks potentially run concurrently, or always sequentially?
Or concurrently on different timers but sequentially on the same timer?
</pre></blockquote><tt>It doesn't have to be sequentially. If the same task is scheduled on 
</tt><tt>different
</tt><pre style="margin: 0em;">
timer, then it should be run concurrently. But timer doesn't have to
guarantee the task's atomicity. I'll add it.


_/_/
Takashi Kato
E-mail: ktakashi@xxxxxxxxx

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00005" href="msg00005.html">Re: Last call</a></strong>
<ul><li><em>From:</em> cowan</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00002" href="msg00002.html">Last call</a></strong>
<ul><li><em>From:</em> Takashi Kato</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00003.html">[cowan@xxxxxxxxxxxxxxxx: Re: Last call]</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00005.html">Re: Last call</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00002.html">Last call</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00005.html">Re: Last call</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00004"><strong>Date</strong></a></li>
<li><a href="threads.html#00004"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>

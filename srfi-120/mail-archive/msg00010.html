<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: Last call -->
<!--X-From-R13: Fnxnfuv Yngb <xgnxnfuvNlznvy.pbz> -->
<!--X-Date: Wed, 22 Apr 2015 18:55:12 +0000 (UTC) -->
<!--X-Message-Id: 5537EE91.40107@ymail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 5533DD41.3000206@ymail.com -->
<!--X-Reference: 20150419185129.GC26194@mercury.ccil.org -->
<!--X-Reference: 5535374D.7070206@ymail.com -->
<!--X-Reference: 0fe608a9f9da2cc9a78d28d5d09b3826.squirrel@www.ccil.org -->
<!--X-Reference: 55369C28.9070708@ymail.com -->
<!--X-Reference: 20150422000138.GA17214@mercury.ccil.org -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: Last call</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00009.html">Date Prev</a>][<a href="msg00011.html">Date Next</a>][<a href="msg00009.html">Thread Prev</a>][<a href="msg00011.html">Thread Next</a>][<a href="maillist.html#00010">Date Index</a>][<a href="threads.html#00010">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: Last call</h1>
<p style="max-width: 30em;">This page is part of the web mail archives of <a href="http://srfi.schemers.org/srfi-120">SRFI 120</a> from before July 7th, 2015.  The <a href="http://srfi-email.schemers.org/srfi-120">new archives</a> for SRFI 120 contain all messages, not just those from before July 7th, 2015.</p>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: John Cowan &lt;<a href="mailto:cowan@DOMAIN.HIDDEN">cowan@xxxxxxxxxxxxxxxx</a>&gt;</li>
<li><em>Subject</em>: Re: Last call</li>
<li><em>From</em>: Takashi Kato &lt;<a href="mailto:ktakashi@DOMAIN.HIDDEN">ktakashi@xxxxxxxxx</a>&gt;</li>
<li><em>Date</em>: Wed, 22 Apr 2015 20:55:13 +0200</li>
<li><em>Cc</em>: <a href="mailto:cowan@DOMAIN.HIDDEN">cowan@xxxxxxxx</a>, <a href="mailto:srfi-120@DOMAIN.HIDDEN">srfi-120@xxxxxxxxxxxxxxxxx</a></li>
<li><em>Delivered-to</em>: <a href="mailto:srfi-120@DOMAIN.HIDDEN">srfi-120@xxxxxxxxxxxxxxxxx</a></li>
<li><em>Dkim-signature</em>: v=1; a=rsa-sha256; c=relaxed/relaxed; d=ymail.com; s=s2048; t=1429728911; bh=kkY9ynfar/TGzcvqltt7/p732hUokMDkFMcsArLG8uk=; h=Date:From:To:CC:Subject:References:In-Reply-To:From:Subject; b=I1544tsb2UXJlVXLIUK+K60Xv1QH7J63/Ji/rSaC48miVjFimVrFLsxrqU8AMLyxMdso+XQNxqxIjS4dPA2n8CgTQFW+1lOOwDJPC7OWrVXeaXro4fLhxLX6T6JukfQ/5SWm161T+xUXaOovf8lfynAbS4Me8ryKkl1jQIR57N3ewr1wF01Jl840G5HVvKa/cIXWylpkt84nPu6w5wOyxyFX4Lta83Ecx7DQGXEVEVb3nQMlnivp17+VOUDHnhFDdZDyZHYKMfcIQ6LpY7YyPdq9Seuglls0odgIZV5eT7QSiDbjKi3mPj5m2vV17lO+0/q6IJNB1qPpixf6JFHsug==</li>
<li><em>In-reply-to</em>: &lt;<a href="msg00009.html">20150422000138.GA17214@mercury.ccil.org</a>&gt;</li>
<li><em>References</em>: &lt;<a href="msg00002.html">5533DD41.3000206@ymail.com</a>&gt; &lt;20150419185129.GC26194@mercury.ccil.org&gt; &lt;<a href="msg00004.html">5535374D.7070206@ymail.com</a>&gt; &lt;<a href="msg00005.html">0fe608a9f9da2cc9a78d28d5d09b3826.squirrel@www.ccil.org</a>&gt; &lt;<a href="msg00008.html">55369C28.9070708@ymail.com</a>&gt; &lt;<a href="msg00009.html">20150422000138.GA17214@mercury.ccil.org</a>&gt;</li>
<li><em>User-agent</em>: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:31.0) Gecko/20100101 Thunderbird/31.6.0</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
That sounds like the right idea.  Because the thunks run concurrently
with the main Scheme program, they have to capture the dynamic
environment so that, for example, if the main program changes the
value of current-output, the thunk isn't affected.
</pre></blockquote><pre style="margin: 0em;">
Ah, ok now I understand. I'll add it.

</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
Well, a simple approach would be to use a pair of fixnums (a . b)
such that the value is a * 10 ^ -b, so (30 . 9) would mean 30
nanoseconds.  Just having a nanosecond count is problematic,
because 2^30 ns is only a little more than 1 second.
</pre></blockquote><pre style="margin: 0em;">
The period can also be bigger amount such as hour. So I think it's
more intuitive if we can specify its unit.

</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
Another thing to explain is what happens if a task is still running
when it is rescheduled.  I assume that it just goes on running,
but the SRFI should say so.
</pre></blockquote><pre style="margin: 0em;">
Good point. I'll add it.

</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
Here's an idea to simplify things: have only one task per timer, and if
you want to execute more than one thunk, have more than one timer.
Right now it seems to make no difference if you have many tasks on a
timer or many timers, but using the second approach allows you
to simplify the API to (make-timer thunk when [period]), timer?,
timer-cancel!, and (timer-reschedule! when [period]).
</pre></blockquote><pre style="margin: 0em;">
This is a good idea if the SRFI can specify the cost of timer creation
really cheap. However if a timer creates a thread like reference
implementation, then the cost of thread creation might be expensive.


_/_/
Takashi Kato
E-mail: ktakashi@xxxxxxxxx

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00011" href="msg00011.html">Re: Last call</a></strong>
<ul><li><em>From:</em> cowan</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00002" href="msg00002.html">Last call</a></strong>
<ul><li><em>From:</em> Takashi Kato</li></ul></li>
<li><strong><a name="00004" href="msg00004.html">Re: Last call</a></strong>
<ul><li><em>From:</em> Takashi Kato</li></ul></li>
<li><strong><a name="00005" href="msg00005.html">Re: Last call</a></strong>
<ul><li><em>From:</em> cowan</li></ul></li>
<li><strong><a name="00008" href="msg00008.html">Re: Last call</a></strong>
<ul><li><em>From:</em> Takashi Kato</li></ul></li>
<li><strong><a name="00009" href="msg00009.html">Re: Last call</a></strong>
<ul><li><em>From:</em> John Cowan</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00009.html">Re: Last call</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00011.html">Re: Last call</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00009.html">Re: Last call</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00011.html">Re: Last call</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00010"><strong>Date</strong></a></li>
<li><a href="threads.html#00010"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>

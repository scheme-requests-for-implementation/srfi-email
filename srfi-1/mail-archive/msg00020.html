<!-- MHonArc v2.6.15 -->
<!--X-Subject: safety -->
<!--X-From-R13: [ngguvnf Tryyrvfra <zngguvnfNpf.evpr.rqh> -->
<!--X-Date: Fri, 8 Jan 1999 09:50:23 &#45;0600 (CST) -->
<!--X-Message-Id: 199901081550.JAA05089@africa.cs.rice.edu -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>safety</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00019.html">Date Prev</a>][<a href="msg00021.html">Date Next</a>][<a href="msg00019.html">Thread Prev</a>][<a href="msg00025.html">Thread Next</a>][<a href="maillist.html#00020">Date Index</a>][<a href="threads.html#00020">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>safety</h1>
<p style="max-width: 30em;">This page is part of the web mail archives of <a href="http://srfi.schemers.org/srfi-1">SRFI 1</a> from before July 7th, 2015.  The <a href="http://srfi-email.schemers.org/srfi-1">new archives</a> for SRFI 1 contain all messages, not just those from before July 7th, 2015.</p>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: &lt;<a href="mailto:srfi-1@DOMAIN.HIDDEN">srfi-1@xxxxxxxxxxxxxxxxx</a>&gt;</li>
<li><em>Subject</em>: safety</li>
<li><em>From</em>: Matthias Felleisen &lt;<a href="mailto:matthias@DOMAIN.HIDDEN">matthias@xxxxxxxxxxx</a>&gt;</li>
<li><em>Date</em>: Fri, 8 Jan 1999 09:50:20 -0600 (CST)</li>
<li><em>Reply-to</em>: <a href="mailto:matthias@DOMAIN.HIDDEN">matthias@xxxxxxxx</a></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>
Olin: as I have pointed out in a private email before, I am concerned about
the lack of `safety' in the specification and reference implementation of
the list library.

Scheme should distinguish itself from languages like C through a proper and
complete (though informal) specification, which permits implementors to
produce `safe' implementations. In particular, Scheme's SRFI library
functions should have the same status as Scheme's built-in functions with
quasi-library status. For comparison, I have lifted the specification of
two such functions from the R5RS:

  [[library procedure]] (list-tail list k)

  Returns the sublist of list obtained by omitting the first k elements. It
  is an error if list has fewer than k elements. List-tail could be defined
  by

    (define list-tail
      (lambda (x k)
	(if (zero? k)
	    x
	    (list-tail (cdr x) (- k 1)))))

  [[library procedure]] (list-ref list k)

  Returns the kth element of list. (This is the same as the car of
  (list-tail list k).) It is an error if list has fewer than k elements.


The reference implementation of list-tail is consistent with the
specification because the Authors chose to assign the meaning &quot;an
implementation may ignore the issue ...&quot; to the phrase 
&quot;it is an error if ...&quot;.

Analogously, the specification for a procedure like TAKE should contain a
sentence like 

 &quot;It is an error if &lt;i&gt; is larger than the length of &lt;list&gt;.&quot; 

Please note that TAKE is not the only procedure specification that suffers
from this flaw. 

Furthermore, I believe that libraries should go even further and specify 
that 

  &quot;it is an error if a procedure whose i-th parameter is specified to be a
   &lt;list&gt; receives an i-th argument that does not belong to the collection of
   &lt;lists&gt;.&quot;

Again, this gives the implementation the freedom to delay signaling an
error until the non-listness of the argument is discovered or not to signal
an error or to be preemptive in checking the nature of all arguments. Of
course, the statement should be generalized over &lt;list&gt; and &lt;lists&gt; as
appropriate. 

I understand that, unless I have overlooked something, R5RS does not 
include an analogous clause, but I consider this an oversight on the 
side of the Authors, not a virtue. 

-- Matthias

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00019.html">Chez Scheme and SRFI-1</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00021.html">Folds and reductions</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00019.html">Chez Scheme and SRFI-1</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00025.html">Re: safety</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00020"><strong>Date</strong></a></li>
<li><a href="threads.html#00020"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>

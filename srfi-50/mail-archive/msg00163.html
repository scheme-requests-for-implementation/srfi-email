<!-- MHonArc v2.6.15 -->
<!--X-Subject: Re: I don't believe in "(may GC)" -->
<!--X-From-R13: orne <orneNfbavp.arg> -->
<!--X-Date: Mon,  5 Jan 2004 19:16:09 +0100 (NFT) -->
<!--X-Message-Id: Pine.LNX.4.58.0401051000540.589@bolt.sonic.net -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 200401050121.RAA21326@morrowfield.regexps.com -->
<!--X-Reference: E1AdTVM&#45;0000D3&#45;00@mail.mumble.net -->
<!--X-Reference: 20040105.024548.512269595.shiro@lava.net -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: I don't believe in &quot;(may GC)&quot;</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00162.html">Date Prev</a>][<a href="msg00164.html">Date Next</a>][<a href="msg00157.html">Thread Prev</a>][<a href="msg00159.html">Thread Next</a>][<a href="maillist.html#00163">Date Index</a>][<a href="threads.html#00163">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: I don't believe in &quot;(may GC)&quot;</h1>
<p style="max-width: 30em;">This page is part of the web mail archives of <a href="http://srfi.schemers.org/srfi-50">SRFI 50</a> from before July 7th, 2015.  The new archives for SRFI 50 are <a href="http://srfi-email.schemers.org/srfi-50/">here</a>.  The new archives contain all messages, not just those from before July 7th, 2015.</p>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: Shiro Kawai &lt;<a href="mailto:shiro@DOMAIN.HIDDEN">shiro@xxxxxxxx</a>&gt;</li>
<li><em>Subject</em>: Re: I don't believe in &quot;(may GC)&quot;</li>
<li><em>From</em>: bear &lt;<a href="mailto:bear@DOMAIN.HIDDEN">bear@xxxxxxxxx</a>&gt;</li>
<li><em>Date</em>: Mon, 5 Jan 2004 10:16:00 -0800 (PST)</li>
<li><em>Cc</em>: <a href="mailto:srfi-50@DOMAIN.HIDDEN">srfi-50@xxxxxxxxxxxxxxxxx</a></li>
<li><em>Delivered-to</em>: <a href="mailto:srfi-50@DOMAIN.HIDDEN">srfi-50@xxxxxxxxxxxxxxxxx</a></li>
<li><em>In-reply-to</em>: &lt;<a href="mailto:20040105.024548.512269595.shiro@DOMAIN.HIDDEN">20040105.024548.512269595.shiro@xxxxxxxx</a>&gt;</li>
<li><em>References</em>: &lt;<a href="mailto:200401050121.RAA21326@DOMAIN.HIDDEN">200401050121.RAA21326@xxxxxxxxxxxxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:E1AdTVM-0000D3-00@DOMAIN.HIDDEN">E1AdTVM-0000D3-00@xxxxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:20040105.024548.512269595.shiro@DOMAIN.HIDDEN">20040105.024548.512269595.shiro@xxxxxxxx</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>

On Mon, 5 Jan 2004, Shiro Kawai wrote:

&gt;From: Richard Kelsey &lt;kelsey@xxxxxxx&gt;

&gt;&gt;     SCHEME_EXTRACT_STRING_CONTENTS(scheme_value, index, count, buffer)
&gt;&gt;
&gt;&gt; which copies 'count' characters starting from 'index' into 'buffer'
&gt;&gt; would be better.  Presumably this can be done without GCing.
&gt;
&gt;
&gt;(BTW, The semantics of 'index' and 'count' need to be clearified,
&gt;w.r.t. the what-is-a-character issue.)

I emphatically agree. I'd suggest breaking it into two functions:

int SCHEME_SUBSTRING_BYTE_COUNT(scheme_value, index, count)

would take a scheme string as scheme_value and two integers index and count.
It would start at index in the string (as scheme counted characters) and
tell you how many bytes you needed to hold the next &lt;count&gt; characters (again,
as scheme counts characters).

int SCHEME_EXTRACT_STRING_CONTENTS(scheme_value, index, count, buffer, bufsize)

would do the rest of the job, specifying that scheme_value must be a
scheme_string, index is the index as scheme counts characters, count
is in characters as scheme counts characters, bufsize is a maximum
number of bytes to copy into the buffer, and the function returns the
actual number of bytes copied into buffer.  This should give you some
grace with Multibyte character sets, although you'll probably still
want to apply some transformations on the C side to compensate for
different *kinds* of multibyte character sets.

				Bear

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00149" href="msg00149.html">I don't believe in &quot;(may GC)&quot;</a></strong>
<ul><li><em>From:</em> Tom Lord</li></ul></li>
<li><strong><a name="00154" href="msg00154.html">Re: I don't believe in &quot;(may GC)&quot;</a></strong>
<ul><li><em>From:</em> Richard Kelsey</li></ul></li>
<li><strong><a name="00157" href="msg00157.html">Re: I don't believe in &quot;(may GC)&quot;</a></strong>
<ul><li><em>From:</em> Shiro Kawai</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00162.html">Re: I don't believe in &quot;(may GC)&quot;</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00164.html">Re: no constants please</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00157.html">Re: I don't believe in &quot;(may GC)&quot;</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00159.html">Re: I don't believe in &quot;(may GC)&quot;</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00163"><strong>Date</strong></a></li>
<li><a href="threads.html#00163"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>

<!-- MHonArc v2.6.15 -->
<!--X-Subject: Re: non&#45;local exits are icky -->
<!--X-From-R13: Fbz Zbeq <ybeqNrzs.arg> -->
<!--X-Date: Fri, 26 Dec 2003 19:14:27 +0100 (NFT) -->
<!--X-Message-Id: 200312261838.KAA27859@morrowfield.regexps.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 200312232331.PAA19112@morrowfield.regexps.com -->
<!--X-Reference: y9l3cb7a8n0.fsf@informatik.uni&#45;tuebingen.de -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: non-local exits are icky</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00077.html">Date Prev</a>][<a href="msg00079.html">Date Next</a>][<a href="msg00073.html">Thread Prev</a>][<a href="msg00079.html">Thread Next</a>][<a href="maillist.html#00078">Date Index</a>][<a href="threads.html#00078">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: non-local exits are icky</h1>
<p style="max-width: 30em;">This page is part of the web mail archives of <a href="http://srfi.schemers.org/srfi-50">SRFI 50</a> from before July 7th, 2015.  The new archives for SRFI 50 are <a href="http://srfi-email.schemers.org/srfi-50/">here</a>.  Eventually, the entire history will be moved there, including any new messages.</p>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: <a href="mailto:sperber@DOMAIN.HIDDEN">sperber@xxxxxxxxxxxxxxxxxxxxxxxxxxx</a></li>
<li><em>Subject</em>: Re: non-local exits are icky</li>
<li><em>From</em>: Tom Lord &lt;<a href="mailto:lord@DOMAIN.HIDDEN">lord@xxxxxxx</a>&gt;</li>
<li><em>Date</em>: Fri, 26 Dec 2003 10:38:46 -0800 (PST)</li>
<li><em>Cc</em>: <a href="mailto:srfi-50@DOMAIN.HIDDEN">srfi-50@xxxxxxxxxxxxxxxxx</a></li>
<li><em>Delivered-to</em>: <a href="mailto:srfi-50@DOMAIN.HIDDEN">srfi-50@xxxxxxxxxxxxxxxxx</a></li>
<li><em>In-reply-to</em>: &lt;<a href="mailto:y9l3cb7a8n0.fsf@DOMAIN.HIDDEN">y9l3cb7a8n0.fsf@xxxxxxxxxxxxxxxxxxxxxxxxxxx</a>&gt; (message from	Michael Sperber on Fri, 26 Dec 2003 16:41:55 +0100)</li>
<li><em>References</em>: &lt;<a href="mailto:200312232331.PAA19112@DOMAIN.HIDDEN">200312232331.PAA19112@xxxxxxxxxxxxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:y9l3cb7a8n0.fsf@DOMAIN.HIDDEN">y9l3cb7a8n0.fsf@xxxxxxxxxxxxxxxxxxxxxxxxxxx</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>
    &gt; From: Michael Sperber &lt;sperber@xxxxxxxxxxxxxxxxxxxxxxxxxxx&gt;

    &gt; Tom&gt; With non-local exits, you'll also need a mechanism for unwind
    &gt; Tom&gt; protection within C code.

    &gt; Sure, but that's an implementation issue.

No, it's not.   

The SRFI is slightly unclear but I understand the section &quot;Signalling
errors from external code&quot; to mean that a call to something like
SCHEME_ARGUMENT_TYPE_ERROR does not return to its caller, but rather
directly to Scheme.

I gather also that SCHEME_CALL may result in a non-local exit past the
caller.

Since the mechanism of these non-local exits is not specified and can
not be modified by C code, the FFI contains no provision for them to
perform unwind protection --- that's a serious omission.

Let's suppose that a single library, libA, using the FFI takes its own
steps -- it avoids SCHEME_CALL except where no unwind protection is
needed; it creates its own internal mechanism wrapping
SCHEME_ARGUMENT_TYPE_ERROR with an unwind protection mechanism.

And suppose that libB does the same, but differently.

Now I can not mix libA and libB in the same program.   That's why it's
an interface rather than an implementation issue.

(However, in my view, this issues is moot.  The best way to solve this
problem is to not create it in the first place.  Please see an
upcoming post about &quot;flow of control&quot;.)

-t


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00079" href="msg00079.html">Re: non-local exits are icky</a></strong>
<ul><li><em>From:</em> Michael Sperber</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00041" href="msg00041.html">non-local exits are icky</a></strong>
<ul><li><em>From:</em> Tom Lord</li></ul></li>
<li><strong><a name="00073" href="msg00073.html">Re: non-local exits are icky</a></strong>
<ul><li><em>From:</em> Michael Sperber</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00077.html">Re: GC safety and return values</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00079.html">Re: non-local exits are icky</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00073.html">Re: non-local exits are icky</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00079.html">Re: non-local exits are icky</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00078"><strong>Date</strong></a></li>
<li><a href="threads.html#00078"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>

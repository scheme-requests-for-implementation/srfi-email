<!-- MHonArc v2.6.15 -->
<!--X-Subject: Re: is that useful? -->
<!--X-From-R13: "Inygre Q. Bryvffreb" <jnygreNcryvffreb.bet> -->
<!--X-Date: Tue, 26 Feb 2002 15:40:56 +0100 (NFT) -->
<!--X-Message-Id: 15483.40561.137984.6892@hyde.lpds.sublink.org -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: OFE43540E4.FDC02418&#45;ONC1256B68.004C9E32@diamond.philips.com -->
<!--X-Reference: 15482.10162.619846.941921@hyde.lpds.sublink.org -->
<!--X-Reference: y9l7kp1vdg7.fsf@informatik.uni&#45;tuebingen.de -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: is that useful?</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00050.html">Date Prev</a>][<a href="msg00052.html">Date Next</a>][<a href="msg00046.html">Thread Prev</a>][<a href="msg00052.html">Thread Next</a>][<a href="maillist.html#00051">Date Index</a>][<a href="threads.html#00051">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: is that useful?</h1>
<p style="max-width: 30em;">This page is part of the web mail archives of <a href="http://srfi.schemers.org/srfi-26">SRFI 26</a> from before July 7th, 2015.  The new archives for SRFI 26 are <a href="http://srfi-email.schemers.org/srfi-26/">here</a>.  Eventually, the entire history will be moved there, including any new messages.</p>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: <a href="mailto:sperber@DOMAIN.HIDDEN">sperber@xxxxxxxxxxxxxxxxxxxxxxxxxxx</a> (Michael Sperber [Mr.  Preprocessor])</li>
<li><em>Subject</em>: Re: is that useful?</li>
<li><em>From</em>: &quot;Walter C. Pelissero&quot; &lt;<a href="mailto:walter@DOMAIN.HIDDEN">walter@xxxxxxxxxxxxx</a>&gt;</li>
<li><em>Date</em>: Tue, 26 Feb 2002 14:40:49 +0000</li>
<li><em>Cc</em>: <a href="mailto:srfi-26@DOMAIN.HIDDEN">srfi-26@xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</a></li>
<li><em>Delivered-to</em>: <a href="mailto:srfi-26@DOMAIN.HIDDEN">srfi-26@xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</a></li>
<li><em>In-reply-to</em>: &lt;<a href="mailto:y9l7kp1vdg7.fsf@DOMAIN.HIDDEN">y9l7kp1vdg7.fsf@xxxxxxxxxxxxxxxxxxxxxxxxxxx</a>&gt;</li>
<li><em>References</em>: &lt;<a href="mailto:OFE43540E4.FDC02418-ONC1256B68.004C9E32@DOMAIN.HIDDEN">OFE43540E4.FDC02418-ONC1256B68.004C9E32@xxxxxxxxxxxxxxxxxxx</a>&gt;	&lt;<a href="mailto:15482.10162.619846.941921@DOMAIN.HIDDEN">15482.10162.619846.941921@xxxxxxxxxxxxxxxxxxxxx</a>&gt;	&lt;<a href="mailto:y9l7kp1vdg7.fsf@DOMAIN.HIDDEN">y9l7kp1vdg7.fsf@xxxxxxxxxxxxxxxxxxxxxxxxxxx</a>&gt;</li>
<li><em>Reply-to</em>: <a href="mailto:walter@DOMAIN.HIDDEN">walter@xxxxxxxxxxxxx</a></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>Michael Sperber [Mr.  Preprocessor] writes:
 &gt; &gt;&gt;&gt;&gt;&gt; &quot;WP&quot; == Walter C Pelissero &lt;walter@xxxxxxxxxxxxx&gt; writes:
 &gt; 
 &gt; WP&gt; The sense of my previous message is: IMHO, SRFI-26 is not general
 &gt; WP&gt; enough and introduces a negligible improvement over standard
 &gt; WP&gt; Scheme.
 &gt; 
 &gt; I did a quick grep and subsequent analysis of all calls to MAP and
 &gt; FOR-EACH in the current development version of Lula, which is about
 &gt; 15000 lines of code.  There are more than 80 partial calls to MAP
 &gt; and FOR-EACH which take abstraction operands which are merely
 &gt; specialized calls to other procedures.  All of them fit the pattern
 &gt; of SRFI 26.  On every one of them, I wanted to use something like
 &gt; SRFI 26 while I was writing the code.  I conjecture there is still
 &gt; a number of other calls which would benefit from SRFI 26.
 &gt; 
 &gt; So this particular application would benefit from SRFI 26 roughly
 &gt; every 200 lines of code.  I don't think that's too bad.

Do your figures make the SRFI a less incomplete solution?

What your figures say is that your code might benefit from a short
form to express trivial lambda expression, a compact way to express
partial application, or however you want to call it.

I assume you have read
<a  rel="nofollow" href="http://srfi.schemers.org/srfi-26/mail-archive/msg00038.html">http://srfi.schemers.org/srfi-26/mail-archive/msg00038.html</a>

so you are already aware of the issues about this SRFI:
   - it addresses a trivial problem
   - it doesn't provide a complete solution

Why is the problem trivial?  The above mentioned message shows you how
easy is to write a general solution and a special solution (one
argument) that fix a superset of this SRFI cases.  Others may be
possible with comparable effort.

Why doesn't it provide a complete solution?  The same message explains
why and how the SRFI is incomplete: it lacks parameter skipping,
duplicating and swapping.  The message also provides some
(almost-)real-life examples.

Why an incomplete solution is bad?  Simply because as much as you
needed (not very much) a solution for the cases this SRFI addresses
you will, sooner or later feel the need for a solution for the
remaining cases.

Why that?  Because the remaining cases are not less likely and they
are not on a different complexity level, they are indeed as trivial as
the ones this SRFI addresses.

What do you do when you hit the limits of this SRFI?  Either you write
a special solution for the remaining cases and call it curry2, or
you write a solution for a superset and call it L.  I belive both
situations are bad.

Curry2 is bad because you will have two macros for obviously similar
cases.  L is bad because it will replace curry (this SRFI) in the long
run: why bother with a lesser macro if you are more confortable with
another one?

Common Lisp has some examples of redundancy of this sort.


Regarding the residual arguments issue, if you like, fn can be fixed
in no time and turn it into:

    (define-syntax fn
      (lambda (form rename compare)
	(letrec ((arg-number
		  (lambda (x)
		    (if (symbol? x)
			(let ((s (symbol-&gt;string x)))
			  (if (char=? #\$ (string-ref s 0))
			      (or (string-&gt;number (substring s 1 (string-length s)))
				  0)
			      0))
			0)))
		 (number-of-arguments
		  (lambda (l)
		    (let loop ((l l))
		      (if (null? l)
			  0
			  (let ((x (car l)))
			    (max (if (pair? x)
				     (loop x)
				     (arg-number x))
				 (loop (cdr l))))))))
		 (make-argument-list
		  (lambda (n)
		    (do ((n n (- n 1))
			 (l '() (cons (string-&gt;symbol (string-append &quot;$&quot; (number-&gt;string n))) l)))
			((zero? n) l)))))
	  (if (integer? (cadr form))
	      (list 'lambda (make-argument-list (cadr form))
		    (cddr form))
	  (list 'lambda (make-argument-list (number-of-arguments form))
		(cdr form))))))

So that you can write:

    ((fn + $1 $3) 1 2 3)
and
    ((fn 9 + $1 $3) 1 2 3 4 5 6 7 8 9)

The optional arity is at least as compact as the &quot;slot notation&quot;.

Dealing with the, IMHO, not so interesting case:

    ((fn -5 apply $1 $3 $5) 1 2 3 4 5 6 7 8 9)

to expand to

    ((lambda ($1 $2 $3 $4 . $5)
       (apply + $1 $3 $5)) 1 2 3 4 5 6 7 8 9)

is left as an exercise.

-- 
walter pelissero
<a  rel="nofollow" href="http://www.pelissero.org">http://www.pelissero.org</a>

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00052" href="msg00052.html">Re: is that useful?</a></strong>
<ul><li><em>From:</em> Michael Sperber [Mr.  Preprocessor]</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00039" href="msg00039.html">Re: is that useful?</a></strong>
<ul><li><em>From:</em> sebastian . egner</li></ul></li>
<li><strong><a name="00045" href="msg00045.html">Re: is that useful?</a></strong>
<ul><li><em>From:</em> Walter C. Pelissero</li></ul></li>
<li><strong><a name="00046" href="msg00046.html">Re: is that useful?</a></strong>
<ul><li><em>From:</em> Michael Sperber [Mr.  Preprocessor]</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00050.html">Re: l, the ultimate curry that is not curry</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00052.html">Re: is that useful?</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00046.html">Re: is that useful?</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00052.html">Re: is that useful?</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00051"><strong>Date</strong></a></li>
<li><a href="threads.html#00051"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>

<!-- MHonArc v2.6.15 -->
<!--X-Subject: Re: Major issues -->
<!--X-From-R13: "Penqq I. Embalr" <oenqq+fesvNfmbalr.pbz> -->
<!--X-Date: Thu, 23 Oct 2003 05:35:49 +0200 (DFT) -->
<!--X-Message-Id: 20031023033542.GB6989@loki.vpn.szonye.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 20031016200629.GE2858@ogre.szonye.com -->
<!--X-Reference: 20031020182528.GA26827@freenetproject.org -->
<!--X-Reference: 20031020191331.GB4433@ogre.szonye.com -->
<!--X-Reference: 20031020203620.GB28213@freenetproject.org -->
<!--X-Reference: 20031021004429.GE4433@ogre.szonye.com -->
<!--X-Reference: 20031021011250.GA26398@loki.vpn.szonye.com -->
<!--X-Reference: 20031021072047.GB26398@loki.vpn.szonye.com -->
<!--X-Reference: 20031023010959.GA20350@freenetproject.org -->
<!--X-Reference: 20031023020257.GA6989@loki.vpn.szonye.com -->
<!--X-Reference: 20031023024351.GA21257@freenetproject.org -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: Major issues</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00117.html">Date Prev</a>][<a href="msg00119.html">Date Next</a>][<a href="msg00117.html">Thread Prev</a>][<a href="msg00119.html">Thread Next</a>][<a href="maillist.html#00118">Date Index</a>][<a href="threads.html#00118">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: Major issues</h1>
<p style="max-width: 30em;">This page is part of the web mail archives of <a href="http://srfi.schemers.org/srfi-44">SRFI 44</a> from before July 7th, 2015.  The <a href="http://srfi-email.schemers.org/srfi-44">new archives</a> for SRFI 44 contain all messages, not just those from before July 7th, 2015.</p>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: <a href="mailto:srfi-44@DOMAIN.HIDDEN">srfi-44@xxxxxxxxxxxxxxxxx</a></li>
<li><em>Subject</em>: Re: Major issues</li>
<li><em>From</em>: &quot;Bradd W. Szonye&quot; &lt;<a href="mailto:bradd%2Bsrfi@DOMAIN.HIDDEN">bradd+srfi@xxxxxxxxxx</a>&gt;</li>
<li><em>Date</em>: Wed, 22 Oct 2003 20:35:42 -0700</li>
<li><em>Cc</em>: <a href="mailto:scgmille@DOMAIN.HIDDEN">scgmille@xxxxxxxxxxxxxxxxx</a></li>
<li><em>Delivered-to</em>: <a href="mailto:srfi-44@DOMAIN.HIDDEN">srfi-44@xxxxxxxxxxxxxxxxx</a></li>
<li><em>In-reply-to</em>: &lt;<a href="mailto:20031023024351.GA21257@DOMAIN.HIDDEN">20031023024351.GA21257@xxxxxxxxxxxxxxxxxx</a>&gt;</li>
<li><em>Mail-followup-to</em>: <a href="mailto:srfi-44@DOMAIN.HIDDEN">srfi-44@xxxxxxxxxxxxxxxxx</a>,	<a href="mailto:scgmille@DOMAIN.HIDDEN">scgmille@xxxxxxxxxxxxxxxxx</a></li>
<li><em>References</em>: &lt;<a href="mailto:20031016200629.GE2858@DOMAIN.HIDDEN">20031016200629.GE2858@xxxxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:20031020182528.GA26827@DOMAIN.HIDDEN">20031020182528.GA26827@xxxxxxxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:20031020191331.GB4433@DOMAIN.HIDDEN">20031020191331.GB4433@xxxxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:20031020203620.GB28213@DOMAIN.HIDDEN">20031020203620.GB28213@xxxxxxxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:20031021004429.GE4433@DOMAIN.HIDDEN">20031021004429.GE4433@xxxxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:20031021011250.GA26398@DOMAIN.HIDDEN">20031021011250.GA26398@xxxxxxxxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:20031021072047.GB26398@DOMAIN.HIDDEN">20031021072047.GB26398@xxxxxxxxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:20031023010959.GA20350@DOMAIN.HIDDEN">20031023010959.GA20350@xxxxxxxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:20031023020257.GA6989@DOMAIN.HIDDEN">20031023020257.GA6989@xxxxxxxxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:20031023024351.GA21257@DOMAIN.HIDDEN">20031023024351.GA21257@xxxxxxxxxxxxxxxxxx</a>&gt;</li>
<li><em>User-agent</em>: Mutt/1.4i</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>scgmille@xxxxxxxxxxxxxxxxxx wrote:
&gt; I'm not opposed to merging ! and !! in favor of the programmer
&gt; checking purely-mutable-collection? except on the grounds that it
&gt; increases the opportunity for error.

Yes, that is a reasonable concern. Regardless of your final decision, I
recommend that you either rename *-set! or make it a special case. It
cannot remain the way it is, however, because it's unimplementable in
some Schemes. For example, it would be impossible to use SRFI-44's
vector-set! in a PLT Scheme module.

&gt;&gt; One of the reasons I don't like pure-mutable as implemented is that
&gt;&gt; you've provided pure-mutable versions of the mutators but not the
&gt;&gt; accessors.

&gt; Nothing prohibits them in a future SRFI.  But its quite unusual for 
&gt; datastructures to require modification on access ....

I agree, which is why I haven't mentioned it so far.

&gt; Dictionaries have conceptual issues precisely because they are a
&gt; mapping where all other collection styles in the SRFI are just
&gt; collections.

Agreed. I keep waffling between two different concepts for the
dictionary: is it a collection of mappings, or is it a bag with an
index?

Some possible solutions:
1. Pick one or the other and run with it.
2. Implement both: &quot;indexed-bag&quot; and &quot;mapping.&quot;
3. Remove the dictionary and implement it in a later SRFI.

I'm fine with any of those. If you choose only one interface, I would
prefer the &quot;collection of mappings.&quot;

&gt; This, more than any type hierarchy issue, is the reason for dictionary
&gt; weirdness. Can you elaborate on the issues that exist outside of
&gt; dictionaries?

I think the other collections are OK. It's the &quot;more than one kind of
value&quot; aspect of dictionaries that causes the problem. Even that isn't
too bad if you treat them as collections of mappings. In that model, you
can almost always use the bag or sequence interface. I'm still trying to
work it out.

Regarding *-set! as a linear-update function:

&gt;&gt; And just to add insult to injury, he must change his code from impure
&gt;&gt; to pure-functional style, since SRFI-44 does not define vector-set!!.

&gt; Not pure-functional at all, but linear-updating.

There's no difference from the programmer's point of view! Remember,
linear update procedures have the same restrictions as pure-functional
procedures (plus a few more). You must assume that side-effects occur
but you cannot rely on it.

I'm a bit surprised that vector wasn't defined as pure-mutable.

&gt;&gt; These silent changes and similar identifiers will [increase the
&gt;&gt; likelihood of errors and] cause problems in code reviews.

&gt; This is more an issue for programmers than the specification of the
&gt; SRFI.

I can't disagree more strongly. If the specification makes errors likely
and reviews difficult, that's a problem with the spec, not the
programmers. This is such an important issue that language standards
committees include it in their charters! (See C++.)

I didn't analyze the procedures closely the first time around -- I found
a few issues before I ever got that far -- but when I did I noticed
several inconsistencies and error-prone naming conventions. Examples:

    vector-set! incompatible with R5RS
    mutable vs immutable (seem like opposites, but they're not)
    string= vs string=? (names too similar, different semantics)
    *-all vs *-any (names similar and counterintuitive)


&gt; I can't speak for everyone here, but I don't think the flaws are as 
&gt; grand as you think.

Perhaps not. But I do see a few major issues:

1. Quiet incompatibility with R5RS.
2. Error-prone naming conventions.
3. Problems with the dictionary interface.

If you can resolve all of them and finalize the SRFI, that's great.

&gt; The SRFI is quite usable in its current form, programmer confusion
&gt; notwithstanding.

&quot;Quite usable&quot; and &quot;programmer confusion notwithstanding&quot; don't belong
in the same sentence. Seriously.

&gt; The few exceptions are fixable, and I intend to fix them.
&gt; I welcome your input.

Great!
-- 
Bradd W. Szonye
<a  rel="nofollow" href="http://www.szonye.com/bradd">http://www.szonye.com/bradd</a>

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00119" href="msg00119.html">Dictionaries</a></strong>
<ul><li><em>From:</em> Bradd W. Szonye</li></ul></li>
<li><strong><a name="00122" href="msg00122.html">Re: Major issues</a></strong>
<ul><li><em>From:</em> scgmille</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00092" href="msg00092.html">s/-LEFT//g?</a></strong>
<ul><li><em>From:</em> Bradd W. Szonye</li></ul></li>
<li><strong><a name="00093" href="msg00093.html">Re: s/-LEFT//g?</a></strong>
<ul><li><em>From:</em> scgmille</li></ul></li>
<li><strong><a name="00095" href="msg00095.html">Re: s/-LEFT//g?</a></strong>
<ul><li><em>From:</em> Bradd W. Szonye</li></ul></li>
<li><strong><a name="00102" href="msg00102.html">Re: s/-LEFT//g?</a></strong>
<ul><li><em>From:</em> scgmille</li></ul></li>
<li><strong><a name="00103" href="msg00103.html">Re: s/-LEFT//g?</a></strong>
<ul><li><em>From:</em> Bradd W. Szonye</li></ul></li>
<li><strong><a name="00104" href="msg00104.html">Procedures (interfaces)</a></strong>
<ul><li><em>From:</em> Bradd W. Szonye</li></ul></li>
<li><strong><a name="00105" href="msg00105.html">Re: Procedures (interfaces)</a></strong>
<ul><li><em>From:</em> Bradd W. Szonye</li></ul></li>
<li><strong><a name="00115" href="msg00115.html">Re: Procedures (interfaces)</a></strong>
<ul><li><em>From:</em> scgmille</li></ul></li>
<li><strong><a name="00116" href="msg00116.html">Major issues</a></strong>
<ul><li><em>From:</em> Bradd W. Szonye</li></ul></li>
<li><strong><a name="00117" href="msg00117.html">Re: Major issues</a></strong>
<ul><li><em>From:</em> scgmille</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00117.html">Re: Major issues</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00119.html">Dictionaries</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00117.html">Re: Major issues</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00119.html">Dictionaries</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00118"><strong>Date</strong></a></li>
<li><a href="threads.html#00118"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>

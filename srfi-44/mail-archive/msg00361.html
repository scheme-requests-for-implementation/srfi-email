<!-- MHonArc v2.6.15 -->
<!--X-Subject: Re: Fundamental design flaws -->
<!--X-From-R13: fptzvyyrNserrargcebwrpg.bet -->
<!--X-Date: Thu, 30 Oct 2003 22:02:36 +0100 (NFT) -->
<!--X-Message-Id: 20031030210222.GA3342@freenetproject.org -->
<!--X-Content-Type: multipart/signed -->
<!--X-Reference: DCE9B6E9&#45;0A7B&#45;11D8&#45;8E6E&#45;000A95CCCEE4@evdev.ath.cx -->
<!--X-Reference: 200310301645.IAA01323@morrowfield.regexps.com -->
<!--X-Reference: 20031030170642.GB30088@freenetproject.org -->
<!--X-Reference: 200310302102.NAA02286@morrowfield.regexps.com -->
<!--X-Derived: pgpRbQQu3T83T.pgp -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: Fundamental design flaws</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00360.html">Date Prev</a>][<a href="msg00362.html">Date Next</a>][<a href="msg00359.html">Thread Prev</a>][<a href="msg00368.html">Thread Next</a>][<a href="maillist.html#00361">Date Index</a>][<a href="threads.html#00361">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: Fundamental design flaws</h1>
<p style="max-width: 30em;">This page is part of the web mail archives of <a href="http://srfi.schemers.org/srfi-44">SRFI 44</a> from before July 7th, 2015.  The new archives for SRFI 44 are <a href="http://srfi-email.schemers.org/srfi-44/">here</a>.  The new archives contain all messages, not just those from before July 7th, 2015.</p>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: Tom Lord &lt;<a href="mailto:lord@DOMAIN.HIDDEN">lord@xxxxxxx</a>&gt;</li>
<li><em>Subject</em>: Re: Fundamental design flaws</li>
<li><em>From</em>: <a href="mailto:scgmille@DOMAIN.HIDDEN">scgmille@xxxxxxxxxxxxxxxxxx</a></li>
<li><em>Date</em>: Thu, 30 Oct 2003 15:02:22 -0600</li>
<li><em>Cc</em>: <a href="mailto:campbell@DOMAIN.HIDDEN">campbell@xxxxxxxxxxxx</a>, <a href="mailto:srfi-44@DOMAIN.HIDDEN">srfi-44@xxxxxxxxxxxxxxxxx</a></li>
<li><em>Delivered-to</em>: <a href="mailto:srfi-44@DOMAIN.HIDDEN">srfi-44@xxxxxxxxxxxxxxxxx</a></li>
<li><em>In-reply-to</em>: &lt;<a href="mailto:200310302102.NAA02286@DOMAIN.HIDDEN">200310302102.NAA02286@xxxxxxxxxxxxxxxxxxxxxxx</a>&gt;</li>
<li><em>Mail-followup-to</em>: <a href="mailto:scgmille@DOMAIN.HIDDEN">scgmille@xxxxxxxxxxxxxxxxx</a>,	Tom Lord &lt;<a href="mailto:lord@DOMAIN.HIDDEN">lord@xxxxxxx</a>&gt;, <a href="mailto:campbell@DOMAIN.HIDDEN">campbell@xxxxxxxxxxxx</a>,	<a href="mailto:srfi-44@DOMAIN.HIDDEN">srfi-44@xxxxxxxxxxxxxxxxx</a></li>
<li><em>References</em>: &lt;<a href="mailto:DCE9B6E9-0A7B-11D8-8E6E-000A95CCCEE4@DOMAIN.HIDDEN">DCE9B6E9-0A7B-11D8-8E6E-000A95CCCEE4@xxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:200310301645.IAA01323@DOMAIN.HIDDEN">200310301645.IAA01323@xxxxxxxxxxxxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:20031030170642.GB30088@DOMAIN.HIDDEN">20031030170642.GB30088@xxxxxxxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:200310302102.NAA02286@DOMAIN.HIDDEN">200310302102.NAA02286@xxxxxxxxxxxxxxxxxxxxxxx</a>&gt;</li>
<li><em>User-agent</em>: Mutt/1.5.4i</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>On Thu, Oct 30, 2003 at 01:02:10PM -0800, Tom Lord wrote:
&gt; 
&gt; 
&gt; 
&gt;     &gt; From: scgmille@xxxxxxxxxxxxxxxxxx
&gt; 
&gt;     &gt;&gt; 1) [call/cc cursors capture protect their continuation]
&gt; 
&gt;     &gt; This is nothing compared to the kind of leaks that are possible with
&gt;     &gt; cursors alone.  Thats one of the major arguments for enumeration after
&gt;     &gt; all.
&gt; 
&gt; I have no idea what you're talking about.

Go read the paper about Enumeration vs Cursors that oleg cited please.  

&gt;     &gt; Try this code in a Scheme system:
&gt; 
&gt;     &gt; (define x #f)
&gt;     &gt; (begin (call/cc (lambda (k) (set! x k))) (display &quot;hi&quot;))
&gt;     &gt; (current-output-port (open-output-file &quot;/tmp/foo&quot;))
&gt;     &gt; (x)
&gt; 
&gt; What do you think I'm mistaken about?  I was thinking about typical
&gt; implementations of WITH-{INPUT,OUTPUT}-FILE which handle escape
&gt; continuations as you'd expect (which, admittedly, is not required by
&gt; R5RS).  In general, any feature of a program that uses dynamic scope
&gt; is going to interact awkwardly, at best, with call/cc-cursors.

Only if the conversion operator happens outside the scope of a function 
which is managing such things.  I don't think this alone is persuasive 
though. 

&gt; 
&gt; 
&gt;     &gt; &gt;     &gt; &gt;           (error &quot;there is no such thing as a set&quot;))
&gt; 
&gt;     &gt; Hardly.  A function like the one taylor wrote is explicitly illegal=20
&gt;     &gt; based on the definition of union, assuming a real set is being passed.
&gt; 
&gt; But since 44 gives no way to create a real set, a conforming
&gt; implementation can use implementations that just call error.

Just because SRFI-44 doesn't specify a set, and doesn't specify 
extensibility doesn't mean that a set cannot be created.  And if it is 
created, the above behavior is patently illegal.

&gt;     &gt; The problem here is that the generic inter-collection operators
&gt;     &gt; (add-all, etc) are too useful.  
&gt; 
&gt; There are plenty of ways to do operations like that that don't rely on 
&gt; a collection type -- and some of those ways are better.
&gt; 
&gt; If I want to ADD-ALL from some list, I want different things depending
&gt; on whether I'm using the list as a sequence or a dictionary.   Do you
&gt; think it's impossible to provide interfaces that let me make that 
&gt; distinction?

Yes, but they all imply program knowledge at the call point.  Agnostic 
collection usage doesn't.  This is how modular, datastructure 
independent code is written in the real world.

&gt; 
&gt; That's a red herring.
&gt; 
&gt; Lists and associatve lists are an example of non-disjoint types both
&gt; of which have a clear interpretation both as a sequence and a
&gt; dictionary but I don't think they are the only one.

&gt; It is an inessential property of a sequence that it also be
&gt; not-a-dictionary.   Introducing collection procedure which require
&gt; sequences to be disjoint from dictionaries treats that inessential
&gt; distinction as an essential one:  it makes the interfaces in 44 less
&gt; suitable for future extension.

I disagree.  It creates quite a semantic mess if collections are allowed 
to take on different forms in different contexts.  Its trivial to have a 
*representation* that can take on both forms though.  

(define x (make-list))
(generic-operator x) ; treat it as a sequence
(generic-operator (list-&gt;dictionary x)) 

Only in very rare cases can you hope to have even a low level 
datastructure that takes on multiple forms.  Lists do this, but in most 
cases datastructures that can behave in more than one way do require 
some fixup first. So its actually quite preferred to require a cast 
operator of some sort.  

Even better, if you use a cast, its trivially implemented if we're also 
using adapters to allow Scheme datatypes to behave as collections.  Its 
much harder otherwise.

	Scott
</pre><p><strong>Attachment:
<a href="pgpRbQQu3T83T.pgp" ><tt>pgpRbQQu3T83T.pgp</tt></a></strong><br>
<em>Description:</em> PGP signature</p>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00368" href="msg00368.html">Re: Fundamental design flaws</a></strong>
<ul><li><em>From:</em> Bradd W. Szonye</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00296" href="msg00296.html">Re: Fundamental design flaws</a></strong>
<ul><li><em>From:</em> Taylor Campbell</li></ul></li>
<li><strong><a name="00333" href="msg00333.html">Re: Fundamental design flaws</a></strong>
<ul><li><em>From:</em> Tom Lord</li></ul></li>
<li><strong><a name="00339" href="msg00339.html">Re: Fundamental design flaws</a></strong>
<ul><li><em>From:</em> scgmille</li></ul></li>
<li><strong><a name="00359" href="msg00359.html">Re: Fundamental design flaws</a></strong>
<ul><li><em>From:</em> Tom Lord</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00360.html">Re: A possible solution?</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00362.html">Re: A possible solution?</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00359.html">Re: Fundamental design flaws</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00368.html">Re: Fundamental design flaws</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00361"><strong>Date</strong></a></li>
<li><a href="threads.html#00361"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>

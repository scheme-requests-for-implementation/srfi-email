<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: Sockets Layer Counter Proposal -->
<!--X-From-R13: "Oneba I. Vfh" <nepsvqrNfnpevqrb.hf> -->
<!--X-Date: Tue,  9 Oct 2012 05:59:15 +0000 (UTC) -->
<!--X-Message-Id: op.wlwdkygv0p3ku8@localhost -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: op.wlr50aws0p3ku8@localhost -->
<!--X-Reference: 507133DC.20206@ymail.com -->
<!--X-Reference: op.wltpognr0p3ku8@localhost -->
<!--X-Reference: CALnw4LJ93R2zwZ3WJxrcrAsF2DsbxrG6H90tBcmERXs_2TKKpA@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: Sockets Layer Counter Proposal</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00006.html">Date Prev</a>][<a href="msg00008.html">Date Next</a>][<a href="msg00005.html">Thread Prev</a>][<a href="msg00008.html">Thread Next</a>][<a href="maillist.html#00007">Date Index</a>][<a href="threads.html#00007">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: Sockets Layer Counter Proposal</h1>
<p style="max-width: 30em;">This page is part of the web mail archives of <a href="http://srfi.schemers.org/srfi-106">SRFI 106</a> from before July 7th, 2015.  The <a href="http://srfi-email.schemers.org/srfi-106">new archives</a> for SRFI 106 contain all messages, not just those from before July 7th, 2015.</p>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><em>To</em>: &quot;Arthur A. Gleckler&quot; &lt;<a href="mailto:srfi@DOMAIN.HIDDEN">srfi@xxxxxxxxxxxxxx</a>&gt;, &quot;Takashi Kato&quot; &lt;<a href="mailto:ktakashi@DOMAIN.HIDDEN">ktakashi@xxxxxxxxx</a>&gt;</li>
<li><em>Subject</em>: Re: Sockets Layer Counter Proposal</li>
<li><em>From</em>: &quot;Aaron W. Hsu&quot; &lt;<a href="mailto:arcfide@DOMAIN.HIDDEN">arcfide@xxxxxxxxxxx</a>&gt;</li>
<li><em>Date</em>: Tue, 09 Oct 2012 01:59:12 -0400</li>
<li><em>Cc</em>: &quot;<a href="mailto:srfi-106@DOMAIN.HIDDEN">srfi-106@xxxxxxxxxxxxxxxxx</a>&quot; &lt;<a href="mailto:srfi-106@DOMAIN.HIDDEN">srfi-106@xxxxxxxxxxxxxxxxx</a>&gt;</li>
<li><em>Delivered-to</em>: <a href="mailto:srfi-106@DOMAIN.HIDDEN">srfi-106@xxxxxxxxxxxxxxxxx</a></li>
<li><em>Dkim-signature</em>: v=1; a=rsa-sha1; c=relaxed/relaxed; d=sacrideo.us; h=	content-type:to:subject:references:date:cc:mime-version	:content-transfer-encoding:from:message-id:in-reply-to; s=	mesmtp; bh=GJdJ1AeS7gnW1GGbY7P4Stdrt84=; b=Zrtu2gSfb7Gtqc80GlDJr	BDD9GJkn7aM8aeFJYfumJLipOoKt0xgLhH6LQTc7tcYAk1KHogoIsieJm3T3Pjee	Efo4y2NYnfYAUz0XyZ7vt89Ddwukl+GfJmLFNq/z8Wkd4UpPAdCNrdFdozhV+6u+	0YLIpz5HYjfKVc+besZCz8=</li>
<li><em>Dkim-signature</em>: v=1; a=rsa-sha1; c=relaxed/relaxed; d=	messagingengine.com; h=content-type:to:subject:references:date	:cc:mime-version:content-transfer-encoding:from:message-id	:in-reply-to; s=smtpout; bh=GJdJ1AeS7gnW1GGbY7P4Stdrt84=; b=jsPu	aLlZqqDo1ETCMqRWRT1+UBy4QQY9u4anoZckf5B838N2vf36G86c8RI9bqXcsqUt	o+GLbJjKgKzwQKdKcsdbMPpjLdccelaWFokk6nQ+384hEt0ezX4dCCNpXQq6r5hQ	69Wsw/6/Xo2PyAgvMdMMkPQqAiM4nzFZa2RNpPM=</li>
<li><em>In-reply-to</em>: &lt;<a href="mailto:CALnw4LJ93R2zwZ3WJxrcrAsF2DsbxrG6H90tBcmERXs_2TKKpA@DOMAIN.HIDDEN">CALnw4LJ93R2zwZ3WJxrcrAsF2DsbxrG6H90tBcmERXs_2TKKpA@xxxxxxxxxxxxxx</a>&gt;</li>
<li><em>Organization</em>: Indiana University</li>
<li><em>References</em>: &lt;<a href="mailto:op.wlr50aws0p3ku8@DOMAIN.HIDDEN"><a href="msg00001.html">op.wlr50aws0p3ku8@localhost</a></a>&gt; &lt;<a href="mailto:507133DC.20206@DOMAIN.HIDDEN">507133DC.20206@xxxxxxxxx</a>&gt; &lt;<a href="mailto:op.wltpognr0p3ku8@DOMAIN.HIDDEN"><a href="msg00004.html">op.wltpognr0p3ku8@localhost</a></a>&gt; &lt;<a href="mailto:CALnw4LJ93R2zwZ3WJxrcrAsF2DsbxrG6H90tBcmERXs_2TKKpA@DOMAIN.HIDDEN">CALnw4LJ93R2zwZ3WJxrcrAsF2DsbxrG6H90tBcmERXs_2TKKpA@xxxxxxxxxxxxxx</a>&gt;</li>
<li><em>User-agent</em>: Opera Mail/12.10 (Linux)</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<tt>On Sun, 07 Oct 2012 16:22:38 -0400, Arthur A. Gleckler  
</tt><tt>&lt;srfi@xxxxxxxxxxxxxx&gt; wrote:
</tt><pre style="margin: 0em;">

</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><tt>On Sun, Oct 7, 2012 at 12:27 PM, Aaron W. Hsu &lt;arcfide@xxxxxxxxxxx&gt;  
</tt><tt>wrote:
</tt><pre style="margin: 0em;">

</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><tt>I suggest that they be merged simply because I don't think the  
</tt><tt>differences
</tt><pre style="margin: 0em;">
are very great, and I think having two SRFIs for this would only make
things more confusing.
</pre></blockquote><pre style="margin: 0em;">

Would you mind summarizing the differences?
</pre></blockquote><pre style="margin: 0em;">

</pre><tt>Sure, I can try. I'll try to follow the general pattern of the SRFI  
</tt><tt>document. I will begin with the relative equivalencies between the  
</tt><tt>interfaces.
</tt><pre style="margin: 0em;">

= Constructors and Predicates =

SRFI 106 Defines:

make-client-socket
make-server-socket
socket?

My sockets library defines:

create-socket
socket?

Differences:

</pre><tt>Most notably, the make-client-socket and make-server-socket and the  
</tt><tt>create-socket interfaces are different. The make-client-socket and  
</tt><tt>make-server-socket procedures are somewhat tied to assumptions about the  
</tt><tt>types of sockets that are being created, namely, INET sockets. The  
</tt><tt>interface seems to restrict the socket creation to only TCP or UDP  
</tt><tt>sockets, without any hope of scaling up to anything else without creating  
</tt><tt>a whole new interface.
</tt><pre style="margin: 0em;">

</pre><tt>The create-socket procedure only accepts the domain, type, and protocol,  
</tt><tt>which are optional flags in SRFI 106. It does not presume that the address  
</tt><tt>is an INET address, and does not assume a specific listening or binding  
</tt><tt>address for the server socket, which SRFI 106 does right now. Listening on  
</tt><tt>a socket and binding a socket for service is done explicitly via the  
</tt><tt>bind-socket and connect-socket procedures. Note that it is not necessary  
</tt><tt>to make an explicit connection on a socket, but SRFI 106 does not permit  
</tt><tt>one to have an unconnected socket.
</tt><pre style="margin: 0em;">

= Socket Operations =

SRFI 106 Defines:

socket-accept
socket-send
socket-recv
socket-shutdown
socket-close

My library defines:

bind-socket
connect-socket
listen-socket
accept-socket
close-socket
shutdown-socket
send-to-socket
receive-from-socket

Differences:

</pre><tt>bind-socket and connect-socket behavior are merged into the behavior of  
</tt><tt>socket creation in SRFI 106 right now. This functionality is separate in  
</tt><tt>my library. There is no listen-socket equivalent in SRFI 106. SRFI 106's  
</tt><tt>version of accept-socket returns only a socket, while my version returns a  
</tt><tt>socket and an address object. In my version of sendto, the user specifies  
</tt><tt>an address as well as the buffer of data to send.
</tt><pre style="margin: 0em;">

= Port Conversion =

</pre><tt>I provide a separate library for converting sockets to ports, as sockets  
</tt><tt>cannot always be conveniently or even safely converted to ports or back.
</tt><pre style="margin: 0em;">

= Control feature =

</pre><tt>I do not have a call-with-socket as the specification as given does not  
</tt><tt>seem to be useful. It
</tt><tt>does not do anything except call socket with proc, which can be done by  
</tt><tt>saying (proc socket).
</tt><pre style="margin: 0em;">

= Constants =

SRFI-106 Defines:

AF_UNSPEC
AF_INET
AF_INET6
SOCK_STREAM
SOCK_DGRAM
AI_PASSIVE
AI_CANONNAME
AI_NUMERICHOST
AI_V4MAPPED
AI_ALL
AI_ADDRCONFIG
SHUT_RD
SHUT_WR
SHUT_RDWR

My library defines:

address-info/canonical-name
address-info/numeric-host
address-info/passive
socket-domain/unix
socket-domain/local
socket-domain/stream
socket-domain/datagram
socket-type/sequence-packet
socket-type/raw
socket-type/random
socket-protocol/auto
shutdown-method/read
shutdown-method/write
shutdown-method/read&amp;write
send-to/dont-route
send-to/out-of-band
receive-from/out-of-band
receive-from/peek
receive-from/wait-all
receive-from/dont-wait

Differences:

</pre><tt>I am unsure about the definitions in SRFI 106, but my library expects  
</tt><tt>these constants to be
</tt><tt>defined as opaque objects exported from the library itself. These  
</tt><tt>constants are not expected
</tt><tt>to be inspected or broken apart in any way, and should/must for all  
</tt><tt>intents and purposes
</tt><pre style="margin: 0em;">
appear as a single atom.

= Additional elements without equivalents in SRFI 106 =

In addition to the above, I also provide the following.

== Accessors for Sockets ==

socket-fd
socket-domain
socket-type
socket-protocol

== Additional Datatype constructors, predicates, and accessors ==

socket-option?
make-socket-option
define-socket-option-type
make-tcp-option
make-udp-option
make-raw-option
make-ip-option
tcp-option?
udp-option?
raw-option?
ip-option?
socket-address?
unix-address?
make-unix-address
unix-address-path
internet-address?
make-internet-address
internet-address-ip
internet-address-port
make-address-info
address-info
address-info-domain
address-info-type
address-info-protocol
address-info-address
make-socket-domain
make-socket-type
make-socket-protocol
socket-protocol?
protocol-entry-name
protocol-entry-aliases
protocol-entry-value
shutdown-method?
make-shutdown-method
make-send-to-option
make-receive-from-option
make-socket-condition
socket-condition?
socket-condition-who
socket-condition-syscall
socket-condition-type
socket-condition-message

== Additional Procedures ==

get-address-info
internet-address-&gt;string
string-&gt;internet-address
string-&gt;ipv4
register-socket-domain!
next-protocol-entry
get-protocol-by-name
get-protocol-by-constant
open-protocol-database
close-protocol-database
socket-maximum-connections
get-socket-option
set-socket-option!
set-socket-nonblocking!
socket-nonblocking?
socket-error
socket-raise/unless

</pre><tt>Full documentation of these features is available in the indexed PDF on my  
</tt><tt>website. However, it does address a few things that are currently listed  
</tt><tt>as issues in the SRFI. Firstly, it take sthe view of creating schemely  
</tt><tt>names for the POSIX equivalents. Secondly, it makes less critical the  
</tt><tt>question about how many variables the SRFI need support. Socket options,  
</tt><tt>domains, types, protocols, and socket addresses are all given the portable  
</tt><tt>subset of their kinds (unix/local domains are an exception, but the  
</tt><tt>library provides for the reporting of unsupported features), but the user  
</tt><tt>can, at the user level, without requiring implementation support or  
</tt><tt>additional implementation work, utilize additional variables and features  
</tt><tt>by creating new socket options or the like which correspond to the system  
</tt><tt>equivalents that they care about. This allows for code that makes use of  
</tt><tt>implementation specific behavior to run on multiple scheme implementations  
</tt><tt>that support the library without requiring explicit support for those  
</tt><tt>extensions by the implementation: it is enough to implement the library  
</tt><tt>alone. The interface is designed to be lightweight, relatively simple, and  
</tt><tt>yet still scale to any number of extensions in an user extensible way.
</tt><pre style="margin: 0em;">

</pre><tt>Currently, most socket proposals do not do this. They provide only TCP and  
</tt><tt>UDP (sometimes Local), without ever making it possible to scale beyond  
</tt><tt>those things. My library provides ready TCP and UDP out of the box, but  
</tt><tt>makes possible extending it. Moreover, the interface supports a number of  
</tt><tt>patterns of usage that are not supported by the current SRFI proposal or  
</tt><tt>many other interfaces. This includes, for example, the ability to have an  
</tt><tt>unbound socket, or an unconnected socket.
</tt><pre style="margin: 0em;">

--
Aaron W. Hsu | arcfide@xxxxxxxxxxx | <a  rel="nofollow" href="http://www.sacrideo.us">http://www.sacrideo.us</a>
Programming is just another word for the Lost Art of Thinking.

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00008" href="msg00008.html">Re: Sockets Layer Counter Proposal</a></strong>
<ul><li><em>From:</em> Aaron W. Hsu</li></ul></li>
<li><strong><a name="00009" href="msg00009.html">Re: Sockets Layer Counter Proposal</a></strong>
<ul><li><em>From:</em> Arthur A. Gleckler</li></ul></li>
<li><strong><a name="00027" href="msg00027.html">Re: Sockets Layer Counter Proposal</a></strong>
<ul><li><em>From:</em> John Cowan</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00001" href="msg00001.html">Sockets Layer Counter Proposal</a></strong>
<ul><li><em>From:</em> Aaron W. Hsu</li></ul></li>
<li><strong><a name="00004" href="msg00004.html">Re: Sockets Layer Counter Proposal</a></strong>
<ul><li><em>From:</em> Aaron W. Hsu</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00006.html">Please update SRFI-106</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00008.html">Re: Sockets Layer Counter Proposal</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00005.html">Re: Sockets Layer Counter Proposal</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00008.html">Re: Sockets Layer Counter Proposal</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00007"><strong>Date</strong></a></li>
<li><a href="threads.html#00007"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>
